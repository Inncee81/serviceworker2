parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"uzVO":[function(require,module,exports) {
var process = require("process");
var n=require("process");function c(c,o){var t,r,u,i=!0;function e(c){function r(){o&&o(c,t),o=null}i?n.nextTick(r):r()}function f(n,c,o){t[n]=o,(0==--r||c)&&e(c)}Array.isArray(c)?(t=[],r=c.length):(u=Object.keys(c),t={},r=u.length),r?u?u.forEach(function(n){c[n](function(c,o){f(n,c,o)})}):c.forEach(function(n,c){n(function(n,o){f(c,n,o)})}):e(null),i=!1}module.exports=c;
},{"process":"g5IB"}],"bDYx":[function(require,module,exports) {
module.exports=r;const e=require("run-parallel");function r(r,n){if("string"==typeof r){const e=r;if(!(r=window.document.querySelector(r)))throw new Error(`"${e}" does not match any HTML elements`)}if(!r)throw new Error(`"${r}" is not a valid HTML element`);let a;return"function"==typeof n&&(n={onDrop:n}),r.addEventListener("dragenter",o,!1),r.addEventListener("dragover",i,!1),r.addEventListener("dragleave",l,!1),r.addEventListener("drop",s,!1),function(){f(),r.removeEventListener("dragenter",o,!1),r.removeEventListener("dragover",i,!1),r.removeEventListener("dragleave",l,!1),r.removeEventListener("drop",s,!1)};function o(e){return n.onDragEnter&&n.onDragEnter(e),e.stopPropagation(),e.preventDefault(),!1}function i(e){if(e.stopPropagation(),e.preventDefault(),n.onDragOver&&n.onDragOver(e),e.dataTransfer.items){const r=Array.from(e.dataTransfer.items),t=r.filter(e=>"file"===e.kind),a=r.filter(e=>"string"===e.kind);if(0===t.length&&!n.onDropText)return;if(0===a.length&&!n.onDrop)return;if(0===t.length&&0===a.length)return}return r.classList.add("drag"),clearTimeout(a),e.dataTransfer.dropEffect="copy",!1}function l(e){return e.stopPropagation(),e.preventDefault(),n.onDragLeave&&n.onDragLeave(e),clearTimeout(a),a=setTimeout(f,50),!1}function s(r){r.stopPropagation(),r.preventDefault(),n.onDragLeave&&n.onDragLeave(r),clearTimeout(a),f();const o={x:r.clientX,y:r.clientY},i=r.dataTransfer.getData("text");if(i&&n.onDropText&&n.onDropText(i,o),n.onDrop&&r.dataTransfer.items){const a=r.dataTransfer.files,i=Array.from(r.dataTransfer.items).filter(e=>"file"===e.kind);if(0===i.length)return;e(i.map(e=>r=>{t(e.webkitGetAsEntry(),r)}),(e,r)=>{if(e)throw e;const t=r.flat(),i=t.filter(e=>e.isFile),l=t.filter(e=>e.isDirectory);n.onDrop(i,o,a,l)})}return!1}function f(){r.classList.remove("drag")}}function t(r,n){let a=[];if(r.isFile)r.file(e=>{e.fullPath=r.fullPath,e.isFile=!0,e.isDirectory=!1,n(null,e)},e=>{n(e)});else if(r.isDirectory){!function o(i){i.readEntries(i=>{i.length>0?(a=a.concat(Array.from(i)),o()):e(a.map(e=>r=>{t(e,r)}),(e,t)=>{e?n(e):(t.push({fullPath:r.fullPath,name:r.name,isFile:!1,isDirectory:!0}),n(null,t))})})}(r.createReader())}}
},{"run-parallel":"uzVO"}],"wIHY":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function v(e,t,n,i){var o,s,v;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),v=s[t]),void 0===v)v=s[t]=n,++e._eventsCount;else if("function"==typeof v?v=s[t]=i?[n,v]:[v,n]:i?v.unshift(n):v.push(n),(o=f(e))>0&&v.length>o&&!v.warned){v.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=v.length,r(l)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):c(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function c(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var v=f.length,l=c(f,v);for(r=0;r<v;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return v(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return v(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,a(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,a(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"FRly":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"Quj6":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"aqZJ":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"aMB2":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"FRly","ieee754":"Quj6","isarray":"aqZJ","buffer":"aMB2"}],"Mrqk":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var n=require("buffer").Buffer;module.exports=function(u,o){var e=[];u.on("data",function(n){e.push(n)}),u.once("end",function(){o&&o(null,n.concat(e)),o=null}),u.once("error",function(n){o&&o(n),o=null})};
},{"buffer":"aMB2"}],"gIYa":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function o(r,e){for(var o in r)e[o]=r[o]}function n(r,o,n){return e(r,o,n)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(o(r,exports),exports.Buffer=n),n.prototype=Object.create(e.prototype),o(e,n),n.from=function(r,o,n){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,o,n)},n.alloc=function(r,o,n){if("number"!=typeof r)throw new TypeError("Argument must be a number");var t=e(r);return void 0!==o?"string"==typeof n?t.fill(o,n):t.fill(o):t.fill(0),t},n.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},n.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"aMB2"}],"OlWV":[function(require,module,exports) {

var e=require("safe-buffer").Buffer;function r(n,f,t){var o=[],a=null;return r._encode(o,n),a=e.concat(o),r.bytes=a.length,e.isBuffer(f)?(a.copy(f,t),f):a}r.bytes=-1,r._floatConversionDetected=!1,r.getType=function(r){return e.isBuffer(r)?"buffer":Array.isArray(r)?"array":ArrayBuffer.isView(r)?"arraybufferview":r instanceof Number?"number":r instanceof Boolean?"boolean":r instanceof ArrayBuffer?"arraybuffer":typeof r},r._encode=function(n,f){if(null!=f)switch(r.getType(f)){case"buffer":r.buffer(n,f);break;case"object":r.dict(n,f);break;case"array":r.list(n,f);break;case"string":r.string(n,f);break;case"number":case"boolean":r.number(n,f);break;case"arraybufferview":r.buffer(n,e.from(f.buffer,f.byteOffset,f.byteLength));break;case"arraybuffer":r.buffer(n,e.from(f))}};var n=e.from("e"),f=e.from("d"),t=e.from("l");r.buffer=function(r,n){r.push(e.from(n.length+":"),n)},r.string=function(r,n){r.push(e.from(e.byteLength(n)+":"+n))},r.number=function(n,f){var t=2147483648*(f/2147483648<<0)+(f%2147483648<<0);n.push(e.from("i"+t+"e")),t===f||r._floatConversionDetected||(r._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+f+'":','Bencoding only defines support for integers, value was converted to "'+t+'"'),console.trace())},r.dict=function(e,t){e.push(f);for(var o,a=0,u=Object.keys(t).sort(),s=u.length;a<s;a++)null!=t[o=u[a]]&&(r.string(e,o),r._encode(e,t[o]));e.push(n)},r.list=function(e,f){var o=0,a=f.length;for(e.push(t);o<a;o++)null!=f[o]&&r._encode(e,f[o]);e.push(n)},module.exports=r;
},{"safe-buffer":"gIYa"}],"FuEf":[function(require,module,exports) {

var n=require("safe-buffer").Buffer;const t=105,i=58,r=100,o=108,e=101;function a(n,t,i){for(var r=0,o=1,e=t;e<i;e++){var a=n[e];if(a<58&&a>=48)r=10*r+(a-48);else if(e!==t||43!==a){if(e!==t||45!==a){if(46===a)break;throw new Error("not a number: buffer["+e+"] = "+a)}o=-1}}return r*o}function f(t,i,r,o){return null==t||0===t.length?null:("number"!=typeof i&&null==o&&(o=i,i=void 0),"number"!=typeof r&&null==o&&(o=r,r=void 0),f.position=0,f.encoding=o||null,f.data=n.isBuffer(t)?t.slice(i,r):n.from(t),f.bytes=f.data.length,f.next())}f.bytes=0,f.position=0,f.data=null,f.encoding=null,f.next=function(){switch(f.data[f.position]){case 100:return f.dictionary();case 108:return f.list();case 105:return f.integer();default:return f.buffer()}},f.find=function(n){for(var t=f.position,i=f.data.length,r=f.data;t<i;){if(r[t]===n)return t;t++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(n)+'" [0x'+n.toString(16)+"]")},f.dictionary=function(){f.position++;for(var n={};101!==f.data[f.position];)n[f.buffer()]=f.next();return f.position++,n},f.list=function(){f.position++;for(var n=[];101!==f.data[f.position];)n.push(f.next());return f.position++,n},f.integer=function(){var n=f.find(101),t=a(f.data,f.position+1,n);return f.position+=n+1-f.position,t},f.buffer=function(){var n=f.find(58),t=a(f.data,f.position,n),i=++n+t;return f.position=i,f.encoding?f.data.toString(f.encoding,n,i):f.data.slice(n,i)},module.exports=f;
},{"safe-buffer":"gIYa"}],"XPbW":[function(require,module,exports) {
var e=module.exports;e.encode=require("./encode"),e.decode=require("./decode"),e.byteLength=e.encodingLength=function(n){return e.encode(n).length};
},{"./encode":"OlWV","./decode":"FuEf"}],"o232":[function(require,module,exports) {
module.exports=require("events").EventEmitter;
},{"events":"wIHY"}],"sC8V":[function(require,module,exports) {

},{}],"W1hK":[function(require,module,exports) {

"use strict";function t(t){for(var n=1;n<arguments.length;n++){var h=null!=arguments[n]?arguments[n]:{},i=Object.keys(h);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(h).filter(function(t){return Object.getOwnPropertyDescriptor(h,t).enumerable}))),i.forEach(function(n){e(t,n,h[n])})}return t}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=require("buffer"),h=n.Buffer,i=require("util"),a=i.inspect,r=a&&a.custom||"inspect";function l(t,e,n){h.prototype.copy.call(t,e,n)}module.exports=function(){function e(){this.head=null,this.tail=null,this.length=0}var n=e.prototype;return n.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},n.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},n.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},n.clear=function(){this.head=this.tail=null,this.length=0},n.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},n.concat=function(t){if(0===this.length)return h.alloc(0);for(var e=h.allocUnsafe(t>>>0),n=this.head,i=0;n;)l(n.data,e,i),i+=n.data.length,n=n.next;return e},n.consume=function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n},n.first=function(){return this.head.data},n._getString=function(t){var e=this.head,n=1,h=e.data;for(t-=h.length;e=e.next;){var i=e.data,a=t>i.length?i.length:t;if(a===i.length?h+=i:h+=i.slice(0,t),0===(t-=a)){a===i.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(a));break}++n}return this.length-=n,h},n._getBuffer=function(t){var e=h.allocUnsafe(t),n=this.head,i=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var a=n.data,r=t>a.length?a.length:t;if(a.copy(e,e.length-t,0,r),0===(t-=r)){r===a.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(r));break}++i}return this.length-=i,e},n[r]=function(e,n){return a(this,t({},n,{depth:0,customInspect:!1}))},e}();
},{"buffer":"aMB2","util":"sC8V"}],"Umu5":[function(require,module,exports) {
var process = require("process");
var t=require("process");function e(e,r){var d=this,l=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return l||h?(r?r(e):!e||this._writableState&&this._writableState.errorEmitted||t.nextTick(s,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!r&&e?(t.nextTick(a,d,e),d._writableState&&(d._writableState.errorEmitted=!0)):r?(t.nextTick(i,d),r(e)):t.nextTick(i,d)}),this)}function a(t,e){s(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(t,e){t.emit("error",e)}module.exports={destroy:e,undestroy:r};
},{"process":"g5IB"}],"TAXC":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var e={};function o(t,o,r){r||(r=Error);var c=function(t){function e(n,e,r){return t.call(this,function(t,n,e){return"string"==typeof o?o:o(t,n,e)}(n,e,r))||this}return n(e,t),e}(r);c.prototype.name=r.name,c.prototype.code=t,e[t]=c}function r(t,n){if(Array.isArray(t)){var e=t.length;return t=t.map(function(t){return String(t)}),e>2?"one of ".concat(n," ").concat(t.slice(0,e-1).join(", "),", or ")+t[e-1]:2===e?"one of ".concat(n," ").concat(t[0]," or ").concat(t[1]):"of ".concat(n," ").concat(t[0])}return"of ".concat(n," ").concat(String(t))}function c(t,n,e){return t.substr(!e||e<0?0:+e,n.length)===n}function a(t,n,e){return(void 0===e||e>t.length)&&(e=t.length),t.substring(e-n.length,e)===n}function u(t,n,e){return"number"!=typeof e&&(e=0),!(e+n.length>t.length)&&-1!==t.indexOf(n,e)}o("ERR_INVALID_OPT_VALUE",function(t,n){return'The value "'+n+'" is invalid for option "'+t+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(n,e,o){var i,E;if("string"==typeof e&&c(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be",a(n," argument"))E="The ".concat(n," ").concat(i," ").concat(r(e,"type"));else{var f=u(n,".")?"property":"argument";E='The "'.concat(n,'" ').concat(f," ").concat(i," ").concat(r(e,"type"))}return E+=". Received type ".concat(t(o))},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.codes=e;
},{}],"dHOL":[function(require,module,exports) {
"use strict";var r=require("../../../errors").codes.ERR_INVALID_OPT_VALUE;function e(r,e,t){return null!=r.highWaterMark?r.highWaterMark:e?r[t]:null}function t(t,i,o,a){var n=e(i,a,o);if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new r(a?o:"highWaterMark",n);return Math.floor(n)}return t.objectMode?16:16384}module.exports={getHighWaterMark:t};
},{"../../../errors":"TAXC"}],"IAYJ":[function(require,module,exports) {
var process = require("process");
var e=require("process"),n=new Set;function a(a){if(!n.has(a)){var i=a+" is an experimental feature. This feature could change at any time";n.add(a),e.emitWarning(i,"ExperimentalWarning")}}function i(){}module.exports.emitExperimentalWarning=e.emitWarning?a:i;
},{"process":"g5IB"}],"oxwV":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}};
},{}],"hQaz":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3];function t(r,t){if(e("noDeprecation"))return r;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(t);e("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return r.apply(this,arguments)}}function e(t){try{if(!r.localStorage)return!1}catch(n){return!1}var e=r.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}module.exports=t;
},{}],"pX9p":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e,t=arguments[3],n=require("process");function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){H(t,e)}}module.exports=v,v.WritableState=m;var o={deprecate:require("util-deprecate")},s=require("./internal/streams/stream"),f=require("buffer").Buffer,u=t.Uint8Array||function(){};function a(e){return f.from(e)}function c(e){return f.isBuffer(e)||e instanceof u}var l,d=require("./internal/streams/destroy"),h=require("./internal/streams/state"),b=h.getHighWaterMark,p=require("../errors").codes,w=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,_=p.ERR_STREAM_CANNOT_PIPE,R=p.ERR_STREAM_DESTROYED,k=p.ERR_STREAM_NULL_VALUES,q=p.ERR_STREAM_WRITE_AFTER_END,E=p.ERR_UNKNOWN_ENCODING;function S(){}function m(t,n,r){e=e||require("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=b(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){O(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function v(t){var n=this instanceof(e=e||require("./_stream_duplex"));if(!n&&!l.call(v,this))return new v(t);this._writableState=new m(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function x(e,t){var r=new q;e.emit("error",r),n.nextTick(t,r)}function M(e,t,r,i){var o;return null===r?o=new k:"string"==typeof r||t.objectMode||(o=new w("chunk",["string","Buffer"],r)),!o||(e.emit("error",o),n.nextTick(i,o),!1)}function B(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n)),t}function T(e,t,n,r,i,o){if(!n){var s=B(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var f=t.objectMode?1:r.length;t.length+=f;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else P(e,t,!1,f,r,i,o);return u}function P(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new R("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function j(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(F,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),F(e,t))}function C(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function O(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(C(r),t)j(e,r,i,t,o);else{var s=N(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||L(e,r),i?n.nextTick(A,e,r,s,o):A(e,r,s,o)}}function A(e,t,n,r){n||D(e,t),t.pendingcb--,r(),F(e,t)}function D(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function L(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var f=0,u=!0;n;)o[f]=n,n.isBuf||(u=!1),n=n.next,f+=1;o.allBuffers=u,P(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback;if(P(e,t,!1,t.objectMode?1:a.length,a,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function N(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),F(e,t)})}function W(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(I,e,t)))}function F(e,t){var n=N(t);return n&&(W(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function U(e,t,r){t.ending=!0,F(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function H(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}require("inherits")(v,s),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===v&&(e&&e._writableState instanceof m)}})):l=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new _)},v.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&c(e);return o&&!f.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=S),r.ending?x(this,n):(o||M(this,r,e,n))&&(r.pendingcb++,i=T(this,r,o,e,t,n)),i},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||L(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new y("_write()"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||U(this,r,n),this},Object.defineProperty(v.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=d.destroy,v.prototype._undestroy=d.undestroy,v.prototype._destroy=function(e,t){t(e)};
},{"util-deprecate":"hQaz","./internal/streams/stream":"o232","buffer":"aMB2","./internal/streams/destroy":"Umu5","./internal/streams/state":"dHOL","../errors":"TAXC","inherits":"oxwV","./_stream_duplex":"gYn1","process":"g5IB"}],"gYn1":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=require("./_stream_readable"),a=require("./_stream_writable");require("inherits")(l,r);for(var i=t(a.prototype),n=0;n<i.length;n++){var o=i[n];l.prototype[o]||(l.prototype[o]=a.prototype[o])}function l(e){if(!(this instanceof l))return new l(e);r.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||e.nextTick(b,this)}function b(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});
},{"./_stream_readable":"KTao","./_stream_writable":"pX9p","inherits":"oxwV","process":"g5IB"}],"ikue":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":"gIYa"}],"JwKS":[function(require,module,exports) {
"use strict";var e=require("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function r(e){var r=!1;return function(){if(!r){r=!0;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.apply(this,n)}}}function t(){}function n(e){return e.setHeader&&"function"==typeof e.abort}function o(i,a,l){if("function"==typeof a)return o(i,null,a);a||(a={}),l=r(l||t);var s=a.readable||!1!==a.readable&&i.readable,c=a.writable||!1!==a.writable&&i.writable,u=function(){i.writable||d()},f=i._writableState&&i._writableState.finished,d=function(){c=!1,f=!0,s||l.call(i)},b=i._readableState&&i._readableState.endEmitted,v=function(){s=!1,b=!0,c||l.call(i)},m=function(e){l.call(i,e)},w=function(){var r;return s&&!b?(i._readableState&&i._readableState.ended||(r=new e),l.call(i,r)):c&&!f?(i._writableState&&i._writableState.ended||(r=new e),l.call(i,r)):void 0},_=function(){i.req.on("finish",d)};return n(i)?(i.on("complete",d),i.on("abort",w),i.req?_():i.on("request",_)):c&&!i._writableState&&(i.on("end",u),i.on("close",u)),i.on("end",v),i.on("finish",d),!1!==a.error&&i.on("error",m),i.on("close",w),function(){i.removeListener("complete",d),i.removeListener("abort",w),i.removeListener("request",_),i.req&&i.req.removeListener("finish",d),i.removeListener("end",u),i.removeListener("close",u),i.removeListener("finish",d),i.removeListener("end",v),i.removeListener("error",m),i.removeListener("close",w)}}module.exports=o;
},{"../../../errors":"TAXC"}],"dULW":[function(require,module,exports) {
var process = require("process");
var e,n=require("process");function r(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var t=require("./end-of-stream"),l=Symbol("lastResolve"),u=Symbol("lastReject"),i=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),s=Symbol("handlePromise"),c=Symbol("stream");function f(e,n){return{value:e,done:n}}function v(e){var n=e[l];if(null!==n){var r=e[c].read();null!==r&&(e[a]=null,e[l]=null,e[u]=null,n(f(r,!1)))}}function d(e){n.nextTick(v,e)}function b(e,n){return function(r,t){e.then(function(){n[o]?r(f(void 0,!0)):n[s](r,t)},t)}}var m=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((r(e={get stream(){return this[c]},next:function(){var e=this,r=this[i];if(null!==r)return Promise.reject(r);if(this[o])return Promise.resolve(f(void 0,!0));if(this[c].destroyed)return new Promise(function(r,t){n.nextTick(function(){e[i]?t(e[i]):r(f(void 0,!0))})});var t,l=this[a];if(l)t=new Promise(b(l,this));else{var u=this[c].read();if(null!==u)return Promise.resolve(f(u,!1));t=new Promise(this[s])}return this[a]=t,t}},Symbol.asyncIterator,function(){return this}),r(e,"return",function(){var e=this;return new Promise(function(n,r){e[c].destroy(null,function(e){e?r(e):n(f(void 0,!0))})})}),e),m),y=function(e){var n,v=Object.create(h,(r(n={},c,{value:e,writable:!0}),r(n,l,{value:null,writable:!0}),r(n,u,{value:null,writable:!0}),r(n,i,{value:null,writable:!0}),r(n,o,{value:e._readableState.endEmitted,writable:!0}),r(n,s,{value:function(e,n){var r=v[c].read();r?(v[a]=null,v[l]=null,v[u]=null,e(f(r,!1))):(v[l]=e,v[u]=n)},writable:!0}),n));return v[a]=null,t(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var n=v[u];return null!==n&&(v[a]=null,v[l]=null,v[u]=null,n(e)),void(v[i]=e)}var r=v[l];null!==r&&(v[a]=null,v[l]=null,v[u]=null,r(f(void 0,!0))),v[o]=!0}),e.on("readable",d.bind(null,v)),v};module.exports=y;
},{"./end-of-stream":"JwKS","process":"g5IB"}],"KTao":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e,t=arguments[3],n=require("process");module.exports=j,j.ReadableState=L;var r=require("events").EventEmitter,i=function(e,t){return e.listeners(t).length},a=require("./internal/streams/stream"),d=require("buffer").Buffer,o=t.Uint8Array||function(){};function s(e){return d.from(e)}function l(e){return d.isBuffer(e)||e instanceof o}var u,p=require("util");u=p&&p.debuglog?p.debuglog("stream"):function(){};var h,f,c=require("./internal/streams/buffer_list"),g=require("./internal/streams/destroy"),b=require("./internal/streams/state"),m=b.getHighWaterMark,y=require("../errors").codes,_=y.ERR_INVALID_ARG_TYPE,v=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,S=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,M=require("../experimentalWarning"),R=M.emitExperimentalWarning;require("inherits")(j,a);var E=["error","close","destroy","pause","resume"];function k(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function L(t,n,r){e=e||require("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",r),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=require("string_decoder/").StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function j(t){if(e=e||require("./_stream_duplex"),!(this instanceof j))return new j(t);var n=this instanceof e;this._readableState=new L(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function C(e,t,n,r,i){u("readableAddChunk",t);var a,o=e._readableState;if(null===t)o.reading=!1,A(e,o);else if(i||(a=D(o,t)),a)e.emit("error",a);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=s(t)),r)o.endEmitted?e.emit("error",new S):T(e,o,t,!0);else if(o.ended)e.emit("error",new v);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?T(e,o,t,!1):U(e,o)):T(e,o,t,!1)}else r||(o.reading=!1,U(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function T(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&O(e)),U(e,t)}function D(e,t){var n;return l(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new _("chunk",["string","Buffer","Uint8Array"],t)),n}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),j.prototype.destroy=g.destroy,j.prototype._undestroy=g.undestroy,j.prototype._destroy=function(e,t){t(e)},j.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=d.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},j.prototype.unshift=function(e){return C(this,e,null,!0,!1)},j.prototype.isPaused=function(){return!1===this._readableState.flowing},j.prototype.setEncoding=function(e){return h||(h=require("string_decoder/").StringDecoder),this._readableState.decoder=new h(e),this._readableState.encoding=this._readableState.decoder.encoding,this};var q=8388608;function W(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=W(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}function O(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(P,e))}function P(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,G(e)}function U(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function N(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,G(e))}}function H(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function F(e){u("readable nexttick read 0"),e.read(0)}function B(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(V,e,t))}function V(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),G(e),t.flowing&&!t.reading&&e.read(0)}function G(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function Y(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function z(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(J,t,e))}function J(e,t){u("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function K(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}j.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):O(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(n,t))),null===(r=e>0?Y(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},j.prototype._read=function(e){this.emit("error",new w("_read()"))},j.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,u("pipe count=%d opts=%j",a.pipesCount,t);var d=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:b;function o(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",c),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",b),r.removeListener("data",h),p=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function s(){u("onend"),e.end()}a.endEmitted?n.nextTick(d):r.once("end",d),e.on("unpipe",o);var l=N(r);e.on("drain",l);var p=!1;function h(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==K(a.pipes,e))&&!p&&(u("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function f(t){u("onerror",t),b(),e.removeListener("error",f),0===i(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",g),b()}function g(){u("onfinish"),e.removeListener("close",c),b()}function b(){u("unpipe"),r.unpipe(e)}return r.on("data",h),k(e,"error",f),e.once("close",c),e.once("finish",g),e.emit("pipe",r),a.flowing||(u("pipe resume"),r.resume()),e},j.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var d=K(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},j.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?O(this):i.reading||n.nextTick(F,this))),r},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(H,this),r},j.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(H,this),t},j.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,B(this,e)),e.paused=!1,this},j.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},j.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(j.prototype[Symbol.asyncIterator]=function(){return R("Readable[Symbol.asyncIterator]"),void 0===f&&(f=require("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),j._fromList=Y,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});
},{"events":"wIHY","./internal/streams/stream":"o232","buffer":"aMB2","util":"sC8V","./internal/streams/buffer_list":"W1hK","./internal/streams/destroy":"Umu5","./internal/streams/state":"dHOL","../errors":"TAXC","../experimentalWarning":"IAYJ","inherits":"oxwV","./_stream_duplex":"gYn1","string_decoder/":"ikue","./internal/streams/async_iterator":"dULW","process":"g5IB"}],"PxOV":[function(require,module,exports) {
"use strict";module.exports=o;var t=require("../errors").codes,r=t.ERR_METHOD_NOT_IMPLEMENTED,e=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=t.ERR_TRANSFORM_WITH_LENGTH_0,a=require("./_stream_duplex");function s(t,r){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new e);n.writechunk=null,n.writecb=null,null!=r&&this.push(r),i(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(r,e){f(t,r,e)})}function f(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new i;if(t._transformState.transforming)throw new n;return t.push(null)}require("inherits")(o,a),o.prototype.push=function(t,r){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,r)},o.prototype._transform=function(t,e,n){n(new r("_transform()"))},o.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var r=this._transformState;null===r.writechunk||r.transforming?r.needTransform=!0:(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform))},o.prototype._destroy=function(t,r){a.prototype._destroy.call(this,t,function(t){r(t)})};
},{"../errors":"TAXC","./_stream_duplex":"gYn1","inherits":"oxwV"}],"pumY":[function(require,module,exports) {
"use strict";module.exports=t;var r=require("./_stream_transform");function t(e){if(!(this instanceof t))return new t(e);r.call(this,e)}require("inherits")(t,r),t.prototype._transform=function(r,t,e){e(null,r)};
},{"./_stream_transform":"PxOV","inherits":"oxwV"}],"AqZF":[function(require,module,exports) {
"use strict";var r;function n(r){var n=!1;return function(){n||(n=!0,r.apply(void 0,arguments))}}var t=require("../../../errors").codes,e=t.ERR_MISSING_ARGS,o=t.ERR_STREAM_DESTROYED;function i(r){if(r)throw r}function u(r){return r.setHeader&&"function"==typeof r.abort}function f(t,e,i,f){f=n(f);var a=!1;t.on("close",function(){a=!0}),void 0===r&&(r=require("./end-of-stream")),r(t,{readable:e,writable:i},function(r){if(r)return f(r);a=!0,f()});var c=!1;return function(r){if(!a&&!c)return c=!0,u(t)?t.abort():"function"==typeof t.destroy?t.destroy():void f(r||new o("pipe"))}}function a(r){r()}function c(r,n){return r.pipe(n)}function p(r){return r.length?"function"!=typeof r[r.length-1]?i:r.pop():i}function s(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];var o,i=p(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new e("streams");var u=n.map(function(r,t){var e=t<n.length-1;return f(r,e,t>0,function(r){o||(o=r),r&&u.forEach(a),e||(u.forEach(a),i(o))})});return n.reduce(c)}module.exports=s;
},{"../../../errors":"TAXC","./end-of-stream":"JwKS"}],"YvpY":[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"),exports.finished=require("./lib/internal/streams/end-of-stream.js"),exports.pipeline=require("./lib/internal/streams/pipeline.js");
},{"./lib/_stream_readable.js":"KTao","./lib/_stream_writable.js":"pX9p","./lib/_stream_duplex.js":"gYn1","./lib/_stream_transform.js":"PxOV","./lib/_stream_passthrough.js":"pumY","./lib/internal/streams/end-of-stream.js":"JwKS","./lib/internal/streams/pipeline.js":"AqZF"}],"uClA":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;const{Transform:s}=require("readable-stream");class t extends s{constructor(e,s={}){super(s),"object"==typeof e&&(e=(s=e).size),this.size=e||512;const{nopad:t,zeroPadding:i=!0}=s;this._zeroPadding=!t&&!!i,this._buffered=[],this._bufferedBytes=0}_transform(s,t,i){for(this._bufferedBytes+=s.length,this._buffered.push(s);this._bufferedBytes>=this.size;){const s=e.concat(this._buffered);this._bufferedBytes-=this.size,this.push(s.slice(0,this.size)),this._buffered=[s.slice(this.size,s.length)]}i()}_flush(){if(this._bufferedBytes&&this._zeroPadding){const s=e.alloc(this.size-this._bufferedBytes);this._buffered.push(s),this.push(e.concat(this._buffered)),this._buffered=null}else this._bufferedBytes&&(this.push(e.concat(this._buffered)),this._buffered=null);this.push(null)}}module.exports=t;
},{"readable-stream":"YvpY","buffer":"aMB2"}],"CGN1":[function(require,module,exports) {
function t(t){return Math.max(16384,1<<Math.log2(t<1024?1:t/1024)+.5|0)}module.exports=t;
},{}],"sNrv":[function(require,module,exports) {
var process = require("process");
var r=require("process");function t(r,t){for(var e=0,n=r.length-1;n>=0;n--){var o=r[n];"."===o?r.splice(n,1):".."===o?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function e(r){"string"!=typeof r&&(r+="");var t,e=0,n=-1,o=!0;for(t=r.length-1;t>=0;--t)if(47===r.charCodeAt(t)){if(!o){e=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":r.slice(e,n)}function n(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}exports.resolve=function(){for(var e="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var i=s>=0?arguments[s]:r.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,o="/"===i.charAt(0))}return(o?"/":"")+(e=t(n(e.split("/"),function(r){return!!r}),!o).join("/"))||"."},exports.normalize=function(r){var e=exports.isAbsolute(r),s="/"===o(r,-1);return(r=t(n(r.split("/"),function(r){return!!r}),!e).join("/"))||e||(r="."),r&&s&&(r+="/"),(e?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(n(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),o=e(t.split("/")),s=Math.min(n.length,o.length),i=s,u=0;u<s;u++)if(n[u]!==o[u]){i=u;break}var f=[];for(u=i;u<n.length;u++)f.push("..");return(f=f.concat(o.slice(i))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){if("string"!=typeof r&&(r+=""),0===r.length)return".";for(var t=r.charCodeAt(0),e=47===t,n=-1,o=!0,s=r.length-1;s>=1;--s)if(47===(t=r.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?e?"/":".":e&&1===n?"/":r.slice(0,n)},exports.basename=function(r,t){var n=e(r);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},exports.extname=function(r){"string"!=typeof r&&(r+="");for(var t=-1,e=0,n=-1,o=!0,s=0,i=r.length-1;i>=0;--i){var u=r.charCodeAt(i);if(47!==u)-1===n&&(o=!1,n=i+1),46===u?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){e=i+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===e+1?"":r.slice(t,n)};var o="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};
},{"process":"g5IB"}],"ugmL":[function(require,module,exports) {
module.exports=n,n.strict=a,n.loose=o;var t=Object.prototype.toString,r={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function n(t){return a(t)||o(t)}function a(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function o(n){return r[t.call(n)]}
},{}],"QV2L":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,r=require("is-typedarray").strict;module.exports=function(t){if(r(t)){var f=e.from(t.buffer);return t.byteLength!==t.buffer.byteLength&&(f=f.slice(t.byteOffset,t.byteOffset+t.byteLength)),f}return e.from(t)};
},{"is-typedarray":"ugmL","buffer":"aMB2"}],"DM2V":[function(require,module,exports) {
const{Readable:e}=require("readable-stream"),r=require("typedarray-to-buffer");class s extends e{constructor(e,s={}){super(s),this._offset=0,this._ready=!1,this._file=e,this._size=e.size,this._chunkSize=s.chunkSize||Math.max(this._size/1e3,204800);const t=new FileReader;t.onload=(()=>{this.push(r(t.result))}),t.onerror=(()=>{this.emit("error",t.error)}),this.reader=t,this._generateHeaderBlocks(e,s,(e,r)=>{if(e)return this.emit("error",e);Array.isArray(r)&&r.forEach(e=>this.push(e)),this._ready=!0,this.emit("_ready")})}_generateHeaderBlocks(e,r,s){s(null,[])}_read(){if(!this._ready)return void this.once("_ready",this._read.bind(this));const e=this._offset;let r=this._offset+this._chunkSize;if(r>this._size&&(r=this._size),e===this._size)return this.destroy(),void this.push(null);this.reader.readAsArrayBuffer(this._file.slice(e,r)),this._offset=r}destroy(){if(this._file=null,this.reader){this.reader.onload=null,this.reader.onerror=null;try{this.reader.abort()}catch(e){}}this.reader=null}}module.exports=s;
},{"readable-stream":"YvpY","typedarray-to-buffer":"QV2L"}],"JWxf":[function(require,module,exports) {
"use strict";var t=require("fs");function e(e){return t.existsSync(e)&&t.statSync(e).isFile()}module.exports=function(n,r){if(!r)return e(n);t.stat(n,function(t,e){return t?r(t):r(null,e.isFile())})},module.exports.sync=e;
},{"fs":"sC8V"}],"Y1W6":[function(require,module,exports) {
"use strict";var e=["^npm-debug\\.log$","^\\..*\\.swp$","^\\.DS_Store$","^\\.AppleDouble$","^\\.LSOverride$","^Icon\\r$","^\\._.*","^\\.Spotlight-V100(?:$|\\/)","\\.Trashes","^__MACOSX$","~$","^Thumbs\\.db$","^ehthumbs\\.db$","^Desktop\\.ini$","@eaDir$"];exports.re=function(){throw new Error("`junk.re` was renamed to `junk.regex`")},exports.regex=new RegExp(e.join("|")),exports.is=function(e){return exports.regex.test(e)},exports.not=function(e){return!exports.is(e)},exports.default=module.exports;
},{}],"qJ1R":[function(require,module,exports) {
var t=require("readable-stream");function e(t){return s(t,{objectMode:!0,highWaterMark:16})}function r(t){return s(t)}function s(e,r){if(!e||"function"==typeof e||e._readableState)return e;var s=new t.Readable(r).wrap(e);return e.destroy&&(s.destroy=e.destroy.bind(e)),s}class i extends t.Readable{constructor(t,s){super(s),this.destroyed=!1,this._drained=!1,this._forwarding=!1,this._current=null,this._toStreams2=s&&s.objectMode?e:r,"function"==typeof t?this._queue=t:(this._queue=t.map(this._toStreams2),this._queue.forEach(t=>{"function"!=typeof t&&this._attachErrorListener(t)})),this._next()}_read(){this._drained=!0,this._forward()}_forward(){if(!this._forwarding&&this._drained&&this._current){var t;for(this._forwarding=!0;null!==(t=this._current.read())&&this._drained;)this._drained=this.push(t);this._forwarding=!1}}destroy(t){this.destroyed||(this.destroyed=!0,this._current&&this._current.destroy&&this._current.destroy(),"function"!=typeof this._queue&&this._queue.forEach(t=>{t.destroy&&t.destroy()}),t&&this.emit("error",t),this.emit("close"))}_next(){if(this._current=null,"function"==typeof this._queue)this._queue((t,e)=>{if(t)return this.destroy(t);e=this._toStreams2(e),this._attachErrorListener(e),this._gotNextStream(e)});else{var t=this._queue.shift();"function"==typeof t&&(t=this._toStreams2(t()),this._attachErrorListener(t)),this._gotNextStream(t)}}_gotNextStream(t){if(!t)return this.push(null),void this.destroy();this._current=t,this._forward();const e=()=>{this._forward()},r=()=>{t._readableState.ended||this.destroy()},s=()=>{this._current=null,t.removeListener("readable",e),t.removeListener("end",s),t.removeListener("close",r),this._next()};t.on("readable",e),t.once("end",s),t.once("close",r)}_attachErrorListener(t){if(!t)return;const e=r=>{t.removeListener("error",e),this.destroy(r)};t.once("error",e)}}i.obj=(t=>new i(t,{objectMode:!0,highWaterMark:16})),module.exports=i;
},{"readable-stream":"YvpY"}],"lhXj":[function(require,module,exports) {
function n(e,r){if(e&&r)return n(e)(r);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){t[n]=e[n]}),t;function t(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];var t=e.apply(this,n),o=n[n.length-1];return"function"==typeof t&&t!==o&&Object.keys(o).forEach(function(n){t[n]=o[n]}),t}}module.exports=n;
},{}],"Z8tK":[function(require,module,exports) {
var e=require("wrappy");function r(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function n(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return r.onceError=n+" shouldn't be called more than once",r.called=!1,r}module.exports=e(r),module.exports.strict=e(n),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return n(this)},configurable:!0})});
},{"wrappy":"lhXj"}],"Ip3H":[function(require,module,exports) {
var define;
var e;!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof e&&e.amd?e([],r):"object"==typeof exports?exports.Rusha=r():t.Rusha=r()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){var n=r(5),o=r(1),i=o.toHex,a=o.ceilHeapSize,s=r(6),f=function(e){for(e+=9;e%64>0;e+=1);return e},u=function(e,t){var r=new Int32Array(e,t+320,5),n=new Int32Array(5),o=new DataView(n.buffer);return o.setInt32(0,r[0],!1),o.setInt32(4,r[1],!1),o.setInt32(8,r[2],!1),o.setInt32(12,r[3],!1),o.setInt32(16,r[4],!1),n},c=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=t||65536)%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=t,this._padMaxChunkLen=f(t),this._heap=new ArrayBuffer(a(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new n({Int32Array:Int32Array},{},this._heap)}return e.prototype._initState=function(e,t){this._offset=0;var r=new Int32Array(e,t+320,5);r[0]=1732584193,r[1]=-271733879,r[2]=-1732584194,r[3]=271733878,r[4]=-1009589776},e.prototype._padChunk=function(e,t){var r=f(e),n=new Int32Array(this._heap,0,r>>2);return function(e,t){var r=new Uint8Array(e.buffer),n=t%4,o=t-n;switch(n){case 0:r[o+3]=0;case 1:r[o+2]=0;case 2:r[o+1]=0;case 3:r[o+0]=0}for(var i=1+(t>>2);i<e.length;i++)e[i]=0}(n,e),function(e,t,r){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=r/(1<<29)|0,e[15+(2+(t>>2)&-16)]=r<<3}(n,e,t),r},e.prototype._write=function(e,t,r,n){s(e,this._h8,this._h32,t,r,n||0)},e.prototype._coreCall=function(e,t,r,n,o){var i=r;this._write(e,t,r),o&&(i=this._padChunk(r,n)),this._core.hash(i,this._padMaxChunkLen)},e.prototype.rawDigest=function(e){var t=e.byteLength||e.length||e.size||0;this._initState(this._heap,this._padMaxChunkLen);var r=0,n=this._maxChunkLen;for(r=0;t>r+n;r+=n)this._coreCall(e,r,n,t,!1);return this._coreCall(e,r,t-r,t,!0),u(this._heap,this._padMaxChunkLen)},e.prototype.digest=function(e){return i(this.rawDigest(e).buffer)},e.prototype.digestFromString=function(e){return this.digest(e)},e.prototype.digestFromBuffer=function(e){return this.digest(e)},e.prototype.digestFromArrayBuffer=function(e){return this.digest(e)},e.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},e.prototype.append=function(e){var t=0,r=e.byteLength||e.length||e.size||0,n=this._offset%this._maxChunkLen,o=void 0;for(this._offset+=r;t<r;)o=Math.min(r-t,this._maxChunkLen-n),this._write(e,t,o,n),t+=o,(n+=o)===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),n=0);return this},e.prototype.getState=function(){var e=void 0;if(this._offset%this._maxChunkLen)e=this._heap.slice(0);else{var t=new Int32Array(this._heap,this._padMaxChunkLen+320,5);e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}return{offset:this._offset,heap:e}},e.prototype.setState=function(e){(this._offset=e.offset,20===e.heap.byteLength)?new Int32Array(this._heap,this._padMaxChunkLen+320,5).set(new Int32Array(e.heap)):this._h32.set(new Int32Array(e.heap));return this},e.prototype.rawEnd=function(){var e=this._offset,t=e%this._maxChunkLen,r=this._padChunk(t,e);this._core.hash(r,this._padMaxChunkLen);var n=u(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),n},e.prototype.end=function(){return i(this.rawEnd().buffer)},e}();e.exports=c,e.exports._core=n},function(e,t){for(var r=new Array(256),n=0;n<256;n++)r[n]=(n<16?"0":"")+n.toString(16);e.exports.toHex=function(e){for(var t=new Uint8Array(e),n=new Array(e.byteLength),o=0;o<n.length;o++)n[o]=r[t[o]];return n.join("")},e.exports.ceilHeapSize=function(e){var t=0;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t},e.exports.isDedicatedWorkerScope=function(e){var t="WorkerGlobalScope"in e&&e instanceof e.WorkerGlobalScope,r="SharedWorkerGlobalScope"in e&&e instanceof e.SharedWorkerGlobalScope,n="ServiceWorkerGlobalScope"in e&&e instanceof e.ServiceWorkerGlobalScope;return t&&!r&&!n}},function(e,t,r){e.exports=function(){var e=r(0),t=function(e,r,n,o,i){var a=new self.FileReader;a.onloadend=function(){if(a.error)return i(a.error);var s=a.result;r+=a.result.byteLength;try{e.append(s)}catch(f){return void i(f)}r<o.size?t(e,r,n,o,i):i(null,e.end())},a.readAsArrayBuffer(o.slice(r,r+n))},n=!0;return self.onmessage=function(r){if(n){var o=r.data.data,i=r.data.file,a=r.data.id;if(void 0!==a&&(i||o)){var s=r.data.blockSize||4194304,f=new e(s);f.resetState();var u=function(e,t){e?self.postMessage({id:a,error:e.name}):self.postMessage({id:a,hash:t})};o&&function(e,t,r){try{r(null,e.digest(t))}catch(n){return r(n)}}(f,o,u),i&&t(f,0,s,i,u)}}},function(){n=!1}}},function(e,t,r){var n=r(4),o=r(0),i=r(7),a=r(2),s=r(1).isDedicatedWorkerScope,f="undefined"!=typeof self&&s(self);o.disableWorkerBehaviour=f?a():function(){},o.createWorker=function(){var e=n(2),t=e.terminate;return e.terminate=function(){URL.revokeObjectURL(e.objectURL),t.call(e)},e},o.createHash=i,e.exports=o},function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var o="[\\.|\\-|\\+|\\w|/|@]+",i="\\((/\\*.*?\\*/)?s?.*?("+o+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,n){var s={};s[n]=[];var f=t.toString(),u=f.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var c,h=u[1],p=new RegExp("(\\\\n|\\W)"+a(h)+i,"g");c=p.exec(f);)"dll-reference"!==c[3]&&s[n].push(c[3]);for(p=new RegExp("\\("+a(h)+'\\("(dll-reference\\s('+o+'))"\\)\\)'+i,"g");c=p.exec(f);)e[c[2]]||(s[n].push(c[1]),e[c[2]]=r(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);return s}function f(e){return Object.keys(e).reduce(function(t,r){return t||e[r].length>0},!1)}e.exports=function(e,t){t=t||{};var o={main:r.m},i=t.all?{main:Object.keys(o)}:function(e,t){for(var r={main:[t]},n={main:[]},o={main:{}};f(r);)for(var i=Object.keys(r),a=0;a<i.length;a++){var u=i[a],c=r[u].pop();if(o[u]=o[u]||{},!o[u][c]&&e[u][c]){o[u][c]=!0,n[u]=n[u]||[],n[u].push(c);for(var h=s(e,e[u][c],u),p=Object.keys(h),d=0;d<p.length;d++)r[p[d]]=r[p[d]]||[],r[p[d]]=r[p[d]].concat(h[p[d]])}}return n}(o,e),a="";Object.keys(i).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;i[e][t];)t++;i[e].push(t),o[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map(function(t){return JSON.stringify(t)+": "+o[e][t].toString()}).join(",")+"});\n"}),a=a+"("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map(function(e){return JSON.stringify(e)+": "+o.main[e].toString()}).join(",")+"})(self);";var u=new window.Blob([a],{type:"text/javascript"});if(t.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),h=new window.Worker(c);return h.objectURL=c,h}},function(e,t){e.exports=function(e,t,r){"use asm";var n=new e.Int32Array(r);function o(e,t){e=e|0;t=t|0;var r=0,o=0,i=0,a=0,s=0,f=0,u=0,c=0,h=0,p=0,d=0,l=0,_=0,y=0;i=n[t+320>>2]|0;s=n[t+324>>2]|0;u=n[t+328>>2]|0;h=n[t+332>>2]|0;d=n[t+336>>2]|0;for(r=0;(r|0)<(e|0);r=r+64|0){a=i;f=s;c=u;p=h;l=d;for(o=0;(o|0)<64;o=o+4|0){y=n[r+o>>2]|0;_=((i<<5|i>>>27)+(s&u|~s&h)|0)+((y+d|0)+1518500249|0)|0;d=h;h=u;u=s<<30|s>>>2;s=i;i=_;n[e+o>>2]=y}for(o=e+64|0;(o|0)<(e+80|0);o=o+4|0){y=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;_=((i<<5|i>>>27)+(s&u|~s&h)|0)+((y+d|0)+1518500249|0)|0;d=h;h=u;u=s<<30|s>>>2;s=i;i=_;n[o>>2]=y}for(o=e+80|0;(o|0)<(e+160|0);o=o+4|0){y=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;_=((i<<5|i>>>27)+(s^u^h)|0)+((y+d|0)+1859775393|0)|0;d=h;h=u;u=s<<30|s>>>2;s=i;i=_;n[o>>2]=y}for(o=e+160|0;(o|0)<(e+240|0);o=o+4|0){y=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;_=((i<<5|i>>>27)+(s&u|s&h|u&h)|0)+((y+d|0)-1894007588|0)|0;d=h;h=u;u=s<<30|s>>>2;s=i;i=_;n[o>>2]=y}for(o=e+240|0;(o|0)<(e+320|0);o=o+4|0){y=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;_=((i<<5|i>>>27)+(s^u^h)|0)+((y+d|0)-899497514|0)|0;d=h;h=u;u=s<<30|s>>>2;s=i;i=_;n[o>>2]=y}i=i+a|0;s=s+f|0;u=u+c|0;h=h+p|0;d=d+l|0}n[t+320>>2]=i;n[t+324>>2]=s;n[t+328>>2]=u;n[t+332>>2]=h;n[t+336>>2]=d}return{hash:o}}},function(e,t){var r=this,n=void 0;"undefined"!=typeof self&&void 0!==self.FileReaderSync&&(n=new self.FileReaderSync);var o=function(e,t,r,n,o,i){var a=void 0,s=i%4,f=(o+s)%4,u=o-f;switch(s){case 0:t[i]=e[n+3];case 1:t[i+1-(s<<1)|0]=e[n+2];case 2:t[i+2-(s<<1)|0]=e[n+1];case 3:t[i+3-(s<<1)|0]=e[n]}if(!(o<f+(4-s))){for(a=4-s;a<u;a=a+4|0)r[i+a>>2|0]=e[n+a]<<24|e[n+a+1]<<16|e[n+a+2]<<8|e[n+a+3];switch(f){case 3:t[i+u+1|0]=e[n+u+2];case 2:t[i+u+2|0]=e[n+u+1];case 1:t[i+u+3|0]=e[n+u]}}};e.exports=function(e,t,i,a,s,f){if("string"==typeof e)return function(e,t,r,n,o,i){var a=void 0,s=i%4,f=(o+s)%4,u=o-f;switch(s){case 0:t[i]=e.charCodeAt(n+3);case 1:t[i+1-(s<<1)|0]=e.charCodeAt(n+2);case 2:t[i+2-(s<<1)|0]=e.charCodeAt(n+1);case 3:t[i+3-(s<<1)|0]=e.charCodeAt(n)}if(!(o<f+(4-s))){for(a=4-s;a<u;a=a+4|0)r[i+a>>2]=e.charCodeAt(n+a)<<24|e.charCodeAt(n+a+1)<<16|e.charCodeAt(n+a+2)<<8|e.charCodeAt(n+a+3);switch(f){case 3:t[i+u+1|0]=e.charCodeAt(n+u+2);case 2:t[i+u+2|0]=e.charCodeAt(n+u+1);case 1:t[i+u+3|0]=e.charCodeAt(n+u)}}}(e,t,i,a,s,f);if(e instanceof Array)return o(e,t,i,a,s,f);if(r&&r.Buffer&&r.Buffer.isBuffer(e))return o(e,t,i,a,s,f);if(e instanceof ArrayBuffer)return o(new Uint8Array(e),t,i,a,s,f);if(e.buffer instanceof ArrayBuffer)return o(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t,i,a,s,f);if(e instanceof Blob)return function(e,t,r,o,i,a){var s=void 0,f=a%4,u=(i+f)%4,c=i-u,h=new Uint8Array(n.readAsArrayBuffer(e.slice(o,o+i)));switch(f){case 0:t[a]=h[3];case 1:t[a+1-(f<<1)|0]=h[2];case 2:t[a+2-(f<<1)|0]=h[1];case 3:t[a+3-(f<<1)|0]=h[0]}if(!(i<u+(4-f))){for(s=4-f;s<c;s=s+4|0)r[a+s>>2|0]=h[s]<<24|h[s+1]<<16|h[s+2]<<8|h[s+3];switch(u){case 3:t[a+c+1|0]=h[c+2];case 2:t[a+c+2|0]=h[c+1];case 1:t[a+c+3|0]=h[c]}}}(e,t,i,a,s,f);throw new Error("Unsupported data type.")}},function(e,t,r){var n=r(0),o=r(1).toHex,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._rusha=new n,this._rusha.resetState()}return e.prototype.update=function(e){return this._rusha.append(e),this},e.prototype.digest=function(e){var t=this._rusha.rawEnd().buffer;if(!e)return t;if("hex"===e)return o(t);throw new Error("unsupported digest encoding")},e}();e.exports=function(){return new i}}])});
},{}],"IFp5":[function(require,module,exports) {
var r,e,a,o=require("rusha");function t(){r=o.createWorker(),e=1,a={},r.onmessage=function(r){var e=r.data.id,o=a[e];delete a[e],null!=r.data.error?o(new Error("Rusha worker error: "+r.data.error)):o(null,r.data.hash)}}function n(o,n){r||t(),a[e]=n,r.postMessage({id:e,data:o}),e+=1}module.exports=n;
},{"rusha":"Ip3H"}],"U1Lh":[function(require,module,exports) {
var n=require("rusha"),t=require("./rusha-worker-sha1"),e=new n,r="undefined"!=typeof window?window:self,o=r.crypto||r.msCrypto||{},i=o.subtle||o.webkitSubtle;function u(n){return e.digest(n)}try{i.digest({name:"sha-1"},new Uint8Array).catch(function(){i=!1})}catch(f){i=!1}function a(n,e){i?("string"==typeof n&&(n=s(n)),i.digest({name:"sha-1"},n).then(function(n){e(c(new Uint8Array(n)))},function(){e(u(n))})):"undefined"!=typeof window?t(n,function(t,r){e(t?u(n):r)}):queueMicrotask(()=>e(u(n)))}function s(n){for(var t=n.length,e=new Uint8Array(t),r=0;r<t;r++)e[r]=n.charCodeAt(r);return e}function c(n){for(var t=n.length,e=[],r=0;r<t;r++){var o=n[r];e.push((o>>>4).toString(16)),e.push((15&o).toString(16))}return e.join("")}module.exports=a,module.exports.sync=u;
},{"rusha":"Ip3H","./rusha-worker-sha1":"IFp5"}],"lVa8":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var process = require("process");
var global = arguments[3];
var e=require("buffer").Buffer,n=require("process"),t=arguments[3];function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const o=require("bencode"),i=require("block-stream2"),a=require("piece-length"),u=require("path"),s=require("filestream/read"),c=require("fs"),f=require("is-file"),l=require("junk"),p=require("multistream"),m=require("once"),h=require("run-parallel"),d=require("simple-sha1"),y=require("readable-stream");function g(e){return e.reduce((e,n)=>Array.isArray(n)?e.concat(g(n)):e.concat(n),[])}const w=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"],["wss://tracker.fastcast.nz"]];function b(e,n,t){"function"==typeof n&&([n,t]=[t,n]),N(e,n=n?Object.assign({},n):{},(e,r,o)=>{if(e)return t(e);n.singleFileTorrent=o,q(r,n,t)})}function E(e,n,t){"function"==typeof n&&([n,t]=[t,n]),N(e,n=n?Object.assign({},n):{},t)}function N(t,r,o){if(S(t)&&(t=Array.from(t)),Array.isArray(t)||(t=[t]),0===t.length)throw new Error("invalid input type");t.forEach(e=>{if(null==e)throw new Error("invalid input type: ".concat(e))}),1!==(t=t.map(e=>B(e)&&"string"==typeof e.path&&"function"==typeof c.stat?e.path:e)).length||"string"==typeof t[0]||t[0].name||(t[0].name=r.name);let i=null;t.forEach((e,n)=>{if("string"==typeof e)return;let r=e.fullPath||e.name;r||(r="Unknown File ".concat(n+1),e.unknownName=!0),e.path=r.split("/"),e.path[0]||e.path.shift(),e.path.length<2?i=null:0===n&&t.length>1?i=e.path[0]:e.path[0]!==i&&(i=null)}),t=t.filter(e=>{if("string"==typeof e)return!0;const n=e.path[e.path.length-1];return A(n)&&l.not(n)}),i&&t.forEach(n=>{const t=(e.isBuffer(n)||R(n))&&!n.path;"string"==typeof n||t||n.path.shift()}),!r.name&&i&&(r.name=i),r.name||t.some(e=>"string"==typeof e?(r.name=u.basename(e),!0):e.unknownName?void 0:(r.name=e.path[e.path.length-1],!0)),r.name||(r.name="Unnamed Torrent ".concat(Date.now()));const a=t.reduce((e,n)=>e+Number("string"==typeof n),0);let s=1===t.length;if(1===t.length&&"string"==typeof t[0]){if("function"!=typeof c.stat)throw new Error("filesystem paths do not work in the browser");f(t[0],(e,n)=>{if(e)return o(e);s=n,p()})}else n.nextTick(()=>{p()});function p(){h(t.map(n=>t=>{const r={};if(B(n))r.getStream=x(n),r.length=n.size;else if(e.isBuffer(n))r.getStream=j(n),r.length=n.length;else{if(!R(n)){if("string"==typeof n){if("function"!=typeof c.stat)throw new Error("filesystem paths do not work in the browser");return void v(n,a>1||s,t)}throw new Error("invalid input type")}r.getStream=C(n,r),r.length=0}r.path=n.path,t(null,r)}),(e,n)=>{if(e)return o(e);n=g(n),o(null,n,s)})}}function v(e,n,t){T(e,k,(r,o)=>{if(r)return t(r);o=Array.isArray(o)?g(o):[o],e=u.normalize(e),n&&(e=e.slice(0,e.lastIndexOf(u.sep)+1)),e[e.length-1]!==u.sep&&(e+=u.sep),o.forEach(n=>{n.getStream=U(n.path),n.path=n.path.replace(e,"").split(u.sep)}),t(null,o)})}function k(e,n){n=m(n),c.stat(e,(t,r)=>{if(t)return n(t);const o={length:r.size,path:e};n(null,o)})}function T(e,n,t){c.stat(e,(r,o)=>{if(r)return t(r);o.isDirectory()?c.readdir(e,(r,o)=>{if(r)return t(r);h(o.filter(A).filter(l.not).map(t=>r=>{T(u.join(e,t),n,r)}),t)}):o.isFile()&&n(e,t)})}function A(e){return"."!==e[0]}function L(n,t,r){r=m(r);const o=[];let a=0;const u=n.map(e=>e.getStream);let s=0,c=0,f=!1;const l=new p(u),h=new i(t,{zeroPadding:!1});function y(e){a+=e.length;const n=c;d(e,e=>{o[n]=e,s-=1,E()}),s+=1,c+=1}function g(){f=!0,E()}function w(e){b(),r(e)}function b(){l.removeListener("error",w),h.removeListener("data",y),h.removeListener("end",g),h.removeListener("error",w)}function E(){f&&0===s&&(b(),r(null,e.from(o.join(""),"hex"),a))}l.on("error",w),l.pipe(h).on("data",y).on("end",g).on("error",w)}function q(e,n,r){let i=n.announceList;i||("string"==typeof n.announce?i=[[n.announce]]:Array.isArray(n.announce)&&(i=n.announce.map(e=>[e]))),i||(i=[]),t.WEBTORRENT_ANNOUNCE&&("string"==typeof t.WEBTORRENT_ANNOUNCE?i.push([[t.WEBTORRENT_ANNOUNCE]]):Array.isArray(t.WEBTORRENT_ANNOUNCE)&&(i=i.concat(t.WEBTORRENT_ANNOUNCE.map(e=>[e])))),void 0===n.announce&&void 0===n.announceList&&(i=i.concat(module.exports.announceList)),"string"==typeof n.urlList&&(n.urlList=[n.urlList]);const u={info:{name:n.name},"creation date":Math.ceil((Number(n.creationDate)||Date.now())/1e3),encoding:"UTF-8"};0!==i.length&&(u.announce=i[0][0],u["announce-list"]=i),void 0!==n.comment&&(u.comment=n.comment),void 0!==n.createdBy&&(u["created by"]=n.createdBy),void 0!==n.private&&(u.info.private=Number(n.private)),void 0!==n.info&&Object.assign(u.info,n.info),void 0!==n.sslCert&&(u.info["ssl-cert"]=n.sslCert),void 0!==n.urlList&&(u["url-list"]=n.urlList);const s=n.pieceLength||a(e.reduce(O,0));u.info["piece length"]=s,L(e,s,(t,i,a)=>{if(t)return r(t);u.info.pieces=i,e.forEach(e=>{delete e.getStream}),n.singleFileTorrent?u.info.length=a:u.info.files=e,r(null,o.encode(u))})}function O(e,n){return e+n.length}function B(e){return"undefined"!=typeof Blob&&e instanceof Blob}function S(e){return"undefined"!=typeof FileList&&e instanceof FileList}function R(e){return"object"===r(e)&&null!=e&&"function"==typeof e.pipe}function x(e){return()=>new s(e)}function j(e){return()=>{const n=new y.PassThrough;return n.end(e),n}}function U(e){return()=>c.createReadStream(e)}function C(e,n){return()=>{const t=new y.Transform;return t._transform=function(e,t,r){n.length+=e.length,this.push(e),r()},e.pipe(t),t}}module.exports=b,module.exports.parseInput=E,module.exports.announceList=w;
},{"bencode":"XPbW","block-stream2":"uClA","piece-length":"CGN1","path":"sNrv","filestream/read":"DM2V","fs":"sC8V","is-file":"JWxf","junk":"Y1W6","multistream":"qJ1R","once":"Z8tK","run-parallel":"uzVO","simple-sha1":"U1Lh","readable-stream":"YvpY","buffer":"aMB2","process":"g5IB"}],"LVkZ":[function(require,module,exports) {
var s=1e3,e=60*s,r=60*e,a=24*r,n=7*a,c=365.25*a;function t(t){if(!((t=String(t)).length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(u){var i=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*c;case"weeks":case"week":case"w":return i*n;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*e;case"seconds":case"second":case"secs":case"sec":case"s":return i*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function u(n){var c=Math.abs(n);return c>=a?Math.round(n/a)+"d":c>=r?Math.round(n/r)+"h":c>=e?Math.round(n/e)+"m":c>=s?Math.round(n/s)+"s":n+"ms"}function i(n){var c=Math.abs(n);return c>=a?o(n,c,a,"day"):c>=r?o(n,c,r,"hour"):c>=e?o(n,c,e,"minute"):c>=s?o(n,c,s,"second"):n+" ms"}function o(s,e,r,a){var n=e>=1.5*r;return Math.round(s/r)+" "+a+(n?"s":"")}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return t(s);if("number"===r&&isFinite(s))return e.long?i(s):u(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};
},{}],"MTTc":[function(require,module,exports) {
function e(e){function n(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]}function t(e){let o;function i(...e){if(!i.enabled)return;const n=i,s=Number(new Date),r=s-(o||s);n.diff=r,n.prev=o,n.curr=s,o=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(s,r)=>{if("%%"===s)return s;a++;const o=t.formatters[r];if("function"==typeof o){const t=e[a];s=o.call(n,t),e.splice(a,1),a--}return s}),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=n(e),i.destroy=s,i.extend=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function s(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function r(e,n){const s=t(this.namespace+(void 0===n?":":n)+e);return s.log=this.log,s}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){const e=t.instances[n];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=require("ms"),Object.keys(e).forEach(n=>{t[n]=e[n]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=n,t.enable(t.load()),t}module.exports=e;
},{"ms":"LVkZ"}],"jD9Y":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function C(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;e.splice(1,0,o,"color: inherit");let C=0,t=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(C++,"%c"===e&&(t=C))}),e.splice(t,0,o)}function t(...e){return"object"==typeof console&&console.log&&console.log(...e)}function r(e){try{e?exports.storage.setItem("debug",e):exports.storage.removeItem("debug")}catch(o){}}function n(){let o;try{o=exports.storage.getItem("debug")}catch(C){}return!o&&void 0!==e&&"env"in e&&(o=void 0),o}function s(){try{return localStorage}catch(e){}}exports.log=t,exports.formatArgs=C,exports.save=r,exports.load=n,exports.useColors=o,exports.storage=s(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],module.exports=require("./common")(exports);const{formatters:F}=module.exports;F.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}};
},{"./common":"MTTc","process":"g5IB"}],"Uzmf":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;module.exports=function(r,n){if("undefined"==typeof Blob||!(r instanceof Blob))throw new Error("first argument must be a Blob");if("function"!=typeof n)throw new Error("second argument must be a function");var o=new FileReader;o.addEventListener("loadend",function r(t){o.removeEventListener("loadend",r,!1),t.error?n(t.error):n(null,e.from(o.result))},!1),o.readAsArrayBuffer(r)};
},{"buffer":"aMB2"}],"MtmI":[function(require,module,exports) {
var global = arguments[3];
var r,e=arguments[3];exports.fetch=s(e.fetch)&&s(e.ReadableStream),exports.writableStream=s(e.WritableStream),exports.abortController=s(e.AbortController),exports.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),exports.blobConstructor=!0}catch(f){}function t(){if(void 0!==r)return r;if(e.XMLHttpRequest){r=new e.XMLHttpRequest;try{r.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(f){r=null}}else r=null;return r}function o(r){var e=t();if(!e)return!1;try{return e.responseType=r,e.responseType===r}catch(f){}return!1}var a=void 0!==e.ArrayBuffer,n=a&&s(e.ArrayBuffer.prototype.slice);function s(r){return"function"==typeof r}exports.arraybuffer=exports.fetch||a&&o("arraybuffer"),exports.msstream=!exports.fetch&&n&&o("ms-stream"),exports.mozchunkedarraybuffer=!exports.fetch&&a&&o("moz-chunked-arraybuffer"),exports.overrideMimeType=exports.fetch||!!t()&&s(t().overrideMimeType),exports.vbArray=s(e.VBArray),r=null;
},{}],"iFTO":[function(require,module,exports) {
var process = require("process");
var n=require("process");function e(e,r,t,c){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,l,u=arguments.length;switch(u){case 0:case 1:return n.nextTick(e);case 2:return n.nextTick(function(){e.call(null,r)});case 3:return n.nextTick(function(){e.call(null,r,t)});case 4:return n.nextTick(function(){e.call(null,r,t,c)});default:for(i=new Array(u-1),l=0;l<i.length;)i[l++]=arguments[l];return n.nextTick(function(){e.apply(null,i)})}}void 0===n||!n.version||0===n.version.indexOf("v0.")||0===n.version.indexOf("v1.")&&0!==n.version.indexOf("v1.8.")?module.exports={nextTick:e}:module.exports=n;
},{"process":"g5IB"}],"cQsd":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function n(r,e){for(var n in r)e[n]=r[n]}function o(r,n,o){return e(r,n,o)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(n(r,exports),exports.Buffer=o),n(e,o),o.from=function(r,n,o){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,n,o)},o.alloc=function(r,n,o){if("number"!=typeof r)throw new TypeError("Argument must be a number");var f=e(r);return void 0!==n?"string"==typeof o?f.fill(n,o):f.fill(n):f.fill(0),f},o.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"aMB2"}],"kj8s":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;function t(r){return Array.isArray?Array.isArray(r):"[object Array]"===a(r)}function e(r){return"boolean"==typeof r}function n(r){return null===r}function o(r){return null==r}function i(r){return"number"==typeof r}function u(r){return"string"==typeof r}function s(r){return"symbol"==typeof r}function f(r){return void 0===r}function p(r){return"[object RegExp]"===a(r)}function c(r){return"object"==typeof r&&null!==r}function l(r){return"[object Date]"===a(r)}function y(r){return"[object Error]"===a(r)||r instanceof Error}function x(r){return"function"==typeof r}function b(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r}function a(r){return Object.prototype.toString.call(r)}exports.isArray=t,exports.isBoolean=e,exports.isNull=n,exports.isNullOrUndefined=o,exports.isNumber=i,exports.isString=u,exports.isSymbol=s,exports.isUndefined=f,exports.isRegExp=p,exports.isObject=c,exports.isDate=l,exports.isError=y,exports.isFunction=x,exports.isPrimitive=b,exports.isBuffer=r.isBuffer;
},{"buffer":"aMB2"}],"yMu6":[function(require,module,exports) {

"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var n=require("safe-buffer").Buffer,e=require("util");function i(t,n,e){t.copy(n,e)}module.exports=function(){function e(){t(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(t){var n={data:t,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(0===this.length)return"";for(var n=this.head,e=""+n.data;n=n.next;)e+=t+n.data;return e},e.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e=n.allocUnsafe(t>>>0),h=this.head,a=0;h;)i(h.data,e,a),a+=h.data.length,h=h.next;return e},e}(),e&&e.inspect&&e.inspect.custom&&(module.exports.prototype[e.inspect.custom]=function(){var t=e.inspect({length:this.length});return this.constructor.name+" "+t});
},{"safe-buffer":"cQsd","util":"sC8V"}],"c49S":[function(require,module,exports) {
"use strict";var t=require("process-nextick-args");function e(e,a){var r=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?(a?a(e):!e||this._writableState&&this._writableState.errorEmitted||t.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!a&&e?(t.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):a&&a(e)}),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(t,e){t.emit("error",e)}module.exports={destroy:e,undestroy:a};
},{"process-nextick-args":"iFTO"}],"iSp6":[function(require,module,exports) {
var process = require("process");

var global = arguments[3];
var e=require("process"),t=arguments[3],n=require("process-nextick-args");function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){W(t,e)}}module.exports=g;var o,s=n.nextTick;g.WritableState=y;var f=Object.create(require("core-util-is"));f.inherits=require("inherits");var u={deprecate:require("util-deprecate")},a=require("./internal/streams/stream"),c=require("safe-buffer").Buffer,l=t.Uint8Array||function(){};function d(e){return c.from(e)}function h(e){return c.isBuffer(e)||e instanceof l}var b,p=require("./internal/streams/destroy");function w(){}function y(e,t){o=o||require("./_stream_duplex"),e=e||{};var n=t instanceof o;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,s=e.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(s||0===s)?s:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){S(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function g(e){if(o=o||require("./_stream_duplex"),!(b.call(g,this)||this instanceof o))return new g(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function k(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}function v(e,t,r,i){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),n.nextTick(i,s),o=!1),o}function q(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n)),t}function _(e,t,n,r,i,o){if(!n){var s=q(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var f=t.objectMode?1:r.length;t.length+=f;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,f,r,i,o);return u}function m(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function R(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),T(e,t))}function x(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function S(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(x(n),t)R(e,n,r,t,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||B(e,n),r?s(M,e,n,o,i):M(e,n,o,i)}}function M(e,t,n,r){n||j(e,t),t.pendingcb--,r(),T(e,t)}function j(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function B(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var f=0,u=!0;n;)o[f]=n,n.isBuf||(u=!1),n=n.next,f+=1;o.allBuffers=u,m(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback;if(m(e,t,!1,t.objectMode?1:a.length,a,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function P(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function T(e,t){var n=E(t);return n&&(P(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function F(e,t,r){t.ending=!0,T(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function W(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}f.inherits(g,a),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!b.call(this,e)||this===g&&(e&&e._writableState instanceof y)}})):b=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&h(e);return o&&!c.isBuffer(e)&&(e=d(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=w),r.ended?k(this,n):(o||v(this,r,e,n))&&(r.pendingcb++,i=_(this,r,o,e,t,n)),i},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||B(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||F(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=p.destroy,g.prototype._undestroy=p.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)};
},{"process-nextick-args":"iFTO","core-util-is":"kj8s","inherits":"oxwV","util-deprecate":"hQaz","./internal/streams/stream":"o232","safe-buffer":"cQsd","./internal/streams/destroy":"c49S","./_stream_duplex":"cZO3","process":"g5IB"}],"cZO3":[function(require,module,exports) {
"use strict";var e=require("process-nextick-args"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=Object.create(require("core-util-is"));r.inherits=require("inherits");var i=require("./_stream_readable"),a=require("./_stream_writable");r.inherits(l,i);for(var o=t(a.prototype),s=0;s<o.length;s++){var n=o[s];l.prototype[n]||(l.prototype[n]=a.prototype[n])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||e.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(t,r){this.push(null),this.end(),e.nextTick(r,t)};
},{"process-nextick-args":"iFTO","core-util-is":"kj8s","inherits":"oxwV","./_stream_readable":"LfKB","./_stream_writable":"iSp6"}],"pKbq":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":"cQsd"}],"LfKB":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),n=require("process-nextick-args");module.exports=_;var r,i=require("isarray");_.ReadableState=w;var a=require("events").EventEmitter,d=function(e,t){return e.listeners(t).length},o=require("./internal/streams/stream"),s=require("safe-buffer").Buffer,u=e.Uint8Array||function(){};function l(e){return s.from(e)}function h(e){return s.isBuffer(e)||e instanceof u}var p=Object.create(require("core-util-is"));p.inherits=require("inherits");var f=require("util"),c=void 0;c=f&&f.debuglog?f.debuglog("stream"):function(){};var g,b=require("./internal/streams/BufferList"),m=require("./internal/streams/destroy");p.inherits(_,o);var v=["error","close","destroy","pause","resume"];function y(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function w(e,t){e=e||{};var n=t instanceof(r=r||require("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:d,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=require("string_decoder/").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function _(e){if(r=r||require("./_stream_duplex"),!(this instanceof _))return new _(e);this._readableState=new w(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function M(e,t,n,r,i){var a,d=e._readableState;null===t?(d.reading=!1,x(e,d)):(i||(a=k(d,t)),a?e.emit("error",a):d.objectMode||t&&t.length>0?("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=l(t)),r?d.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):S(e,d,t,!0):d.ended?e.emit("error",new Error("stream.push() after EOF")):(d.reading=!1,d.decoder&&!n?(t=d.decoder.write(t),d.objectMode||0!==t.length?S(e,d,t,!1):C(e,d)):S(e,d,t,!1))):r||(d.reading=!1));return j(d)}function S(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&q(e)),C(e,t)}function k(e,t){var n;return h(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function j(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),M(this,e,t,!1,n)},_.prototype.unshift=function(e){return M(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return g||(g=require("string_decoder/").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var R=8388608;function E(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function L(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=E(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,q(e)}}function q(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(W,e):W(e))}function W(e){c("emit readable"),e.emit("readable"),B(e)}function C(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(D,e,t))}function D(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(c("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function O(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&d(e,"data")&&(t.flowing=!0,B(e))}}function T(e){c("readable nexttick read 0"),e.read(0)}function U(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(P,e,t))}function P(e,t){t.reading||(c("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function H(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=I(e,t.buffer,t.decoder),n);var n}function I(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?A(e,t):F(e,t),r}function A(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,d=e>a.length?a.length:e;if(d===a.length?i+=a:i+=a.slice(0,e),0===(e-=d)){d===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(d));break}++r}return t.length-=r,i}function F(e,t){var n=s.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,d=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,d),0===(e-=d)){d===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(d));break}++i}return t.length-=i,n}function z(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(G,t,e))}function G(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function J(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):q(this),null;if(0===(e=L(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=L(n,t))),null===(r=e>0?H(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,r){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,c("pipe count=%d opts=%j",a.pipesCount,r);var o=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr?u:v;function s(t,n){c("onunpipe"),t===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",b),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",g),e.removeListener("unpipe",s),i.removeListener("end",u),i.removeListener("end",v),i.removeListener("data",f),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}a.endEmitted?n.nextTick(o):i.once("end",o),e.on("unpipe",s);var l=O(i);e.on("drain",l);var h=!1;var p=!1;function f(t){c("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==J(a.pipes,e))&&!h&&(c("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,p=!0),i.pause())}function g(t){c("onerror",t),v(),e.removeListener("error",g),0===d(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",m),v()}function m(){c("onfinish"),e.removeListener("close",b),v()}function v(){c("unpipe"),i.unpipe(e)}return i.on("data",f),y(e,"error",g),e.once("close",b),e.once("finish",m),e.emit("pipe",i),a.flowing||(c("pipe resume"),i.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var d=J(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},_.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&q(this):n.nextTick(T,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!0,U(this,e)),this},_.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<v.length;a++)e.on(v[a],this.emit.bind(this,v[a]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=H;
},{"process-nextick-args":"iFTO","isarray":"aqZJ","events":"wIHY","./internal/streams/stream":"o232","safe-buffer":"cQsd","core-util-is":"kj8s","inherits":"oxwV","util":"sC8V","./internal/streams/BufferList":"yMu6","./internal/streams/destroy":"c49S","./_stream_duplex":"cZO3","string_decoder/":"pKbq","process":"g5IB"}],"zWyO":[function(require,module,exports) {
"use strict";module.exports=n;var t=require("./_stream_duplex"),r=Object.create(require("core-util-is"));function e(t,r){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=r&&this.push(r),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function n(r){if(!(this instanceof n))return new n(r);t.call(this,r),this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",i)}function i(){var t=this;"function"==typeof this._flush?this._flush(function(r,e){a(t,r,e)}):a(this,null,null)}function a(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=require("inherits"),r.inherits(n,t),n.prototype.push=function(r,e){return this._transformState.needTransform=!1,t.prototype.push.call(this,r,e)},n.prototype._transform=function(t,r,e){throw new Error("_transform() is not implemented")},n.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(t){var r=this._transformState;null!==r.writechunk&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0},n.prototype._destroy=function(r,e){var n=this;t.prototype._destroy.call(this,r,function(t){e(t),n.emit("close")})};
},{"./_stream_duplex":"cZO3","core-util-is":"kj8s","inherits":"oxwV"}],"Yw9e":[function(require,module,exports) {
"use strict";module.exports=t;var r=require("./_stream_transform"),e=Object.create(require("core-util-is"));function t(e){if(!(this instanceof t))return new t(e);r.call(this,e)}e.inherits=require("inherits"),e.inherits(t,r),t.prototype._transform=function(r,e,t){t(null,r)};
},{"./_stream_transform":"zWyO","core-util-is":"kj8s","inherits":"oxwV"}],"k5Yn":[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");
},{"./lib/_stream_readable.js":"LfKB","./lib/_stream_writable.js":"iSp6","./lib/_stream_duplex.js":"cZO3","./lib/_stream_transform.js":"zWyO","./lib/_stream_passthrough.js":"Yw9e"}],"K8Qe":[function(require,module,exports) {
var process = require("process");
var Buffer = require("buffer").Buffer;
var global = arguments[3];
var e=require("process"),r=require("buffer").Buffer,t=arguments[3],s=require("./capability"),a=require("inherits"),o=require("readable-stream"),n=exports.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=exports.IncomingMessage=function(a,n,u,i){var c=this;if(o.Readable.call(c),c._mode=u,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){e.nextTick(function(){c.emit("close")})}),"fetch"===u){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach(function(e,r){c.headers[r.toLowerCase()]=e,c.rawHeaders.push(r,e)}),s.writableStream){var d=new WritableStream({write:function(e){return new Promise(function(t,s){c._destroyed?s():c.push(new r(e))?t():c._resumeFetch=t})},close:function(){t.clearTimeout(i),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{return void n.body.pipeTo(d).catch(function(e){t.clearTimeout(i),c._destroyed||c.emit("error",e)})}catch(p){}}var h=n.body.getReader();!function e(){h.read().then(function(s){if(!c._destroyed){if(s.done)return t.clearTimeout(i),void c.push(null);c.push(new r(s.value)),e()}}).catch(function(e){t.clearTimeout(i),c._destroyed||c.emit("error",e)})}()}else{if(c._xhr=a,c._pos=0,c.url=a.responseURL,c.statusCode=a.status,c.statusMessage=a.statusText,a.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var r=e.match(/^([^:]+):\s*(.*)/);if(r){var t=r[1].toLowerCase();"set-cookie"===t?(void 0===c.headers[t]&&(c.headers[t]=[]),c.headers[t].push(r[2])):void 0!==c.headers[t]?c.headers[t]+=", "+r[2]:c.headers[t]=r[2],c.rawHeaders.push(r[1],r[2])}}),c._charset="x-user-defined",!s.overrideMimeType){var f=c.rawHeaders["mime-type"];if(f){var l=f.match(/;\s*charset=([^;])(;|$)/);l&&(c._charset=l[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(u,o.Readable),u.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},u.prototype._onXHRProgress=function(){var e=this,s=e._xhr,a=null;switch(e._mode){case"text:vbarray":if(s.readyState!==n.DONE)break;try{a=new t.VBArray(s.responseBody).toArray()}catch(d){}if(null!==a){e.push(new r(a));break}case"text":try{a=s.responseText}catch(d){e._mode="text:vbarray";break}if(a.length>e._pos){var o=a.substr(e._pos);if("x-user-defined"===e._charset){for(var u=new r(o.length),i=0;i<o.length;i++)u[i]=255&o.charCodeAt(i);e.push(u)}else e.push(o,e._charset);e._pos=a.length}break;case"arraybuffer":if(s.readyState!==n.DONE||!s.response)break;a=s.response,e.push(new r(new Uint8Array(a)));break;case"moz-chunked-arraybuffer":if(a=s.response,s.readyState!==n.LOADING||!a)break;e.push(new r(new Uint8Array(a)));break;case"ms-stream":if(a=s.response,s.readyState!==n.LOADING)break;var c=new t.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new r(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(a)}e._xhr.readyState===n.DONE&&"ms-stream"!==e._mode&&e.push(null)};
},{"./capability":"MtmI","inherits":"oxwV","readable-stream":"k5Yn","process":"g5IB","buffer":"aMB2"}],"xHkA":[function(require,module,exports) {

var e=require("buffer").Buffer;module.exports=function(f){if(f instanceof Uint8Array){if(0===f.byteOffset&&f.byteLength===f.buffer.byteLength)return f.buffer;if("function"==typeof f.buffer.slice)return f.buffer.slice(f.byteOffset,f.byteOffset+f.byteLength)}if(e.isBuffer(f)){for(var r=new Uint8Array(f.length),t=f.length,n=0;n<t;n++)r[n]=f[n];return r.buffer}throw new Error("Argument must be a Buffer")};
},{"buffer":"aMB2"}],"p71p":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var global = arguments[3];
var process = require("process");
var e=require("buffer").Buffer,t=arguments[3],r=require("process"),o=require("./capability"),n=require("inherits"),i=require("./response"),s=require("readable-stream"),a=require("to-arraybuffer"),c=i.IncomingMessage,u=i.readyStates;function d(e,t){return o.fetch&&t?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&e?"arraybuffer":o.vbArray&&e?"text:vbarray":"text"}var f=module.exports=function(t){var r,n=this;s.Writable.call(n),n._opts=t,n._body=[],n._headers={},t.auth&&n.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){n.setHeader(e,t.headers[e])});var i=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!o.abortController)i=!1,r=!0;else if("prefer-streaming"===t.mode)r=!1;else if("allow-wrong-content-type"===t.mode)r=!o.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=d(r,i),n._fetchTimer=null,n.on("finish",function(){n._onFinish()})};function h(e){try{var t=e.status;return null!==t&&0!==t}catch(r){return!1}}n(f,s.Writable),f.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===p.indexOf(r)&&(this._headers[r]={name:e,value:t})},f.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},f.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},f.prototype._onFinish=function(){var n=this;if(!n._destroyed){var i=n._opts,s=n._headers,c=null;"GET"!==i.method&&"HEAD"!==i.method&&(c=o.arraybuffer?a(e.concat(n._body)):o.blobConstructor?new t.Blob(n._body.map(function(e){return a(e)}),{type:(s["content-type"]||{}).value||""}):e.concat(n._body).toString());var d=[];if(Object.keys(s).forEach(function(e){var t=s[e].name,r=s[e].value;Array.isArray(r)?r.forEach(function(e){d.push([t,e])}):d.push([t,r])}),"fetch"===n._mode){var f=null;if(o.abortController){var h=new AbortController;f=h.signal,n._fetchAbortController=h,"requestTimeout"in i&&0!==i.requestTimeout&&(n._fetchTimer=t.setTimeout(function(){n.emit("requestTimeout"),n._fetchAbortController&&n._fetchAbortController.abort()},i.requestTimeout))}t.fetch(n._opts.url,{method:n._opts.method,headers:d,body:c||void 0,mode:"cors",credentials:i.withCredentials?"include":"same-origin",signal:f}).then(function(e){n._fetchResponse=e,n._connect()},function(e){t.clearTimeout(n._fetchTimer),n._destroyed||n.emit("error",e)})}else{var p=n._xhr=new t.XMLHttpRequest;try{p.open(n._opts.method,n._opts.url,!0)}catch(l){return void r.nextTick(function(){n.emit("error",l)})}"responseType"in p&&(p.responseType=n._mode.split(":")[0]),"withCredentials"in p&&(p.withCredentials=!!i.withCredentials),"text"===n._mode&&"overrideMimeType"in p&&p.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in i&&(p.timeout=i.requestTimeout,p.ontimeout=function(){n.emit("requestTimeout")}),d.forEach(function(e){p.setRequestHeader(e[0],e[1])}),n._response=null,p.onreadystatechange=function(){switch(p.readyState){case u.LOADING:case u.DONE:n._onXHRProgress()}},"moz-chunked-arraybuffer"===n._mode&&(p.onprogress=function(){n._onXHRProgress()}),p.onerror=function(){n._destroyed||n.emit("error",new Error("XHR error"))};try{p.send(c)}catch(l){return void r.nextTick(function(){n.emit("error",l)})}}}},f.prototype._onXHRProgress=function(){h(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},f.prototype._connect=function(){var e=this;e._destroyed||(e._response=new c(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},f.prototype._write=function(e,t,r){this._body.push(e),r()},f.prototype.abort=f.prototype.destroy=function(){this._destroyed=!0,t.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},f.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),s.Writable.prototype.end.call(this,e,t,r)},f.prototype.flushHeaders=function(){},f.prototype.setTimeout=function(){},f.prototype.setNoDelay=function(){},f.prototype.setSocketKeepAlive=function(){};var p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"];
},{"./capability":"MtmI","inherits":"oxwV","./response":"K8Qe","readable-stream":"k5Yn","to-arraybuffer":"xHkA","buffer":"aMB2","process":"g5IB"}],"YxsI":[function(require,module,exports) {
module.exports=o;var r=Object.prototype.hasOwnProperty;function o(){for(var o={},t=0;t<arguments.length;t++){var e=arguments[t];for(var a in e)r.call(e,a)&&(o[a]=e[a])}return o}
},{}],"XmSl":[function(require,module,exports) {
module.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};
},{}],"GVK8":[function(require,module,exports) {
var global = arguments[3];
var define;
var o,e=arguments[3];!function(n){var r="object"==typeof exports&&exports&&!exports.nodeType&&exports,t="object"==typeof module&&module&&!module.nodeType&&module,u="object"==typeof e&&e;u.global!==u&&u.window!==u&&u.self!==u||(n=u);var i,f,c=2147483647,l=36,s=1,p=26,a=38,d=700,h=72,v=128,g="-",w=/^xn--/,x=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-s,b=Math.floor,j=String.fromCharCode;function A(o){throw new RangeError(m[o])}function I(o,e){for(var n=o.length,r=[];n--;)r[n]=e(o[n]);return r}function E(o,e){var n=o.split("@"),r="";return n.length>1&&(r=n[0]+"@",o=n[1]),r+I((o=o.replace(y,".")).split("."),e).join(".")}function F(o){for(var e,n,r=[],t=0,u=o.length;t<u;)(e=o.charCodeAt(t++))>=55296&&e<=56319&&t<u?56320==(64512&(n=o.charCodeAt(t++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),t--):r.push(e);return r}function O(o){return I(o,function(o){var e="";return o>65535&&(e+=j((o-=65536)>>>10&1023|55296),o=56320|1023&o),e+=j(o)}).join("")}function S(o,e){return o+22+75*(o<26)-((0!=e)<<5)}function T(o,e,n){var r=0;for(o=n?b(o/d):o>>1,o+=b(o/e);o>C*p>>1;r+=l)o=b(o/C);return b(r+(C+1)*o/(o+a))}function L(o){var e,n,r,t,u,i,f,a,d,w,x,y=[],m=o.length,C=0,j=v,I=h;for((n=o.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)o.charCodeAt(r)>=128&&A("not-basic"),y.push(o.charCodeAt(r));for(t=n>0?n+1:0;t<m;){for(u=C,i=1,f=l;t>=m&&A("invalid-input"),((a=(x=o.charCodeAt(t++))-48<10?x-22:x-65<26?x-65:x-97<26?x-97:l)>=l||a>b((c-C)/i))&&A("overflow"),C+=a*i,!(a<(d=f<=I?s:f>=I+p?p:f-I));f+=l)i>b(c/(w=l-d))&&A("overflow"),i*=w;I=T(C-u,e=y.length+1,0==u),b(C/e)>c-j&&A("overflow"),j+=b(C/e),C%=e,y.splice(C++,0,j)}return O(y)}function M(o){var e,n,r,t,u,i,f,a,d,w,x,y,m,C,I,E=[];for(y=(o=F(o)).length,e=v,n=0,u=h,i=0;i<y;++i)(x=o[i])<128&&E.push(j(x));for(r=t=E.length,t&&E.push(g);r<y;){for(f=c,i=0;i<y;++i)(x=o[i])>=e&&x<f&&(f=x);for(f-e>b((c-n)/(m=r+1))&&A("overflow"),n+=(f-e)*m,e=f,i=0;i<y;++i)if((x=o[i])<e&&++n>c&&A("overflow"),x==e){for(a=n,d=l;!(a<(w=d<=u?s:d>=u+p?p:d-u));d+=l)I=a-w,C=l-w,E.push(j(S(w+I%C,0))),a=b(I/C);E.push(j(S(a,0))),u=T(n,m,r==t),n=0,++r}++n,++e}return E.join("")}if(i={version:"1.4.1",ucs2:{decode:F,encode:O},decode:L,encode:M,toASCII:function(o){return E(o,function(o){return x.test(o)?"xn--"+M(o):o})},toUnicode:function(o){return E(o,function(o){return w.test(o)?L(o.slice(4).toLowerCase()):o})}},"function"==typeof o&&"object"==typeof o.amd&&o.amd)o("punycode",function(){return i});else if(r&&t)if(module.exports==r)t.exports=i;else for(f in i)i.hasOwnProperty(f)&&(r[f]=i[f]);else n.punycode=i}(this);
},{}],"oHuK":[function(require,module,exports) {
"use strict";module.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}};
},{}],"ObZ4":[function(require,module,exports) {
"use strict";function r(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(t,n,o,a){n=n||"&",o=o||"=";var s={};if("string"!=typeof t||0===t.length)return s;var p=/\+/g;t=t.split(n);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var i=0;i<c;++i){var y,l,f,v,b=t[i].replace(p,"%20"),d=b.indexOf(o);d>=0?(y=b.substr(0,d),l=b.substr(d+1)):(y=b,l=""),f=decodeURIComponent(y),v=decodeURIComponent(l),r(s,f)?e(s[f])?s[f].push(v):s[f]=[s[f],v]:s[f]=v}return s};var e=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};
},{}],"XK8a":[function(require,module,exports) {
"use strict";var n=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}};module.exports=function(o,u,c,a){return u=u||"&",c=c||"=",null===o&&(o=void 0),"object"==typeof o?r(t(o),function(t){var a=encodeURIComponent(n(t))+c;return e(o[t])?r(o[t],function(e){return a+encodeURIComponent(n(e))}).join(u):a+encodeURIComponent(n(o[t]))}).join(u):a?encodeURIComponent(n(a))+c+encodeURIComponent(n(o)):""};var e=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};function r(n,e){if(n.map)return n.map(e);for(var r=[],t=0;t<n.length;t++)r.push(e(n[t],t));return r}var t=Object.keys||function(n){var e=[];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.push(r);return e};
},{}],"SF0R":[function(require,module,exports) {
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");
},{"./decode":"ObZ4","./encode":"XK8a"}],"j37I":[function(require,module,exports) {
"use strict";var t=require("punycode"),s=require("./util");function h(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=b,exports.resolve=O,exports.resolveObject=d,exports.format=q,exports.Url=h;var e=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r","\n","\t"],n=["{","}","|","\\","^","`"].concat(o),i=["'"].concat(n),l=["%","/","?",";","#"].concat(i),p=["/","?","#"],c=255,u=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=require("querystring");function b(t,e,a){if(t&&s.isObject(t)&&t instanceof h)return t;var r=new h;return r.parse(t,e,a),r}function q(t){return s.isString(t)&&(t=b(t)),t instanceof h?t.format():h.prototype.format.call(t)}function O(t,s){return b(t,!1,!0).resolve(s)}function d(t,s){return t?b(t,!1,!0).resolveObject(s):s}h.prototype.parse=function(h,a,o){if(!s.isString(h))throw new TypeError("Parameter 'url' must be a string, not "+typeof h);var n=h.indexOf("?"),b=-1!==n&&n<h.indexOf("#")?"?":"#",q=h.split(b);q[0]=q[0].replace(/\\/g,"/");var O=h=q.join(b);if(O=O.trim(),!o&&1===h.split("#").length){var d=r.exec(O);if(d)return this.path=O,this.href=O,this.pathname=d[1],d[2]?(this.search=d[2],this.query=a?y.parse(this.search.substr(1)):this.search.substr(1)):a&&(this.search="",this.query={}),this}var j=e.exec(O);if(j){var x=(j=j[0]).toLowerCase();this.protocol=x,O=O.substr(j.length)}if(o||j||O.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===O.substr(0,2);!A||j&&v[j]||(O=O.substr(2),this.slashes=!0)}if(!v[j]&&(A||j&&!g[j])){for(var C,I,w=-1,U=0;U<p.length;U++){-1!==(k=O.indexOf(p[U]))&&(-1===w||k<w)&&(w=k)}-1!==(I=-1===w?O.lastIndexOf("@"):O.lastIndexOf("@",w))&&(C=O.slice(0,I),O=O.slice(I+1),this.auth=decodeURIComponent(C)),w=-1;for(U=0;U<l.length;U++){var k;-1!==(k=O.indexOf(l[U]))&&(-1===w||k<w)&&(w=k)}-1===w&&(w=O.length),this.host=O.slice(0,w),O=O.slice(w),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var R=this.hostname.split(/\./),S=(U=0,R.length);U<S;U++){var $=R[U];if($&&!$.match(u)){for(var z="",H=0,L=$.length;H<L;H++)$.charCodeAt(H)>127?z+="x":z+=$[H];if(!z.match(u)){var Z=R.slice(0,U),_=R.slice(U+1),E=$.match(f);E&&(Z.push(E[1]),_.unshift(E[2])),_.length&&(O="/"+_.join(".")+O),this.hostname=Z.join(".");break}}}this.hostname.length>c?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=t.toASCII(this.hostname));var P=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+P,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==O[0]&&(O="/"+O))}if(!m[x])for(U=0,S=i.length;U<S;U++){var B=i[U];if(-1!==O.indexOf(B)){var D=encodeURIComponent(B);D===B&&(D=escape(B)),O=O.split(B).join(D)}}var F=O.indexOf("#");-1!==F&&(this.hash=O.substr(F),O=O.slice(0,F));var G=O.indexOf("?");if(-1!==G?(this.search=O.substr(G),this.query=O.substr(G+1),a&&(this.query=y.parse(this.query)),O=O.slice(0,G)):a&&(this.search="",this.query={}),O&&(this.pathname=O),g[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){P=this.pathname||"";var J=this.search||"";this.path=P+J}return this.href=this.format(),this},h.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var h=this.protocol||"",e=this.pathname||"",a=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var n=this.search||o&&"?"+o||"";return h&&":"!==h.substr(-1)&&(h+=":"),this.slashes||(!h||g[h])&&!1!==r?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),a&&"#"!==a.charAt(0)&&(a="#"+a),n&&"?"!==n.charAt(0)&&(n="?"+n),h+r+(e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(n=n.replace("#","%23"))+a},h.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},h.prototype.resolveObject=function(t){if(s.isString(t)){var e=new h;e.parse(t,!1,!0),t=e}for(var a=new h,r=Object.keys(this),o=0;o<r.length;o++){var n=r[o];a[n]=this[n]}if(a.hash=t.hash,""===t.href)return a.href=a.format(),a;if(t.slashes&&!t.protocol){for(var i=Object.keys(t),l=0;l<i.length;l++){var p=i[l];"protocol"!==p&&(a[p]=t[p])}return g[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a}if(t.protocol&&t.protocol!==a.protocol){if(!g[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var f=c[u];a[f]=t[f]}return a.href=a.format(),a}if(a.protocol=t.protocol,t.host||v[t.protocol])a.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),a.pathname=m.join("/")}if(a.search=t.search,a.query=t.query,a.host=t.host||"",a.auth=t.auth,a.hostname=t.hostname||t.host,a.port=t.port,a.pathname||a.search){var y=a.pathname||"",b=a.search||"";a.path=y+b}return a.slashes=a.slashes||t.slashes,a.href=a.format(),a}var q=a.pathname&&"/"===a.pathname.charAt(0),O=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=O||q||a.host&&t.pathname,j=d,x=a.pathname&&a.pathname.split("/")||[],A=(m=t.pathname&&t.pathname.split("/")||[],a.protocol&&!g[a.protocol]);if(A&&(a.hostname="",a.port=null,a.host&&(""===x[0]?x[0]=a.host:x.unshift(a.host)),a.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),d=d&&(""===m[0]||""===x[0])),O)a.host=t.host||""===t.host?t.host:a.host,a.hostname=t.hostname||""===t.hostname?t.hostname:a.hostname,a.search=t.search,a.query=t.query,x=m;else if(m.length)x||(x=[]),x.pop(),x=x.concat(m),a.search=t.search,a.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(A)a.hostname=a.host=x.shift(),(k=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=k.shift(),a.host=a.hostname=k.shift());return a.search=t.search,a.query=t.query,s.isNull(a.pathname)&&s.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a}if(!x.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var C=x.slice(-1)[0],I=(a.host||t.host||x.length>1)&&("."===C||".."===C)||""===C,w=0,U=x.length;U>=0;U--)"."===(C=x[U])?x.splice(U,1):".."===C?(x.splice(U,1),w++):w&&(x.splice(U,1),w--);if(!d&&!j)for(;w--;w)x.unshift("..");!d||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),I&&"/"!==x.join("/").substr(-1)&&x.push("");var k,N=""===x[0]||x[0]&&"/"===x[0].charAt(0);A&&(a.hostname=a.host=N?"":x.length?x.shift():"",(k=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=k.shift(),a.host=a.hostname=k.shift()));return(d=d||a.host&&x.length)&&!N&&x.unshift(""),x.length?a.pathname=x.join("/"):(a.pathname=null,a.path=null),s.isNull(a.pathname)&&s.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=t.auth||a.auth,a.slashes=a.slashes||t.slashes,a.href=a.format(),a},h.prototype.parseHost=function(){var t=this.host,s=a.exec(t);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};
},{"punycode":"GVK8","./util":"oHuK","querystring":"SF0R"}],"f2Kk":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t=require("./lib/request"),r=require("./lib/response"),n=require("xtend"),o=require("builtin-status-codes"),s=require("url"),u=exports;u.request=function(r,o){r="string"==typeof r?s.parse(r):n(r);var u=-1===e.location.protocol.search(/^https?:$/)?"http:":"",E=r.protocol||u,a=r.hostname||r.host,C=r.port,i=r.path||"/";a&&-1!==a.indexOf(":")&&(a="["+a+"]"),r.url=(a?E+"//"+a:"")+(C?":"+C:"")+i,r.method=(r.method||"GET").toUpperCase(),r.headers=r.headers||{};var T=new t(r);return o&&T.on("response",o),T},u.get=function(e,t){var r=u.request(e,t);return r.end(),r},u.ClientRequest=t,u.IncomingMessage=r.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=o,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"];
},{"./lib/request":"p71p","./lib/response":"K8Qe","xtend":"YxsI","builtin-status-codes":"XmSl","url":"j37I"}],"AHs6":[function(require,module,exports) {
var t=require("http"),r=require("url"),o=module.exports;for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e]);function p(t){if("string"==typeof t&&(t=r.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(r,o){return r=p(r),t.request.call(this,r,o)},o.get=function(r,o){return r=p(r),t.get.call(this,r,o)};
},{"http":"f2Kk","url":"j37I"}],"bgy6":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;module.exports=i;const t=require("simple-concat"),o=require("decompress-response"),r=require("http"),n=require("https"),s=require("once"),a=require("querystring"),d=require("url"),c=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;function i(t,p){if(t=Object.assign({maxRedirects:10},"string"==typeof t?{url:t}:t),p=s(p),t.url){const{hostname:e,port:o,protocol:r,auth:n,path:s}=d.parse(t.url);delete t.url,e||o||r||n?Object.assign(t,{hostname:e,port:o,protocol:r,auth:n,path:s}):t.path=s}const u={"accept-encoding":"gzip, deflate"};let h;t.headers&&Object.keys(t.headers).forEach(e=>u[e.toLowerCase()]=t.headers[e]),t.headers=u,t.body?h=t.json&&!c(t.body)?JSON.stringify(t.body):t.body:t.form&&(h="string"==typeof t.form?t.form:a.stringify(t.form),t.headers["content-type"]="application/x-www-form-urlencoded"),h&&(t.method||(t.method="POST"),c(h)||(t.headers["content-length"]=e.byteLength(h)),t.json&&!t.form&&(t.headers["content-type"]="application/json")),delete t.body,delete t.form,t.json&&(t.headers.accept="application/json"),t.method&&(t.method=t.method.toUpperCase());const l=("https:"===t.protocol?n:r).request(t,e=>{if(!1!==t.followRedirects&&e.statusCode>=300&&e.statusCode<400&&e.headers.location)return t.url=e.headers.location,delete t.headers.host,e.resume(),"POST"===t.method&&[301,302].includes(e.statusCode)&&(t.method="GET",delete t.headers["content-length"],delete t.headers["content-type"]),0==t.maxRedirects--?p(new Error("too many redirects")):i(t,p);const r="function"==typeof o&&"HEAD"!==t.method;p(null,r?o(e):e)});return l.on("timeout",()=>{l.abort(),p(new Error("Request timed out"))}),l.on("error",p),c(h)?h.on("error",p).pipe(l):l.end(h),l}i.concat=((e,o)=>i(e,(r,n)=>{if(r)return o(r);t(n,(t,r)=>{if(t)return o(t);if(e.json)try{r=JSON.parse(r.toString())}catch(t){return o(t,n,r)}o(null,n,r)})})),["get","post","put","patch","head","delete"].forEach(e=>{i[e]=((t,o)=>("string"==typeof t&&(t={url:t}),i(Object.assign({method:e.toUpperCase()},t),o)))});
},{"simple-concat":"Mrqk","decompress-response":"sC8V","http":"f2Kk","https":"AHs6","once":"Z8tK","querystring":"SF0R","url":"j37I","buffer":"aMB2"}],"og0H":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",n=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];function t(e){var r=Math.floor(e.length/5);return e.length%5==0?r:r+1}exports.encode=function(n){e.isBuffer(n)||(n=new e(n));for(var o=0,f=0,i=0,a=0,h=new e(8*t(n));o<n.length;){var l=n[o];i>3?(a=(a=l&255>>i)<<(i=(i+5)%8)|(o+1<n.length?n[o+1]:0)>>8-i,o++):(a=l>>8-(i+5)&31,0===(i=(i+5)%8)&&o++),h[f]=r.charCodeAt(a),f++}for(o=f;o<h.length;o++)h[o]=61;return h},exports.decode=function(r){var t,o=0,f=0,i=0;e.isBuffer(r)||(r=new e(r));for(var a=new e(Math.ceil(5*r.length/8)),h=0;h<r.length&&61!==r[h];h++){var l=r[h]-48;if(!(l<n.length))throw new Error("Invalid input - it is not base32 encoded string");f=n[l],o<=3?0===(o=(o+5)%8)?(t|=f,a[i]=t,i++,t=0):t|=255&f<<8-o:(t|=255&f>>>(o=(o+5)%8),a[i]=t,i++,t=255&f<<8-o)}return a.slice(0,i)};
},{"buffer":"aMB2"}],"MeTi":[function(require,module,exports) {
var e=require("./thirty-two");exports.encode=e.encode,exports.decode=e.decode;
},{"./thirty-two":"og0H"}],"DiK4":[function(require,module,exports) {
"use strict";function n(n,t){for(var r=1,e=n.length,o=n[0],i=n[0],u=1;u<e;++u)if(i=o,t(o=n[u],i)){if(u===r){r++;continue}n[r++]=o}return n.length=r,n}function t(n){for(var t=1,r=n.length,e=n[0],o=n[0],i=1;i<r;++i,o=e)if(o=e,(e=n[i])!==o){if(i===t){t++;continue}n[t++]=e}return n.length=t,n}function r(r,e,o){return 0===r.length?r:e?(o||r.sort(e),n(r,e)):(o||r.sort(),t(r))}module.exports=r;
},{}],"qMBU":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;module.exports=n,module.exports.decode=n,module.exports.encode=o;const t=require("thirty-two"),r=require("uniq");function n(n){const o={},s=n.split("magnet:?")[1];let i;if((s&&s.length>=0?s.split("&"):[]).forEach(e=>{const t=e.split("=");if(2!==t.length)return;const r=t[0];let n=t[1];if("dn"===r&&(n=decodeURIComponent(n).replace(/\+/g," ")),"tr"!==r&&"xs"!==r&&"as"!==r&&"ws"!==r||(n=decodeURIComponent(n)),"kt"===r&&(n=decodeURIComponent(n).split("+")),"ix"===r&&(n=Number(n)),o[r])if(Array.isArray(o[r]))o[r].push(n);else{const e=o[r];o[r]=[e,n]}else o[r]=n}),o.xt){(Array.isArray(o.xt)?o.xt:[o.xt]).forEach(r=>{if(i=r.match(/^urn:btih:(.{40})/))o.infoHash=i[1].toLowerCase();else if(i=r.match(/^urn:btih:(.{32})/)){const r=t.decode(i[1]);o.infoHash=e.from(r,"binary").toString("hex")}})}return o.infoHash&&(o.infoHashBuffer=e.from(o.infoHash,"hex")),o.dn&&(o.name=o.dn),o.kt&&(o.keywords=o.kt),"string"==typeof o.tr?o.announce=[o.tr]:Array.isArray(o.tr)?o.announce=o.tr:o.announce=[],o.urlList=[],("string"==typeof o.as||Array.isArray(o.as))&&(o.urlList=o.urlList.concat(o.as)),("string"==typeof o.ws||Array.isArray(o.ws))&&(o.urlList=o.urlList.concat(o.ws)),r(o.announce),r(o.urlList),o}function o(e){(e=Object.assign({},e)).infoHashBuffer&&(e.xt=`urn:btih:${e.infoHashBuffer.toString("hex")}`),e.infoHash&&(e.xt=`urn:btih:${e.infoHash}`),e.name&&(e.dn=e.name),e.keywords&&(e.kt=e.keywords),e.announce&&(e.tr=e.announce),e.urlList&&(e.ws=e.urlList,delete e.as);let t="magnet:?";return Object.keys(e).filter(e=>2===e.length).forEach((r,n)=>{(Array.isArray(e[r])?e[r]:[e[r]]).forEach((e,o)=>{!(n>0||o>0)||"kt"===r&&0!==o||(t+="&"),"dn"===r&&(e=encodeURIComponent(e).replace(/%20/g,"+")),"tr"!==r&&"xs"!==r&&"as"!==r&&"ws"!==r||(e=encodeURIComponent(e)),"kt"===r&&(e=encodeURIComponent(e)),t+="kt"===r&&o>0?`+${e}`:`${r}=${e}`})}),t}
},{"thirty-two":"MeTi","uniq":"DiK4","buffer":"aMB2"}],"MV2a":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var process = require("process");
var e=require("buffer").Buffer,n=require("process");const t=require("bencode"),r=require("blob-to-buffer"),i=require("fs"),o=require("simple-get"),f=require("magnet-uri"),u=require("path"),a=require("simple-sha1"),c=require("uniq");function s(n){if("string"==typeof n&&/^(stream-)?magnet:/.test(n))return f(n);if("string"==typeof n&&(/^[a-f0-9]{40}$/i.test(n)||/^[a-z2-7]{32}$/i.test(n)))return f(`magnet:?xt=urn:btih:${n}`);if(e.isBuffer(n)&&20===n.length)return f(`magnet:?xt=urn:btih:${n.toString("hex")}`);if(e.isBuffer(n))return h(n);if(n&&n.infoHash)return n.infoHash=n.infoHash.toLowerCase(),n.announce||(n.announce=[]),"string"==typeof n.announce&&(n.announce=[n.announce]),n.urlList||(n.urlList=[]),n;throw new Error("Invalid torrent identifier")}function l(e,t){let f;if("function"!=typeof t)throw new Error("second argument must be a Function");try{f=s(e)}catch(a){}function u(e){try{f=s(e)}catch(a){return t(a)}f&&f.infoHash?t(null,f):t(new Error("Invalid torrent identifier"))}f&&f.infoHash?n.nextTick(()=>{t(null,f)}):g(e)?r(e,(e,n)=>{if(e)return t(new Error(`Error converting Blob: ${e.message}`));u(n)}):"function"==typeof o&&/^https?:/.test(e)?o.concat({url:e,timeout:3e4,headers:{"user-agent":"WebTorrent (https://webtorrent.io)"}},(e,n,r)=>{if(e)return t(new Error(`Error downloading torrent: ${e.message}`));u(r)}):"function"==typeof i.readFile&&"string"==typeof e?i.readFile(e,(e,n)=>{if(e)return t(new Error("Invalid torrent identifier"));u(n)}):n.nextTick(()=>{t(new Error("Invalid torrent identifier"))})}function h(n){e.isBuffer(n)&&(n=t.decode(n)),y(n.info,"info"),y(n.info["name.utf-8"]||n.info.name,"info.name"),y(n.info["piece length"],"info['piece length']"),y(n.info.pieces,"info.pieces"),n.info.files?n.info.files.forEach(e=>{y("number"==typeof e.length,"info.files[0].length"),y(e["path.utf-8"]||e.path,"info.files[0].path")}):y("number"==typeof n.info.length,"info.length");const r={info:n.info,infoBuffer:t.encode(n.info),name:(n.info["name.utf-8"]||n.info.name).toString(),announce:[]};r.infoHash=a.sync(r.infoBuffer),r.infoHashBuffer=e.from(r.infoHash,"hex"),void 0!==n.info.private&&(r.private=!!n.info.private),n["creation date"]&&(r.created=new Date(1e3*n["creation date"])),n["created by"]&&(r.createdBy=n["created by"].toString()),e.isBuffer(n.comment)&&(r.comment=n.comment.toString()),Array.isArray(n["announce-list"])&&n["announce-list"].length>0?n["announce-list"].forEach(e=>{e.forEach(e=>{r.announce.push(e.toString())})}):n.announce&&r.announce.push(n.announce.toString()),e.isBuffer(n["url-list"])&&(n["url-list"]=n["url-list"].length>0?[n["url-list"]]:[]),r.urlList=(n["url-list"]||[]).map(e=>e.toString()),c(r.announce),c(r.urlList);const i=n.info.files||[n.info];r.files=i.map((e,n)=>{const t=[].concat(r.name,e["path.utf-8"]||e.path||[]).map(e=>e.toString());return{path:u.join.apply(null,[u.sep].concat(t)).slice(1),name:t[t.length-1],length:e.length,offset:i.slice(0,n).reduce(m,0)}}),r.length=i.reduce(m,0);const o=r.files[r.files.length-1];return r.pieceLength=n.info["piece length"],r.lastPieceLength=(o.offset+o.length)%r.pieceLength||r.pieceLength,r.pieces=d(n.info.pieces),r}function p(n){const r={info:n.info};return r["announce-list"]=(n.announce||[]).map(n=>(r.announce||(r.announce=n),[n=e.from(n,"utf8")])),r["url-list"]=n.urlList||[],void 0!==n.private&&(r.private=Number(n.private)),n.created&&(r["creation date"]=n.created.getTime()/1e3|0),n.createdBy&&(r["created by"]=n.createdBy),n.comment&&(r.comment=n.comment),t.encode(r)}function g(e){return"undefined"!=typeof Blob&&e instanceof Blob}function m(e,n){return e+n.length}function d(e){const n=[];for(let t=0;t<e.length;t+=20)n.push(e.slice(t,t+20).toString("hex"));return n}function y(e,n){if(!e)throw new Error(`Torrent is missing required field: ${n}`)}module.exports=s,module.exports.remote=l,module.exports.toMagnetURI=f.encode,module.exports.toTorrentFile=p,e.alloc(0);
},{"bencode":"XPbW","blob-to-buffer":"Uzmf","fs":"sC8V","simple-get":"bgy6","magnet-uri":"qMBU","path":"sNrv","simple-sha1":"U1Lh","uniq":"DiK4","buffer":"aMB2","process":"g5IB"}],"bJJC":[function(require,module,exports) {
module.exports=function(){if("undefined"==typeof window)return null;var n={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return n.RTCPeerConnection?n:null};
},{}],"pXr2":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process"),o=65536,n=4294967295;function t(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var s=require("safe-buffer").Buffer,u=e.crypto||e.msCrypto;function a(e,t){if(e>n)throw new RangeError("requested too many random bytes");var a=s.allocUnsafe(e);if(e>0)if(e>o)for(var f=0;f<e;f+=o)u.getRandomValues(a.slice(f,f+o));else u.getRandomValues(a);return"function"==typeof t?r.nextTick(function(){t(null,a)}):a}u&&u.getRandomValues?module.exports=a:module.exports=t;
},{"safe-buffer":"gIYa","process":"g5IB"}],"IVZi":[function(require,module,exports) {
let e;module.exports="function"==typeof queueMicrotask?queueMicrotask:t=>(e||(e=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));
},{}],"Sx5b":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,t=require("debug")("simple-peer"),i=require("get-browser-rtc"),s=require("randombytes"),n=require("readable-stream"),a=require("queue-microtask"),r=65536,h=5e3,o=5e3;function c(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function d(e,t){var i=new Error(e);return i.code=t,i}function l(e){console.warn(e)}class _ extends n.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||_.channelConfig,this.config=Object.assign({},_.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||h,this.destroyed=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:i(),!this._wrtc)throw"undefined"==typeof window?d("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT"):d("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void a(()=>this.destroy(d(t,"ERR_PC_CONSTRUCTOR")))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=(()=>{this._onIceStateChange()}),this._pc.onicegatheringstatechange=(()=>{this._onIceStateChange()}),this._pc.onsignalingstatechange=(()=>{this._onSignalingStateChange()}),this._pc.onicecandidate=(e=>{this._onIceCandidate(e)}),this.initiator?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=(e=>{this._setupData(e)}),this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=(e=>{this._onTrack(e)}),this.initiator&&this._needsNegotiation(),this._onFinishBound=(()=>{this._onFinish()}),this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw d("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.localDescription&&this._pc.localDescription.type&&this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(d(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(d("signal() called with invalid signal data","ERR_SIGNALING"))}_addIceCandidate(e){var t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")?l("Ignoring unsupported ICE candidate."):this.destroy(d(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,t){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(i){this.destroy(d(i,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:t}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}addTrack(e,t){this._debug("addTrack()");var i=this._senderMap.get(e)||new Map,s=i.get(t);if(s)throw s.removed?d("Track has been removed. You should enable/disable tracks that you want to re-add.","ERR_SENDER_REMOVED"):d("Track has already been added to that stream.","ERR_SENDER_ALREADY_ADDED");s=this._pc.addTrack(e,t),i.set(t,s),this._senderMap.set(e,i),this._needsNegotiation()}replaceTrack(e,t,i){this._debug("replaceTrack()");var s=this._senderMap.get(e),n=s?s.get(i):null;if(!n)throw d("Cannot replace track that was never added.","ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,s),null!=n.replaceTrack?n.replaceTrack(t):this.destroy(d("replaceTrack is not supported in this browser","ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){this._debug("removeSender()");var i=this._senderMap.get(e),s=i?i.get(t):null;if(!s)throw d("Cannot remove track that was never added.","ERR_TRACK_NOT_ADDED");try{s.removed=!0,this._pc.removeTrack(s)}catch(n){"NS_ERROR_UNEXPECTED"===n.name?this._sendersAwaitingStable.push(s):this.destroy(d(n,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating||(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.destroyed=!0,this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}}_setupData(e){if(!e.channel)return this.destroy(d("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=r),this.channelName=this._channel.label,this._channel.onmessage=(e=>{this._onChannelMessage(e)}),this._channel.onbufferedamountlow=(()=>{this._onChannelBufferedAmountLow()}),this._channel.onopen=(()=>{this._onChannelOpen()}),this._channel.onclose=(()=>{this._onChannelClose()}),this._channel.onerror=(e=>{this.destroy(d(e,"ERR_DATA_CHANNEL"))});var t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},o)}_read(){}_write(e,t,i){if(this.destroyed)return i(d("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(s){return this.destroy(d(s,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>r?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=i):i(null)}else this._debug("write before connect"),this._chunk=e,this._cb=i}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=c(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(d(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(d(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=c(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(d(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(d(e,"ERR_CREATE_ANSWER"))})}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(d("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(d("Ice connection closed.","ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length?this._pc.getStats().then(i=>{var s=[];i.forEach(e=>{s.push(t(e))}),e(null,s)},t=>e(t)):this._isReactNativeWebrtc?this._pc.getStats(null,i=>{var s=[];i.forEach(e=>{s.push(t(e))}),e(null,s)},t=>e(t)):this._pc.getStats.length>0?this._pc.getStats(i=>{if(!this.destroyed){var s=[];i.result().forEach(e=>{var i={};e.names().forEach(t=>{i[t]=e.stat(t)}),i.id=e.id,i.type=e.type,i.timestamp=e.timestamp,s.push(t(i))}),e(null,s)}},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,i)=>{if(this.destroyed)return;t&&(i=[]);var s={},n={},a={},r=!1;i.forEach(e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(s[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(n[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(a[e.id]=e)});const h=e=>{r=!0;var t=n[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var i=s[e.remoteCandidateId];i&&(i.ip||i.address)?(this.remoteAddress=i.ip||i.address,this.remotePort=Number(i.port)):i&&i.ipAddress?(this.remoteAddress=i.ipAddress,this.remotePort=Number(i.portNumber)):"string"==typeof e.googRemoteAddress&&(i=e.googRemoteAddress.split(":"),this.remoteAddress=i[0],this.remotePort=Number(i[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&h(a[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&h(e)}),r||Object.keys(a).length&&!Object.keys(n).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(d(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var o=this._cb;this._cb=null,o(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>r||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"!==this._pc.signalingState||this._firstStable||(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(!this.destroyed){var i=t.data;i instanceof ArrayBuffer&&(i=e.from(i)),this.push(i)}}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),a(()=>{this.emit("stream",t)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],t.apply(null,e)}}_.WEBRTC_SUPPORT=!!i(),_.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}],sdpSemantics:"unified-plan"},_.channelConfig={},module.exports=_;
},{"debug":"jD9Y","get-browser-rtc":"bJJC","randombytes":"pXr2","readable-stream":"YvpY","queue-microtask":"IVZi","buffer":"aMB2"}],"JweE":[function(require,module,exports) {
var n,r=1,e=65535,t=4,u=function(){r=r+1&e};module.exports=function(f){n||(n=setInterval(u,1e3/t|0)).unref&&n.unref();var o=t*(f||5),a=[0],l=1,v=r-1&e;return function(n){var u=r-v&e;for(u>o&&(u=o),v=r;u--;)l===o&&(l=0),a[l]=a[0===l?o-1:l-1],l++;n&&(a[l-1]+=n);var f=a[l-1],c=a.length<o?0:a[l===o?0:l];return a.length<t?f:(f-c)*t/a.length}};
},{}],"AwT2":[function(require,module,exports) {
const e=/^\[?([^\]]+)\]?:(\d+)$/;let r={},o=0;module.exports=function(t){if(1e5===o&&module.exports.reset(),!r[t]){const n=e.exec(t);if(!n)throw new Error(`invalid addr: ${t}`);r[t]=[n[1],Number(n[2])],o+=1}return r[t]},module.exports.reset=function(){r={},o=0};
},{}],"yWjx":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e){var t=e>>3;return e%8!=0&&t++,t}var i=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;e(this,t);var f=null!=i&&i.grow;this.grow=f&&isFinite(f)&&r(f)||f||0,this.buffer="number"==typeof n?new Uint8Array(r(n)):n}return n(t,[{key:"get",value:function(e){var t=e>>3;return t<this.buffer.length&&!!(this.buffer[t]&128>>e%8)}},{key:"set",value:function(e){var t=e>>3;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){if(this.buffer.length<t+1){var n=Math.max(t+1,Math.min(2*this.buffer.length,this.grow));if(n<=this.grow){var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}this.buffer[t]|=128>>e%8}else t<this.buffer.length&&(this.buffer[t]&=~(128>>e%8))}}]),t}();"undefined"!=typeof module&&(module.exports=i);
},{}],"Vn8l":[function(require,module,exports) {
const t=require("block-stream2"),s=require("readable-stream");class e extends s.Writable{constructor(s,e,r={}){if(super(r),!s||!s.put||!s.get)throw new Error("First argument must be an abstract-chunk-store compliant store");if(!(e=Number(e)))throw new Error("Second argument must be a chunk length");this._blockstream=new t(e,{zeroPadding:!1}),this._outstandingPuts=0;let i=0;this._blockstream.on("data",t=>{this.destroyed||(this._outstandingPuts+=1,s.put(i,t,()=>{this._outstandingPuts-=1,0===this._outstandingPuts&&"function"==typeof this._finalCb&&(this._finalCb(null),this._finalCb=null)}),i+=1)}).on("error",t=>{this.destroy(t)})}_write(t,s,e){this._blockstream.write(t,s,e)}_final(t){this._blockstream.end(),this._blockstream.once("end",()=>{0===this._outstandingPuts?t(null):this._finalCb=t})}destroy(t){this.destroyed||(this.destroyed=!0,t&&this.emit("error",t),this.emit("close"))}}module.exports=e;
},{"block-stream2":"uClA","readable-stream":"YvpY"}],"cJFA":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;exports.DEFAULT_ANNOUNCE_PEERS=50,exports.MAX_ANNOUNCE_PEERS=82,exports.binaryToHex=function(e){return"string"!=typeof e&&(e=String(e)),r.from(e,"binary").toString("hex")},exports.hexToBinary=function(e){return"string"!=typeof e&&(e=String(e)),r.from(e,"hex").toString("binary")};var e=require("./common-node");Object.assign(exports,e);
},{"./common-node":"sC8V","buffer":"aMB2"}],"zLwF":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;const t=require("debug")("simple-websocket"),s=require("randombytes"),i=require("readable-stream"),n=require("queue-microtask"),r=require("ws"),o="function"!=typeof r?WebSocket:r,h=65536;class u extends i.Duplex{constructor(e={}){if("string"==typeof e&&(e={url:e}),super(e=Object.assign({allowHalfOpen:!1},e)),null==e.url&&null==e.socket)throw new Error("Missing required `url` or `socket` option");if(null!=e.url&&null!=e.socket)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=s(4).toString("hex").slice(0,7),this._debug("new websocket: %o",e),this.connected=!1,this.destroyed=!1,this._chunk=null,this._cb=null,this._interval=null,e.socket)this.url=e.socket.url,this._ws=e.socket,this.connected=e.socket.readyState===o.OPEN;else{this.url=e.url;try{this._ws="function"==typeof r?new o(e.url,e):new o(e.url)}catch(t){return void n(()=>this.destroy(t))}}this._ws.binaryType="arraybuffer",this._ws.onopen=(()=>{this._onOpen()}),this._ws.onmessage=(e=>{this._onMessage(e)}),this._ws.onclose=(()=>{this._onClose()}),this._ws.onerror=(()=>{this.destroy(new Error("connection error to "+this.url))}),this._onFinishBound=(()=>{this._onFinish()}),this.once("finish",this._onFinishBound)}send(e){this._ws.send(e)}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._ws){const t=this._ws,s=()=>{t.onclose=null};if(t.readyState===o.CLOSED)s();else try{t.onclose=s,t.close()}catch(e){s()}t.onopen=null,t.onmessage=null,t.onerror=(()=>{})}if(this._ws=null,e){if("undefined"!=typeof DOMException&&e instanceof DOMException){const t=e.code;(e=new Error(e.message)).code=t}this.emit("error",e)}this.emit("close"),t()}}_read(){}_write(e,t,s){if(this.destroyed)return s(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(i){return this.destroy(i)}"function"!=typeof r&&this._ws.bufferedAmount>h?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=s):s(null)}else this._debug("write before connect"),this._chunk=e,this._cb=s}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?e():this.once("connect",e)}_onMessage(t){if(this.destroyed)return;let s=t.data;s instanceof ArrayBuffer&&(s=e.from(s)),this.push(s)}_onOpen(){if(!this.connected&&!this.destroyed){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(e)}this._chunk=null,this._debug('sent chunk from "write before connect"');const t=this._cb;this._cb=null,t(null)}"function"!=typeof r&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>h)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onClose(){this.destroyed||(this._debug("on close"),this.destroy())}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],t.apply(null,e)}}u.WEBSOCKET_SUPPORT=!!o,module.exports=u;
},{"debug":"jD9Y","randombytes":"pXr2","readable-stream":"YvpY","queue-microtask":"IVZi","ws":"sC8V","buffer":"aMB2"}],"v5ir":[function(require,module,exports) {
function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function o(n,e){return!e||"object"!==t(e)&&"function"!=typeof e?i(n):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&f(t,n)}function f(t,n){return(f=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var l=require("events"),a=function(t){function e(t,r){var i;return n(this,e),(i=o(this,u(e).call(this))).client=t,i.announceUrl=r,i.interval=null,i.destroyed=!1,i}return c(e,l),r(e,[{key:"setInterval",value:function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(t){var n=this;null==t&&(t=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),t&&(this.interval=setInterval(function(){n.announce(n.client._defaultAnnounceOpts())},t),this.interval.unref&&this.interval.unref())})}]),e}();module.exports=a;
},{"events":"wIHY"}],"oaNy":[function(require,module,exports) {
function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function t(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}function r(n,t){return!t||"object"!==e(t)&&"function"!=typeof t?i(n):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&a(e,n)}function a(e,n){return(a=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var u=require("debug")("bittorrent-tracker:websocket-tracker"),h=require("simple-peer"),f=require("randombytes"),l=require("simple-websocket"),d=require("../common"),p=require("./tracker"),k={},_=1e4,y=18e5,m=12e4,v=5e4,g=function(e){function t(e,o,i){var c;return n(this,t),c=r(this,s(t).call(this,e,o)),u("new websocket tracker %s",o),c.peers={},c.socket=null,c.reconnecting=!1,c.retries=0,c.reconnectTimer=null,c.expectingResponse=!1,c._openSocket(),c}return c(t,p),o(t,[{key:"announce",value:function(e){var n=this;if(!this.destroyed&&!this.reconnecting)if(this.socket.connected){var t=Object.assign({},e,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(t.trackerid=this._trackerId),"stopped"===e.event||"completed"===e.event)this._send(t);else{var o=Math.min(e.numwant,10);this._generateOffers(o,function(e){t.numwant=o,t.offers=e,n._send(t)})}}else this.socket.once("connect",function(){n.announce(e)})}},{key:"scrape",value:function(e){var n=this;if(!this.destroyed&&!this.reconnecting)if(this.socket.connected){var t={action:"scrape",info_hash:Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(function(e){return e.toString("binary")}):e.infoHash&&e.infoHash.toString("binary")||this.client._infoHashBinary};this._send(t)}else this.socket.once("connect",function(){n.scrape(e)})}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;if(this.destroyed)return e(null);for(var n in this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer),this.peers){var t=this.peers[n];clearTimeout(t.trackerTimeout),t.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,k[this.announceUrl]&&(k[this.announceUrl].consumers-=1),k[this.announceUrl].consumers>0)return e();var o=k[this.announceUrl];if(delete k[this.announceUrl],o.on("error",S),o.once("close",e),!this.expectingResponse)return i();var r=setTimeout(i,d.DESTROY_TIMEOUT);function i(){r&&(clearTimeout(r),r=null),o.removeListener("data",i),o.destroy(),o=null}o.once("data",i)}},{key:"_openSocket",value:function(){var e=this;this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=function(){e._onSocketConnect()},this._onSocketErrorBound=function(n){e._onSocketError(n)},this._onSocketDataBound=function(n){e._onSocketData(n)},this._onSocketCloseBound=function(){e._onSocketClose()},this.socket=k[this.announceUrl],this.socket?(k[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound()):(this.socket=k[this.announceUrl]=new l(this.announceUrl),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)),this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}},{key:"_onSocketConnect",value:function(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}},{key:"_onSocketData",value:function(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse(e)}catch(n){return void this.client.emit("warning",new Error("Invalid tracker response"))}"announce"===e.action?this._onAnnounceResponse(e):"scrape"===e.action?this._onScrapeResponse(e):this._onSocketError(new Error("invalid action in WS response: ".concat(e.action)))}}},{key:"_onAnnounceResponse",value:function(e){var n=this;if(e.info_hash===this.client._infoHashBinary){if(!e.peer_id||e.peer_id!==this.client._peerIdBinary){u("received %s from %s for %s",JSON.stringify(e),this.announceUrl,this.client.infoHash);var t=e["failure reason"];if(t)return this.client.emit("warning",new Error(t));var o=e["warning message"];o&&this.client.emit("warning",new Error(o));var r=e.interval||e["min interval"];r&&this.setInterval(1e3*r);var i,s=e["tracker id"];if(s&&(this._trackerId=s),null!=e.complete){var c=Object.assign({},e,{announce:this.announceUrl,infoHash:d.binaryToHex(e.info_hash)});this.client.emit("update",c)}if(e.offer&&e.peer_id&&(u("creating peer (from remote offer)"),(i=this._createPeer()).id=d.binaryToHex(e.peer_id),i.once("signal",function(t){var o={action:"announce",info_hash:n.client._infoHashBinary,peer_id:n.client._peerIdBinary,to_peer_id:e.peer_id,answer:t,offer_id:e.offer_id};n._trackerId&&(o.trackerid=n._trackerId),n._send(o)}),i.signal(e.offer),this.client.emit("peer",i)),e.answer&&e.peer_id){var a=d.binaryToHex(e.offer_id);(i=this.peers[a])?(i.id=d.binaryToHex(e.peer_id),i.signal(e.answer),this.client.emit("peer",i),clearTimeout(i.trackerTimeout),i.trackerTimeout=null,delete this.peers[a]):u("got unexpected answer: ".concat(JSON.stringify(e.answer)))}}}else u("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,d.binaryToHex(e.info_hash),this.client.infoHash)}},{key:"_onScrapeResponse",value:function(e){var n=this;e=e.files||{};var t=Object.keys(e);0!==t.length?t.forEach(function(t){var o=Object.assign(e[t],{announce:n.announceUrl,infoHash:d.binaryToHex(t)});n.client.emit("scrape",o)}):this.client.emit("warning",new Error("invalid scrape response"))}},{key:"_onSocketClose",value:function(){this.destroyed||(this.destroy(),this._startReconnectTimer())}},{key:"_onSocketError",value:function(e){this.destroyed||(this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())}},{key:"_startReconnectTimer",value:function(){var e=this,n=Math.floor(Math.random()*m)+Math.min(Math.pow(2,this.retries)*_,y);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(function(){e.retries++,e._openSocket()},n),this.reconnectTimer.unref&&this.reconnectTimer.unref(),u("reconnecting socket in %s ms",n)}},{key:"_send",value:function(e){if(!this.destroyed){this.expectingResponse=!0;var n=JSON.stringify(e);u("send %s",n),this.socket.send(n)}}},{key:"_generateOffers",value:function(e,n){var t=this,o=[];u("generating %s offers",e);for(var r=0;r<e;++r)i();function i(){var e=f(20).toString("hex");u("creating peer (from _generateOffers)");var n=t.peers[e]=t._createPeer({initiator:!0});n.once("signal",function(n){o.push({offer:n,offer_id:d.hexToBinary(e)}),s()}),n.trackerTimeout=setTimeout(function(){u("tracker timeout: destroying peer"),n.trackerTimeout=null,delete t.peers[e],n.destroy()},v),n.trackerTimeout.unref&&n.trackerTimeout.unref()}function s(){o.length===e&&(u("generated %s offers",e),n(o))}s()}},{key:"_createPeer",value:function(e){var n=this;e=Object.assign({trickle:!1,config:n.client._rtcConfig,wrtc:n.client._wrtc},e);var t=new h(e);return t.once("error",o),t.once("connect",function e(){t.removeListener("error",o);t.removeListener("connect",e)}),t;function o(e){n.client.emit("warning",new Error("Connection error: ".concat(e.message))),t.destroy()}}}]),t}();function S(){}g.prototype.DEFAULT_ANNOUNCE_INTERVAL=3e4,g._socketPool=k,module.exports=g;
},{"debug":"jD9Y","simple-peer":"Sx5b","randombytes":"pXr2","simple-websocket":"zLwF","../common":"cJFA","./tracker":"v5ir"}],"WzV8":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var process = require("process");
var e=require("buffer").Buffer,n=require("process");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}function u(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?c(e):n}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&f(e,n)}function f(e,n){return(f=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var l=require("debug")("bittorrent-tracker:client"),p=require("events"),h=require("once"),d=require("run-parallel"),y=require("simple-peer"),w=require("uniq"),_=require("./lib/common"),v=require("./lib/client/http-tracker"),b=require("./lib/client/udp-tracker"),g=require("./lib/client/websocket-tracker"),O=function(t){function o(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,o),t=u(this,a(o).call(this)),!i.peerId)throw new Error("Option `peerId` is required");if(!i.infoHash)throw new Error("Option `infoHash` is required");if(!i.announce)throw new Error("Option `announce` is required");t.peerId="string"==typeof i.peerId?i.peerId:i.peerId.toString("hex"),t._peerIdBuffer=e.from(t.peerId,"hex"),t._peerIdBinary=t._peerIdBuffer.toString("binary"),t.infoHash="string"==typeof i.infoHash?i.infoHash.toLowerCase():i.infoHash.toString("hex"),t._infoHashBuffer=e.from(t.infoHash,"hex"),t._infoHashBinary=t._infoHashBuffer.toString("binary"),l("new client %s",t.infoHash),t.destroyed=!1,t._port=i.port,t._getAnnounceOpts=i.getAnnounceOpts,t._rtcConfig=i.rtcConfig,t._userAgent=i.userAgent,t._wrtc="function"==typeof i.wrtc?i.wrtc():i.wrtc;var s="string"==typeof i.announce?[i.announce]:null==i.announce?[]:i.announce;s=s.map(function(e){return"/"===(e=e.toString())[e.length-1]&&(e=e.substring(0,e.length-1)),e}),s=w(s);var f=!1!==t._wrtc&&(!!t._wrtc||y.WEBRTC_SUPPORT),p=function(e){n.nextTick(function(){t.emit("warning",e)})};return t._trackers=s.map(function(e){var n;try{n=new URL(e)}catch(i){return p(new Error("Invalid tracker URL: ".concat(e))),null}var r=n.port;if(r<0||r>65535)return p(new Error("Invalid tracker port: ".concat(e))),null;var o=n.protocol;return"http:"!==o&&"https:"!==o||"function"!=typeof v?"udp:"===o&&"function"==typeof b?new b(c(t),e):"ws:"!==o&&"wss:"!==o||!f?(p(new Error("Unsupported tracker protocol: ".concat(e))),null):"ws:"===o&&"undefined"!=typeof window&&"https:"===window.location.protocol?(p(new Error("Unsupported tracker protocol: ".concat(e))),null):new g(c(t),e):new v(c(t),e)}).filter(Boolean),t}return s(o,p),i(o,[{key:"start",value:function(e){(e=this._defaultAnnounceOpts(e)).event="started",l("send `start` %o",e),this._announce(e),this._trackers.forEach(function(e){e.setInterval()})}},{key:"stop",value:function(e){(e=this._defaultAnnounceOpts(e)).event="stopped",l("send `stop` %o",e),this._announce(e)}},{key:"complete",value:function(e){e||(e={}),(e=this._defaultAnnounceOpts(e)).event="completed",l("send `complete` %o",e),this._announce(e)}},{key:"update",value:function(e){(e=this._defaultAnnounceOpts(e)).event&&delete e.event,l("send `update` %o",e),this._announce(e)}},{key:"_announce",value:function(e){this._trackers.forEach(function(n){n.announce(e)})}},{key:"scrape",value:function(e){l("send `scrape`"),e||(e={}),this._trackers.forEach(function(n){n.scrape(e)})}},{key:"setInterval",value:function(e){l("setInterval %d",e),this._trackers.forEach(function(n){n.setInterval(e)})}},{key:"destroy",value:function(e){if(!this.destroyed){this.destroyed=!0,l("destroy");var n=this._trackers.map(function(e){return function(n){e.destroy(n)}});d(n,e),this._trackers=[],this._getAnnounceOpts=null}}},{key:"_defaultAnnounceOpts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null==e.numwant&&(e.numwant=_.DEFAULT_ANNOUNCE_PEERS),null==e.uploaded&&(e.uploaded=0),null==e.downloaded&&(e.downloaded=0),this._getAnnounceOpts&&(e=Object.assign({},e,this._getAnnounceOpts())),e}}]),o}();O.scrape=function(n,t){if(t=h(t),!n.infoHash)throw new Error("Option `infoHash` is required");if(!n.announce)throw new Error("Option `announce` is required");var r=Object.assign({},n,{infoHash:Array.isArray(n.infoHash)?n.infoHash[0]:n.infoHash,peerId:e.from("01234567890123456789"),port:6881}),o=new O(r);o.once("error",t),o.once("warning",t);var i=Array.isArray(n.infoHash)?n.infoHash.length:1,u={};return o.on("scrape",function(e){if(i-=1,u[e.infoHash]=e,0===i){o.destroy();var n=Object.keys(u);1===n.length?t(null,u[n[0]]):t(null,u)}}),n.infoHash=Array.isArray(n.infoHash)?n.infoHash.map(function(n){return e.from(n,"hex")}):e.from(n.infoHash,"hex"),o.scrape({infoHash:n.infoHash}),o},module.exports=O;
},{"debug":"jD9Y","events":"wIHY","once":"Z8tK","run-parallel":"uzVO","simple-peer":"Sx5b","uniq":"DiK4","./lib/common":"cJFA","./lib/client/http-tracker":"sC8V","./lib/client/udp-tracker":"sC8V","./lib/client/websocket-tracker":"oaNy","buffer":"aMB2","process":"g5IB"}],"LSOj":[function(require,module,exports) {
const t=require("debug")("torrent-discovery"),e=require("bittorrent-dht/client"),r=require("events").EventEmitter,n=require("run-parallel"),i=require("bittorrent-tracker/client");class s extends r{constructor(t){if(super(),!t.peerId)throw new Error("Option `peerId` is required");if(!t.infoHash)throw new Error("Option `infoHash` is required");this.peerId="string"==typeof t.peerId?t.peerId:t.peerId.toString("hex"),this.infoHash="string"==typeof t.infoHash?t.infoHash.toLowerCase():t.infoHash.toString("hex"),this._port=t.port,this._userAgent=t.userAgent,this.destroyed=!1,this._announce=t.announce||[],this._intervalMs=t.intervalMs||9e5,this._trackerOpts=null,this._dhtAnnouncing=!1,this._dhtTimeout=!1,this._internalDHT=!1,this._onWarning=(t=>{this.emit("warning",t)}),this._onError=(t=>{this.emit("error",t)}),this._onDHTPeer=((t,e)=>{e.toString("hex")===this.infoHash&&this.emit("peer",`${t.host}:${t.port}`,"dht")}),this._onTrackerPeer=(t=>{this.emit("peer",t,"tracker")}),this._onTrackerAnnounce=(()=>{this.emit("trackerAnnounce")});const r=(t,r)=>{const n=new e(r);return n.on("warning",this._onWarning),n.on("error",this._onError),n.listen(t),this._internalDHT=!0,n};!1===t.tracker?this.tracker=null:t.tracker&&"object"==typeof t.tracker?(this._trackerOpts=Object.assign({},t.tracker),this.tracker=this._createTracker()):this.tracker=this._createTracker(),!1===t.dht||"function"!=typeof e?this.dht=null:t.dht&&"function"==typeof t.dht.addNode?this.dht=t.dht:t.dht&&"object"==typeof t.dht?this.dht=r(t.dhtPort,t.dht):this.dht=r(t.dhtPort),this.dht&&(this.dht.on("peer",this._onDHTPeer),this._dhtAnnounce())}updatePort(t){t!==this._port&&(this._port=t,this.dht&&this._dhtAnnounce(),this.tracker&&(this.tracker.stop(),this.tracker.destroy(()=>{this.tracker=this._createTracker()})))}complete(t){this.tracker&&this.tracker.complete(t)}destroy(t){if(this.destroyed)return;this.destroyed=!0,clearTimeout(this._dhtTimeout);const e=[];this.tracker&&(this.tracker.stop(),this.tracker.removeListener("warning",this._onWarning),this.tracker.removeListener("error",this._onError),this.tracker.removeListener("peer",this._onTrackerPeer),this.tracker.removeListener("update",this._onTrackerAnnounce),e.push(t=>{this.tracker.destroy(t)})),this.dht&&this.dht.removeListener("peer",this._onDHTPeer),this._internalDHT&&(this.dht.removeListener("warning",this._onWarning),this.dht.removeListener("error",this._onError),e.push(t=>{this.dht.destroy(t)})),n(e,t),this.dht=null,this.tracker=null,this._announce=null}_createTracker(){const t=Object.assign({},this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),e=new i(t);return e.on("warning",this._onWarning),e.on("error",this._onError),e.on("peer",this._onTrackerPeer),e.on("update",this._onTrackerAnnounce),e.setInterval(this._intervalMs),e.start(),e}_dhtAnnounce(){this._dhtAnnouncing||(t("dht announce"),this._dhtAnnouncing=!0,clearTimeout(this._dhtTimeout),this.dht.announce(this.infoHash,this._port,e=>{this._dhtAnnouncing=!1,t("dht announce complete"),e&&this.emit("warning",e),this.emit("dhtAnnounce"),this.destroyed||(this._dhtTimeout=setTimeout(()=>{this._dhtAnnounce()},this._intervalMs+Math.floor(Math.random()*this._intervalMs/5)),this._dhtTimeout.unref&&this._dhtTimeout.unref())}))}}module.exports=s;
},{"debug":"jD9Y","bittorrent-dht/client":"sC8V","events":"wIHY","run-parallel":"uzVO","bittorrent-tracker/client":"WzV8"}],"y0tm":[function(require,module,exports) {
var process = require("process");
var t=require("process");function n(t,e){if(!(this instanceof n))return new n(t,e);if(e||(e={}),this.chunkLength=Number(t),!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[],this.closed=!1,this.length=Number(e.length)||1/0,this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1)}function e(n,e,h){t.nextTick(function(){n&&n(e,h)})}module.exports=n,n.prototype.put=function(t,n,h){if(this.closed)return e(h,new Error("Storage is closed"));var s=t===this.lastChunkIndex;return s&&n.length!==this.lastChunkLength?e(h,new Error("Last chunk length must be "+this.lastChunkLength)):s||n.length===this.chunkLength?(this.chunks[t]=n,void e(h,null)):e(h,new Error("Chunk length must be "+this.chunkLength))},n.prototype.get=function(t,n,h){if("function"==typeof n)return this.get(t,null,n);if(this.closed)return e(h,new Error("Storage is closed"));var s=this.chunks[t];if(!s){var r=new Error("Chunk not found");return r.notFound=!0,e(h,r)}if(!n)return e(h,null,s);var i=n.offset||0,u=n.length||s.length-i;e(h,null,s.slice(i,u+i))},n.prototype.close=n.prototype.destroy=function(t){if(this.closed)return e(t,new Error("Storage is closed"));this.closed=!0,this.chunks=null,e(t,null)};
},{"process":"g5IB"}],"lVmf":[function(require,module,exports) {
const t=require("queue-microtask");class e{constructor(t){if(this.store=t,this.chunkLength=t.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}put(t,e,s){this.mem[t]=e,this.store.put(t,e,e=>{this.mem[t]=null,s&&s(e)})}get(e,s,r){if("function"==typeof s)return this.get(e,null,s);let o=this.mem[e];if(!o)return this.store.get(e,s,r);if(s){const t=s.offset||0,e=s.length?t+s.length:o.length;o=o.slice(t,e)}t(()=>{r&&r(null,o)})}close(t){this.store.close(t)}destroy(t){this.store.destroy(t)}}module.exports=e;
},{"queue-microtask":"IVZi"}],"mSIz":[function(require,module,exports) {
var process = require("process");
var n=require("process");function e(e,r,t){if("number"!=typeof r)throw new Error("second argument must be a Number");var u,o,i,f,c,s=!0;function a(e){function r(){t&&t(e,u),t=null}s?n.nextTick(r):r()}function l(n,r,t){if(u[n]=t,r&&(c=!0),0==--i||r)a(r);else if(!c&&m<o){var s;f?(s=f[m],m+=1,e[s](function(n,e){l(s,n,e)})):(s=m,m+=1,e[s](function(n,e){l(s,n,e)}))}}Array.isArray(e)?(u=[],i=o=e.length):(f=Object.keys(e),u={},i=o=f.length);var m=r;i?f?f.some(function(n,t){if(e[n](function(e,r){l(n,e,r)}),t===r-1)return!0}):e.some(function(n,e){if(n(function(n,r){l(e,n,r)}),e===r-1)return!0}):a(null),s=!1}module.exports=e;
},{"process":"g5IB"}],"UinZ":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var s=require("buffer").Buffer;const t=16384;class i{constructor(s){this.length=s,this.missing=s,this.sources=null,this._chunks=Math.ceil(s/t),this._remainder=s%t||t,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,this._flushed=!1}chunkLength(s){return s===this._chunks-1?this._remainder:t}chunkLengthRemaining(s){return this.length-s*t}chunkOffset(s){return s*t}reserve(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1}reserveRemaining(){if(!this.init())return-1;if(this._reservations<this._chunks){const s=this._reservations;return this._reservations=this._chunks,s}return-1}cancel(s){this.init()&&this._cancellations.push(s)}cancelRemaining(s){this.init()&&(this._reservations=s)}get(s){return this.init()?this._buffer[s]:null}set(s,i,e){if(!this.init())return!1;const n=i.length,h=Math.ceil(n/t);for(let r=0;r<h;r++)if(!this._buffer[s+r]){const n=r*t,h=i.slice(n,n+t);this._buffered++,this._buffer[s+r]=h,this.missing-=h.length,this.sources.includes(e)||this.sources.push(e)}return this._buffered===this._chunks}flush(){if(!this._buffer||this._chunks!==this._buffered)return null;const t=s.concat(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,t}init(){return!this._flushed&&(!!this._buffer||(this._buffer=new Array(this._chunks),this._cancellations=[],this.sources=[],!0))}}Object.defineProperty(i,"BLOCK_LENGTH",{value:t}),module.exports=i;
},{"buffer":"aMB2"}],"lPYU":[function(require,module,exports) {
var process = require("process");
var e=require("process"),r=require("once"),n=function(){},o=function(e){return e.setHeader&&"function"==typeof e.abort},t=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},i=function(l,s,c){if("function"==typeof s)return i(l,null,s);s||(s={}),c=r(c||n);var a=l._writableState,u=l._readableState,d=s.readable||!1!==s.readable&&l.readable,f=s.writable||!1!==s.writable&&l.writable,m=!1,v=function(){l.writable||b()},b=function(){f=!1,d||c.call(l)},L=function(){d=!1,f||c.call(l)},q=function(e){c.call(l,e?new Error("exited with error code: "+e):null)},w=function(e){c.call(l,e)},p=function(){e.nextTick(h)},h=function(){if(!m)return(!d||u&&u.ended&&!u.destroyed)&&(!f||a&&a.ended&&!a.destroyed)?void 0:c.call(l,new Error("premature close"))},y=function(){l.req.on("finish",b)};return o(l)?(l.on("complete",b),l.on("abort",p),l.req?y():l.on("request",y)):f&&!a&&(l.on("end",v),l.on("close",v)),t(l)&&l.on("exit",q),l.on("end",L),l.on("finish",b),!1!==s.error&&l.on("error",w),l.on("close",p),function(){m=!0,l.removeListener("complete",b),l.removeListener("abort",p),l.removeListener("request",y),l.req&&l.req.removeListener("finish",b),l.removeListener("end",v),l.removeListener("close",v),l.removeListener("finish",b),l.removeListener("exit",q),l.removeListener("end",L),l.removeListener("error",w),l.removeListener("close",p)}};module.exports=i;
},{"once":"Z8tK","process":"g5IB"}],"J9x6":[function(require,module,exports) {
var process = require("process");
var r=require("process"),e=require("once"),n=require("end-of-stream"),t=require("fs"),o=function(){},i=/^v?\.0/.test(r.version),u=function(r){return"function"==typeof r},a=function(r){return!!i&&(!!t&&((r instanceof(t.ReadStream||o)||r instanceof(t.WriteStream||o))&&u(r.close)))},c=function(r){return r.setHeader&&u(r.abort)},f=function(r,t,i,f){f=e(f);var s=!1;r.on("close",function(){s=!0}),n(r,{readable:t,writable:i},function(r){if(r)return f(r);s=!0,f()});var p=!1;return function(e){if(!s&&!p)return p=!0,a(r)?r.close(o):c(r)?r.abort():u(r.destroy)?r.destroy():void f(e||new Error("stream was destroyed"))}},s=function(r){r()},p=function(r,e){return r.pipe(e)},l=function(){var r,e=Array.prototype.slice.call(arguments),n=u(e[e.length-1]||o)&&e.pop()||o;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var t=e.map(function(o,i){var u=i<e.length-1;return f(o,u,i>0,function(e){r||(r=e),e&&t.forEach(s),u||(t.forEach(s),n(r))})});return e.reduce(p)};module.exports=l;
},{"once":"Z8tK","end-of-stream":"lPYU","fs":"sC8V","process":"g5IB"}],"DYhE":[function(require,module,exports) {
var n=function(n){var r=0;return function(){if(r===n.length)return null;var t=n.length-r,e=Math.random()*t|0,u=n[r+e],a=n[r];return n[r]=u,n[r+e]=a,r++,u}};module.exports=n;
},{}],"doLN":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;const{EventEmitter:t}=require("events"),i=require("bencode"),a=require("bitfield"),s=require("debug")("ut_metadata"),n=require("simple-sha1"),h=1e7,r=1e3,d=16384;module.exports=(_=>{class c extends t{constructor(t){super(),this._wire=t,this._fetching=!1,this._metadataComplete=!1,this._metadataSize=null,this._remainingRejects=null,this._bitfield=new a(0,{grow:r}),e.isBuffer(_)&&this.setMetadata(_)}onHandshake(e,t,i){this._infoHash=e}onExtendedHandshake(e){return e.m&&e.m.ut_metadata?e.metadata_size?"number"!=typeof e.metadata_size||h<e.metadata_size||e.metadata_size<=0?this.emit("warning",new Error("Peer gave invalid metadata size")):(this._metadataSize=e.metadata_size,this._numPieces=Math.ceil(this._metadataSize/d),this._remainingRejects=2*this._numPieces,void this._requestPieces()):this.emit("warning",new Error("Peer does not have metadata")):this.emit("warning",new Error("Peer does not support ut_metadata"))}onMessage(e){let t,a;try{const n=e.toString(),h=n.indexOf("ee")+2;t=i.decode(n.substring(0,h)),a=e.slice(h)}catch(s){return}switch(t.msg_type){case 0:this._onRequest(t.piece);break;case 1:this._onData(t.piece,a,t.total_size);break;case 2:this._onReject(t.piece)}}fetch(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())}cancel(){this._fetching=!1}setMetadata(e){if(this._metadataComplete)return!0;s("set metadata");try{const a=i.decode(e).info;a&&(e=i.encode(a))}catch(t){}return(!this._infoHash||this._infoHash===n.sync(e))&&(this.cancel(),this.metadata=e,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",i.encode({info:i.decode(this.metadata)})),!0)}_send(t,a){let s=i.encode(t);e.isBuffer(a)&&(s=e.concat([s,a])),this._wire.extended("ut_metadata",s)}_request(e){this._send({msg_type:0,piece:e})}_data(e,t,i){const a={msg_type:1,piece:e};"number"==typeof i&&(a.total_size=i),this._send(a,t)}_reject(e){this._send({msg_type:2,piece:e})}_onRequest(e){if(!this._metadataComplete)return void this._reject(e);const t=e*d;let i=t+d;i>this._metadataSize&&(i=this._metadataSize);const a=this.metadata.slice(t,i);this._data(e,a,this._metadataSize)}_onData(e,t,i){t.length>d||!this._fetching||(t.copy(this.metadata,e*d),this._bitfield.set(e),this._checkDone())}_onReject(e){this._remainingRejects>0&&this._fetching?(this._request(e),this._remainingRejects-=1):this.emit("warning",new Error('Peer sent "reject" too much'))}_requestPieces(){if(this._fetching){this.metadata=e.alloc(this._metadataSize);for(let e=0;e<this._numPieces;e++)this._request(e)}}_checkDone(){let e=!0;for(let t=0;t<this._numPieces;t++)if(!this._bitfield.get(t)){e=!1;break}if(!e)return;this.setMetadata(this.metadata)||this._failedMetadata()}_failedMetadata(){this._bitfield=new a(0,{grow:r}),this._remainingRejects-=this._numPieces,this._remainingRejects>0?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))}}return c.prototype.name="ut_metadata",c});
},{"events":"wIHY","bencode":"XPbW","bitfield":"yWjx","debug":"jD9Y","simple-sha1":"U1Lh","buffer":"aMB2"}],"h9uI":[function(require,module,exports) {
function r(r){if(/^-?\d+$/.test(r))return parseInt(r,10);var t;if(t=r.match(/^(-?\d+)(-|\.\.\.?|\u2025|\u2026|\u22EF)(-?\d+)$/)){var n=t[1],a=t[2],e=t[3];if(n&&e){var u=[],i=(n=parseInt(n))<(e=parseInt(e))?1:-1;"-"!=a&&".."!=a&&"‥"!=a||(e+=i);for(var s=n;s!=e;s+=i)u.push(s);return u}}return[]}module.exports.parse=function(t){var n=t.split(",").map(function(t){return r(t)});return 0===n.length?[]:1===n.length?Array.isArray(n[0])?n[0]:n:n.reduce(function(r,t){return Array.isArray(r)||(r=[r]),Array.isArray(t)||(t=[t]),r.concat(t)})};
},{}],"epzI":[function(require,module,exports) {
module.exports={".3gp":"video/3gpp",".aac":"audio/aac",".aif":"audio/x-aiff",".aiff":"audio/x-aiff",".atom":"application/atom+xml",".avi":"video/x-msvideo",".bmp":"image/bmp",".bz2":"application/x-bzip2",".conf":"text/plain",".css":"text/css",".csv":"text/plain",".diff":"text/x-diff",".doc":"application/msword",".flv":"video/x-flv",".gif":"image/gif",".gz":"application/x-gzip",".htm":"text/html",".html":"text/html",".ico":"image/vnd.microsoft.icon",".ics":"text/calendar",".iso":"application/octet-stream",".jar":"application/java-archive",".jpeg":"image/jpeg",".jpg":"image/jpeg",".js":"application/javascript",".json":"application/json",".less":"text/css",".log":"text/plain",".m3u":"audio/x-mpegurl",".m4a":"audio/x-m4a",".m4b":"audio/mp4",".m4p":"audio/mp4",".m4v":"video/x-m4v",".manifest":"text/cache-manifest",".markdown":"text/x-markdown",".mathml":"application/mathml+xml",".md":"text/x-markdown",".mid":"audio/midi",".midi":"audio/midi",".mov":"video/quicktime",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4v":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"application/ogg",".pdf":"application/pdf",".png":"image/png",".pps":"application/vnd.ms-powerpoint",".ppt":"application/vnd.ms-powerpoint",".ps":"application/postscript",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".rar":"application/x-rar-compressed",".rdf":"application/rdf+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tbz":"application/x-bzip-compressed-tar",".text":"text/plain",".tif":"image/tiff",".tiff":"image/tiff",".torrent":"application/x-bittorrent",".ttf":"application/x-font-ttf",".txt":"text/plain",".wav":"audio/wav",".webm":"video/webm",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".xls":"application/vnd.ms-excel",".xml":"application/xml",".yaml":"text/yaml",".yml":"text/yaml",".zip":"application/zip"};
},{}],"FgDs":[function(require,module,exports) {
var r=127;module.exports=function(e){for(var t=0,n=e.length;t<n;++t)if(e.charCodeAt(t)>r)return!1;return!0};
},{}],"Rndg":[function(require,module,exports) {
module.exports=n;var e=require("inherits"),r=require("readable-stream"),t=require("to-arraybuffer"),o="undefined"!=typeof window&&window.MediaSource,i=60;function n(e,r){var t=this;if(!(t instanceof n))return new n(e,r);if(!o)throw new Error("web browser lacks MediaSource support");r||(r={}),t._debug=r.debug,t._bufferDuration=r.bufferDuration||i,t._elem=e,t._mediaSource=new o,t._streams=[],t.detailedError=null,t._errorHandler=function(){t._elem.removeEventListener("error",t._errorHandler),t._streams.slice().forEach(function(e){e.destroy(t._elem.error)})},t._elem.addEventListener("error",t._errorHandler),t._elem.src=window.URL.createObjectURL(t._mediaSource)}function u(e,t){var o=this;if(r.Writable.call(o),o._wrapper=e,o._elem=e._elem,o._mediaSource=e._mediaSource,o._allStreams=e._streams,o._allStreams.push(o),o._bufferDuration=e._bufferDuration,o._sourceBuffer=null,o._debugBuffers=[],o._openHandler=function(){o._onSourceOpen()},o._flowHandler=function(){o._flow()},o._errorHandler=function(e){o.destroyed||o.emit("error",e)},"string"==typeof t)o._type=t,"open"===o._mediaSource.readyState?o._createSourceBuffer():o._mediaSource.addEventListener("sourceopen",o._openHandler);else if(null===t._sourceBuffer)t.destroy(),o._type=t._type,o._mediaSource.addEventListener("sourceopen",o._openHandler);else{if(!t._sourceBuffer)throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");t.destroy(),o._type=t._type,o._sourceBuffer=t._sourceBuffer,o._debugBuffers=t._debugBuffers,o._sourceBuffer.addEventListener("updateend",o._flowHandler),o._sourceBuffer.addEventListener("error",o._errorHandler)}o._elem.addEventListener("timeupdate",o._flowHandler),o.on("error",function(e){o._wrapper.error(e)}),o.on("finish",function(){if(!o.destroyed&&(o._finished=!0,o._allStreams.every(function(e){return e._finished}))){o._wrapper._dumpDebugData();try{o._mediaSource.endOfStream()}catch(e){}}})}n.prototype.createWriteStream=function(e){return new u(this,e)},n.prototype.error=function(e){this.detailedError||(this.detailedError=e),this._dumpDebugData();try{this._mediaSource.endOfStream("decode")}catch(e){}try{window.URL.revokeObjectURL(this._elem.src)}catch(e){}},n.prototype._dumpDebugData=function(){this._debug&&(this._debug=!1,this._streams.forEach(function(e,r){a(e._debugBuffers,"mediasource-stream-"+r)}))},e(u,r.Writable),u.prototype._onSourceOpen=function(){this.destroyed||(this._mediaSource.removeEventListener("sourceopen",this._openHandler),this._createSourceBuffer())},u.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._allStreams.splice(this._allStreams.indexOf(this),1),this._mediaSource.removeEventListener("sourceopen",this._openHandler),this._elem.removeEventListener("timeupdate",this._flowHandler),this._sourceBuffer&&(this._sourceBuffer.removeEventListener("updateend",this._flowHandler),this._sourceBuffer.removeEventListener("error",this._errorHandler),"open"===this._mediaSource.readyState&&this._sourceBuffer.abort()),e&&this.emit("error",e),this.emit("close"))},u.prototype._createSourceBuffer=function(){if(!this.destroyed)if(o.isTypeSupported(this._type)){if(this._sourceBuffer=this._mediaSource.addSourceBuffer(this._type),this._sourceBuffer.addEventListener("updateend",this._flowHandler),this._sourceBuffer.addEventListener("error",this._errorHandler),this._cb){var e=this._cb;this._cb=null,e()}}else this.destroy(new Error("The provided type is not supported"))},u.prototype._write=function(e,r,o){var i=this;if(!i.destroyed)if(i._sourceBuffer){if(i._sourceBuffer.updating)return o(new Error("Cannot append buffer while source buffer updating"));var n=t(e);i._wrapper._debug&&i._debugBuffers.push(n);try{i._sourceBuffer.appendBuffer(n)}catch(u){return void i.destroy(u)}i._cb=o}else i._cb=function(t){if(t)return o(t);i._write(e,r,o)}},u.prototype._flow=function(){if(!this.destroyed&&this._sourceBuffer&&!this._sourceBuffer.updating&&!("open"===this._mediaSource.readyState&&this._getBufferDuration()>this._bufferDuration)&&this._cb){var e=this._cb;this._cb=null,e()}};var s=0;function a(e,r){var t=document.createElement("a");t.href=window.URL.createObjectURL(new window.Blob(e)),t.download=r,t.click()}u.prototype._getBufferDuration=function(){for(var e=this._sourceBuffer.buffered,r=this._elem.currentTime,t=-1,o=0;o<e.length;o++){var i=e.start(o),n=e.end(o)+s;if(i>r)break;(t>=0||r<=n)&&(t=n)}var u=t-r;return u<0&&(u=0),u};
},{"inherits":"oxwV","readable-stream":"YvpY","to-arraybuffer":"xHkA"}],"Nbx3":[function(require,module,exports) {
function n(n,e){if(null!=e&&"string"!=typeof e)throw new Error("Invalid mimetype, expected string.");return new Promise(function(r,o){var t=[];n.on("data",function(n){return t.push(n)}).once("end",function(){var n=null!=e?new Blob(t,{type:e}):new Blob(t);r(n)}).once("error",o)})}module.exports=n;
},{}],"MBwP":[function(require,module,exports) {
module.exports=e;const t=require("stream-to-blob");async function e(e,o){const r=await t(e,o);return URL.createObjectURL(r)}
},{"stream-to-blob":"Nbx3"}],"f7tK":[function(require,module,exports) {
module.exports=function(e,r,n,i,o){var l,t;if(void 0===i)i=0;else if((i|=0)<0||i>=e.length)throw new RangeError("invalid lower bound");if(void 0===o)o=e.length-1;else if((o|=0)<i||o>=e.length)throw new RangeError("invalid upper bound");for(;i<=o;)if((t=+n(e[l=i+(o-i>>>1)],r,l,e))<0)i=l+1;else{if(!(t>0))return l;o=l-1}return~i};
},{}],"wxH3":[function(require,module,exports) {
function n(n,u){var o=null;return n.on(u,function(n){if(o){var u=o;o=null,u(n)}}),function(n){o=n}}module.exports=n;
},{}],"Dq31":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var n=require("buffer").Buffer,r=function(){try{if(!n.isEncoding("latin1"))return!1;var r=n.alloc?n.alloc(4):new n(4);return r.fill("ab","ucs2"),"61006200"===r.toString("hex")}catch(e){return!1}}();function e(n){return 1===n.length&&n.charCodeAt(0)<256}function t(n,r,e,t){if(e<0||t>n.length)throw new RangeError("Out of range index");return e>>>=0,(t=void 0===t?n.length:t>>>0)>e&&n.fill(r,e,t),n}function i(n,r,e,t){if(e<0||t>n.length)throw new RangeError("Out of range index");if(t<=e)return n;e>>>=0,t=void 0===t?n.length:t>>>0;for(var i=e,o=r.length;i<=t-o;)r.copy(n,i),i+=o;return i!==t&&r.copy(n,i,0,t-i),n}function o(o,f,u,g,l){if(r)return o.fill(f,u,g,l);if("number"==typeof f)return t(o,f,u,g);if("string"==typeof f){if("string"==typeof u?(l=u,u=0,g=o.length):"string"==typeof g&&(l=g,g=o.length),void 0!==l&&"string"!=typeof l)throw new TypeError("encoding must be a string");if("latin1"===l&&(l="binary"),"string"==typeof l&&!n.isEncoding(l))throw new TypeError("Unknown encoding: "+l);if(""===f)return t(o,0,u,g);if(e(f))return t(o,f.charCodeAt(0),u,g);f=new n(f,l)}return n.isBuffer(f)?i(o,f,u,g):t(o,0,u,g)}module.exports=o;
},{"buffer":"aMB2"}],"SW1M":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function r(r){if("number"!=typeof r)throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative');return e.allocUnsafe?e.allocUnsafe(r):new e(r)}module.exports=r;
},{"buffer":"aMB2"}],"HgHp":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,r=require("buffer-fill"),u=require("buffer-alloc-unsafe");module.exports=function(f,n,o){if("number"!=typeof f)throw new TypeError('"size" argument must be a number');if(f<0)throw new RangeError('"size" argument must not be negative');if(e.alloc)return e.alloc(f,n,o);var t=u(f);return 0===f?t:void 0===n?r(t,0):("string"!=typeof o&&(o=void 0),r(t,n,o))};
},{"buffer-fill":"Dq31","buffer-alloc-unsafe":"SW1M","buffer":"aMB2"}],"nM53":[function(require,module,exports) {
var e=require("buffer-alloc"),r=Math.pow(2,32);exports.encodingLength=function(){return 8},exports.encode=function(t,n,o){n||(n=e(8)),o||(o=0);var c=Math.floor(t/r),d=t-c*r;return n.writeUInt32BE(c,o),n.writeUInt32BE(d,o+4),n},exports.decode=function(e,t){t||(t=0);var n=e.readUInt32BE(t),o=e.readUInt32BE(t+4);return n*r+o},exports.encode.bytes=8,exports.decode.bytes=8;
},{"buffer-alloc":"HgHp"}],"e1TV":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer,e={3:"ESDescriptor",4:"DecoderConfigDescriptor",5:"DecoderSpecificInfo",6:"SLConfigDescriptor"};exports.Descriptor={},exports.Descriptor.decode=function(o,t,c){var s,i,p=o.readUInt8(t),n=t+1,d=0;do{d=d<<7|127&(s=o.readUInt8(n++))}while(128&s);var a=e[p];return(i=exports[a]?exports[a].decode(o,n,c):{buffer:r.from(o.slice(n,n+d))}).tag=p,i.tagName=a,i.length=n-t+d,i.contentsLen=d,i},exports.DescriptorArray={},exports.DescriptorArray.decode=function(r,o,t){for(var c=o,s={};c+2<=t;){var i=exports.Descriptor.decode(r,c,t);c+=i.length,s[e[i.tag]||"Descriptor"+i.tag]=i}return s},exports.ESDescriptor={},exports.ESDescriptor.decode=function(r,e,o){var t=r.readUInt8(e+2),c=e+3;(128&t&&(c+=2),64&t)&&(c+=r.readUInt8(c)+1);return 32&t&&(c+=2),exports.DescriptorArray.decode(r,c,o)},exports.DecoderConfigDescriptor={},exports.DecoderConfigDescriptor.decode=function(r,e,o){var t=r.readUInt8(e),c=exports.DescriptorArray.decode(r,e+13,o);return c.oti=t,c};
},{"buffer":"aMB2"}],"uiQc":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,t=require("./index"),n=require("./descriptor"),r=require("uint64be"),o=20828448e5;exports.fullBoxes={};var i=["mvhd","tkhd","mdhd","vmhd","smhd","stsd","esds","stsz","stco","co64","stss","stts","ctts","stsc","dref","elst","hdlr","mehd","trex","mfhd","tfhd","tfdt","trun"];function s(e,t,n){for(var r=t;r<n;r++)e[r]=0}function c(e,t,n){t.writeUInt32BE(Math.floor((e.getTime()+o)/1e3),n)}function d(e,t,n){t.writeUIntBE(Math.floor((e.getTime()+o)/1e3),n,6)}function a(e,t,n){t.writeUInt16BE(Math.floor(e)%65536,n),t.writeUInt16BE(Math.floor(256*e*256)%65536,n+2)}function u(e,t,n){t[n]=Math.floor(e)%256,t[n+1]=Math.floor(256*e)%256}function l(e,t,n){e||(e=[0,0,0,0,0,0,0,0,0]);for(var r=0;r<e.length;r++)a(e[r],t,n+4*r)}function f(t,n,r){var o=e.from(t,"utf8");o.copy(n,r),n[r+o.length]=0}function p(e){for(var t=new Array(e.length/4),n=0;n<t.length;n++)t[n]=x(e,4*n);return t}function h(e,t){return new Date(1e3*e.readUIntBE(t,6)-o)}function g(e,t){return new Date(1e3*e.readUInt32BE(t)-o)}function x(e,t){return e.readUInt16BE(t)+e.readUInt16BE(t+2)/65536}function I(e,t){return e[t]+e[t+1]/256}function E(e,t,n){var r;for(r=0;r<n&&0!==e[t+r];r++);return e.toString("utf8",t,t+r)}i.forEach(function(e){exports.fullBoxes[e]=!0}),exports.ftyp={},exports.ftyp.encode=function(t,n,r){n=n?n.slice(r):e.alloc(exports.ftyp.encodingLength(t));var o=t.compatibleBrands||[];n.write(t.brand,0,4,"ascii"),n.writeUInt32BE(t.brandVersion,4);for(var i=0;i<o.length;i++)n.write(o[i],8+4*i,4,"ascii");return exports.ftyp.encode.bytes=8+4*o.length,n},exports.ftyp.decode=function(e,t){for(var n=(e=e.slice(t)).toString("ascii",0,4),r=e.readUInt32BE(4),o=[],i=8;i<e.length;i+=4)o.push(e.toString("ascii",i,i+4));return{brand:n,brandVersion:r,compatibleBrands:o}},exports.ftyp.encodingLength=function(e){return 8+4*(e.compatibleBrands||[]).length},exports.mvhd={},exports.mvhd.encode=function(t,n,r){return n=n?n.slice(r):e.alloc(96),c(t.ctime||new Date,n,0),c(t.mtime||new Date,n,4),n.writeUInt32BE(t.timeScale||0,8),n.writeUInt32BE(t.duration||0,12),a(t.preferredRate||0,n,16),u(t.preferredVolume||0,n,20),s(n,22,32),l(t.matrix,n,32),n.writeUInt32BE(t.previewTime||0,68),n.writeUInt32BE(t.previewDuration||0,72),n.writeUInt32BE(t.posterTime||0,76),n.writeUInt32BE(t.selectionTime||0,80),n.writeUInt32BE(t.selectionDuration||0,84),n.writeUInt32BE(t.currentTime||0,88),n.writeUInt32BE(t.nextTrackId||0,92),exports.mvhd.encode.bytes=96,n},exports.mvhd.decode=function(e,t){return{ctime:g(e=e.slice(t),0),mtime:g(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),preferredRate:x(e,16),preferredVolume:I(e,20),matrix:p(e.slice(32,68)),previewTime:e.readUInt32BE(68),previewDuration:e.readUInt32BE(72),posterTime:e.readUInt32BE(76),selectionTime:e.readUInt32BE(80),selectionDuration:e.readUInt32BE(84),currentTime:e.readUInt32BE(88),nextTrackId:e.readUInt32BE(92)}},exports.mvhd.encodingLength=function(e){return 96},exports.tkhd={},exports.tkhd.encode=function(t,n,r){return n=n?n.slice(r):e.alloc(80),c(t.ctime||new Date,n,0),c(t.mtime||new Date,n,4),n.writeUInt32BE(t.trackId||0,8),s(n,12,16),n.writeUInt32BE(t.duration||0,16),s(n,20,28),n.writeUInt16BE(t.layer||0,28),n.writeUInt16BE(t.alternateGroup||0,30),n.writeUInt16BE(t.volume||0,32),l(t.matrix,n,36),n.writeUInt32BE(t.trackWidth||0,72),n.writeUInt32BE(t.trackHeight||0,76),exports.tkhd.encode.bytes=80,n},exports.tkhd.decode=function(e,t){return{ctime:g(e=e.slice(t),0),mtime:g(e,4),trackId:e.readUInt32BE(8),duration:e.readUInt32BE(16),layer:e.readUInt16BE(28),alternateGroup:e.readUInt16BE(30),volume:e.readUInt16BE(32),matrix:p(e.slice(36,72)),trackWidth:e.readUInt32BE(72),trackHeight:e.readUInt32BE(76)}},exports.tkhd.encodingLength=function(e){return 80},exports.mdhd={},exports.mdhd.encode=function(t,n,r){return 1===t.version?(n=n?n.slice(r):e.alloc(32),d(t.ctime||new Date,n,0),d(t.mtime||new Date,n,8),n.writeUInt32BE(t.timeScale||0,16),n.writeUIntBE(t.duration||0,20,6),n.writeUInt16BE(t.language||0,28),n.writeUInt16BE(t.quality||0,30),exports.mdhd.encode.bytes=32,n):(n=n?n.slice(r):e.alloc(20),c(t.ctime||new Date,n,0),c(t.mtime||new Date,n,4),n.writeUInt32BE(t.timeScale||0,8),n.writeUInt32BE(t.duration||0,12),n.writeUInt16BE(t.language||0,16),n.writeUInt16BE(t.quality||0,18),exports.mdhd.encode.bytes=20,n)},exports.mdhd.decode=function(e,t,n){return e=e.slice(t),n-t!=20?{ctime:h(e,0),mtime:h(e,8),timeScale:e.readUInt32BE(16),duration:e.readUIntBE(20,6),language:e.readUInt16BE(28),quality:e.readUInt16BE(30)}:{ctime:g(e,0),mtime:g(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),language:e.readUInt16BE(16),quality:e.readUInt16BE(18)}},exports.mdhd.encodingLength=function(e){return 1===e.version?32:20},exports.vmhd={},exports.vmhd.encode=function(t,n,r){(n=n?n.slice(r):e.alloc(8)).writeUInt16BE(t.graphicsMode||0,0);var o=t.opcolor||[0,0,0];return n.writeUInt16BE(o[0],2),n.writeUInt16BE(o[1],4),n.writeUInt16BE(o[2],6),exports.vmhd.encode.bytes=8,n},exports.vmhd.decode=function(e,t){return{graphicsMode:(e=e.slice(t)).readUInt16BE(0),opcolor:[e.readUInt16BE(2),e.readUInt16BE(4),e.readUInt16BE(6)]}},exports.vmhd.encodingLength=function(e){return 8},exports.smhd={},exports.smhd.encode=function(t,n,r){return(n=n?n.slice(r):e.alloc(4)).writeUInt16BE(t.balance||0,0),s(n,2,4),exports.smhd.encode.bytes=4,n},exports.smhd.decode=function(e,t){return{balance:(e=e.slice(t)).readUInt16BE(0)}},exports.smhd.encodingLength=function(e){return 4},exports.stsd={},exports.stsd.encode=function(n,r,o){r=r?r.slice(o):e.alloc(exports.stsd.encodingLength(n));var i=n.entries||[];r.writeUInt32BE(i.length,0);for(var s=4,c=0;c<i.length;c++){var d=i[c];t.encode(d,r,s),s+=t.encode.bytes}return exports.stsd.encode.bytes=s,r},exports.stsd.decode=function(e,n,r){for(var o=(e=e.slice(n)).readUInt32BE(0),i=new Array(o),s=4,c=0;c<o;c++){var d=t.decode(e,s,r);i[c]=d,s+=d.length}return{entries:i}},exports.stsd.encodingLength=function(e){var n=4;if(!e.entries)return n;for(var r=0;r<e.entries.length;r++)n+=t.encodingLength(e.entries[r]);return n},exports.avc1=exports.VisualSampleEntry={},exports.VisualSampleEntry.encode=function(n,r,o){s(r=r?r.slice(o):e.alloc(exports.VisualSampleEntry.encodingLength(n)),0,6),r.writeUInt16BE(n.dataReferenceIndex||0,6),s(r,8,24),r.writeUInt16BE(n.width||0,24),r.writeUInt16BE(n.height||0,26),r.writeUInt32BE(n.hResolution||4718592,28),r.writeUInt32BE(n.vResolution||4718592,32),s(r,36,40),r.writeUInt16BE(n.frameCount||1,40);var i=n.compressorName||"",c=Math.min(i.length,31);r.writeUInt8(c,42),r.write(i,43,c,"utf8"),r.writeUInt16BE(n.depth||24,74),r.writeInt16BE(-1,76);var d=78;(n.children||[]).forEach(function(e){t.encode(e,r,d),d+=t.encode.bytes}),exports.VisualSampleEntry.encode.bytes=d},exports.VisualSampleEntry.decode=function(e,n,r){e=e.slice(n);for(var o=r-n,i=Math.min(e.readUInt8(42),31),s={dataReferenceIndex:e.readUInt16BE(6),width:e.readUInt16BE(24),height:e.readUInt16BE(26),hResolution:e.readUInt32BE(28),vResolution:e.readUInt32BE(32),frameCount:e.readUInt16BE(40),compressorName:e.toString("utf8",43,43+i),depth:e.readUInt16BE(74),children:[]},c=78;o-c>=8;){var d=t.decode(e,c,o);s.children.push(d),s[d.type]=d,c+=d.length}return s},exports.VisualSampleEntry.encodingLength=function(e){var n=78;return(e.children||[]).forEach(function(e){n+=t.encodingLength(e)}),n},exports.avcC={},exports.avcC.encode=function(t,n,r){n=n?n.slice(r):e.alloc(t.buffer.length),t.buffer.copy(n),exports.avcC.encode.bytes=t.buffer.length},exports.avcC.decode=function(t,n,r){return{mimeCodec:(t=t.slice(n,r)).toString("hex",1,4),buffer:e.from(t)}},exports.avcC.encodingLength=function(e){return e.buffer.length},exports.mp4a=exports.AudioSampleEntry={},exports.AudioSampleEntry.encode=function(n,r,o){s(r=r?r.slice(o):e.alloc(exports.AudioSampleEntry.encodingLength(n)),0,6),r.writeUInt16BE(n.dataReferenceIndex||0,6),s(r,8,16),r.writeUInt16BE(n.channelCount||2,16),r.writeUInt16BE(n.sampleSize||16,18),s(r,20,24),r.writeUInt32BE(n.sampleRate||0,24);var i=28;(n.children||[]).forEach(function(e){t.encode(e,r,i),i+=t.encode.bytes}),exports.AudioSampleEntry.encode.bytes=i},exports.AudioSampleEntry.decode=function(e,n,r){for(var o=r-n,i={dataReferenceIndex:(e=e.slice(n,r)).readUInt16BE(6),channelCount:e.readUInt16BE(16),sampleSize:e.readUInt16BE(18),sampleRate:e.readUInt32BE(24),children:[]},s=28;o-s>=8;){var c=t.decode(e,s,o);i.children.push(c),i[c.type]=c,s+=c.length}return i},exports.AudioSampleEntry.encodingLength=function(e){var n=28;return(e.children||[]).forEach(function(e){n+=t.encodingLength(e)}),n},exports.esds={},exports.esds.encode=function(t,n,r){n=n?n.slice(r):e.alloc(t.buffer.length),t.buffer.copy(n,0),exports.esds.encode.bytes=t.buffer.length},exports.esds.decode=function(t,r,o){t=t.slice(r,o);var i=n.Descriptor.decode(t,0,t.length),s=("ESDescriptor"===i.tagName?i:{}).DecoderConfigDescriptor||{},c=s.oti||0,d=s.DecoderSpecificInfo,a=d?(248&d.buffer.readUInt8(0))>>3:0,u=null;return c&&(u=c.toString(16),a&&(u+="."+a)),{mimeCodec:u,buffer:e.from(t.slice(0))}},exports.esds.encodingLength=function(e){return e.buffer.length},exports.stsz={},exports.stsz.encode=function(t,n,r){var o=t.entries||[];(n=n?n.slice(r):e.alloc(exports.stsz.encodingLength(t))).writeUInt32BE(0,0),n.writeUInt32BE(o.length,4);for(var i=0;i<o.length;i++)n.writeUInt32BE(o[i],4*i+8);return exports.stsz.encode.bytes=8+4*o.length,n},exports.stsz.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=e.readUInt32BE(4),o=new Array(r),i=0;i<r;i++)o[i]=0===n?e.readUInt32BE(4*i+8):n;return{entries:o}},exports.stsz.encodingLength=function(e){return 8+4*e.entries.length},exports.stss=exports.stco={},exports.stco.encode=function(t,n,r){var o=t.entries||[];(n=n?n.slice(r):e.alloc(exports.stco.encodingLength(t))).writeUInt32BE(o.length,0);for(var i=0;i<o.length;i++)n.writeUInt32BE(o[i],4*i+4);return exports.stco.encode.bytes=4+4*o.length,n},exports.stco.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),o=0;o<n;o++)r[o]=e.readUInt32BE(4*o+4);return{entries:r}},exports.stco.encodingLength=function(e){return 4+4*e.entries.length},exports.co64={},exports.co64.encode=function(t,n,o){var i=t.entries||[];(n=n?n.slice(o):e.alloc(exports.co64.encodingLength(t))).writeUInt32BE(i.length,0);for(var s=0;s<i.length;s++)r.encode(i[s],n,8*s+4);return exports.co64.encode.bytes=4+8*i.length,n},exports.co64.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),o=new Array(n),i=0;i<n;i++)o[i]=r.decode(e,8*i+4);return{entries:o}},exports.co64.encodingLength=function(e){return 4+8*e.entries.length},exports.stts={},exports.stts.encode=function(t,n,r){var o=t.entries||[];(n=n?n.slice(r):e.alloc(exports.stts.encodingLength(t))).writeUInt32BE(o.length,0);for(var i=0;i<o.length;i++){var s=8*i+4;n.writeUInt32BE(o[i].count||0,s),n.writeUInt32BE(o[i].duration||0,s+4)}return exports.stts.encode.bytes=4+8*t.entries.length,n},exports.stts.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),o=0;o<n;o++){var i=8*o+4;r[o]={count:e.readUInt32BE(i),duration:e.readUInt32BE(i+4)}}return{entries:r}},exports.stts.encodingLength=function(e){return 4+8*e.entries.length},exports.ctts={},exports.ctts.encode=function(t,n,r){var o=t.entries||[];(n=n?n.slice(r):e.alloc(exports.ctts.encodingLength(t))).writeUInt32BE(o.length,0);for(var i=0;i<o.length;i++){var s=8*i+4;n.writeUInt32BE(o[i].count||0,s),n.writeUInt32BE(o[i].compositionOffset||0,s+4)}return exports.ctts.encode.bytes=4+8*o.length,n},exports.ctts.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),o=0;o<n;o++){var i=8*o+4;r[o]={count:e.readUInt32BE(i),compositionOffset:e.readInt32BE(i+4)}}return{entries:r}},exports.ctts.encodingLength=function(e){return 4+8*e.entries.length},exports.stsc={},exports.stsc.encode=function(t,n,r){var o=t.entries||[];(n=n?n.slice(r):e.alloc(exports.stsc.encodingLength(t))).writeUInt32BE(o.length,0);for(var i=0;i<o.length;i++){var s=12*i+4;n.writeUInt32BE(o[i].firstChunk||0,s),n.writeUInt32BE(o[i].samplesPerChunk||0,s+4),n.writeUInt32BE(o[i].sampleDescriptionId||0,s+8)}return exports.stsc.encode.bytes=4+12*o.length,n},exports.stsc.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),o=0;o<n;o++){var i=12*o+4;r[o]={firstChunk:e.readUInt32BE(i),samplesPerChunk:e.readUInt32BE(i+4),sampleDescriptionId:e.readUInt32BE(i+8)}}return{entries:r}},exports.stsc.encodingLength=function(e){return 4+12*e.entries.length},exports.dref={},exports.dref.encode=function(t,n,r){n=n?n.slice(r):e.alloc(exports.dref.encodingLength(t));var o=t.entries||[];n.writeUInt32BE(o.length,0);for(var i=4,s=0;s<o.length;s++){var c=o[s],d=(c.buf?c.buf.length:0)+4+4;n.writeUInt32BE(d,i),i+=4,n.write(c.type,i,4,"ascii"),i+=4,c.buf&&(c.buf.copy(n,i),i+=c.buf.length)}return exports.dref.encode.bytes=i,n},exports.dref.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),o=4,i=0;i<n;i++){var s=e.readUInt32BE(o),c=e.toString("ascii",o+4,o+8),d=e.slice(o+8,o+s);o+=s,r[i]={type:c,buf:d}}return{entries:r}},exports.dref.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var n=0;n<e.entries.length;n++){var r=e.entries[n].buf;t+=(r?r.length:0)+4+4}return t},exports.elst={},exports.elst.encode=function(t,n,r){var o=t.entries||[];(n=n?n.slice(r):e.alloc(exports.elst.encodingLength(t))).writeUInt32BE(o.length,0);for(var i=0;i<o.length;i++){var s=12*i+4;n.writeUInt32BE(o[i].trackDuration||0,s),n.writeUInt32BE(o[i].mediaTime||0,s+4),a(o[i].mediaRate||0,n,s+8)}return exports.elst.encode.bytes=4+12*o.length,n},exports.elst.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=new Array(n),o=0;o<n;o++){var i=12*o+4;r[o]={trackDuration:e.readUInt32BE(i),mediaTime:e.readInt32BE(i+4),mediaRate:x(e,i+8)}}return{entries:r}},exports.elst.encodingLength=function(e){return 4+12*e.entries.length},exports.hdlr={},exports.hdlr.encode=function(t,n,r){n=n?n.slice(r):e.alloc(exports.hdlr.encodingLength(t));var o=21+(t.name||"").length;return n.fill(0,0,o),n.write(t.handlerType||"",4,4,"ascii"),f(t.name||"",n,20),exports.hdlr.encode.bytes=o,n},exports.hdlr.decode=function(e,t,n){return{handlerType:(e=e.slice(t)).toString("ascii",4,8),name:E(e,20,n)}},exports.hdlr.encodingLength=function(e){return 21+(e.name||"").length},exports.mehd={},exports.mehd.encode=function(t,n,r){return(n=n?n.slice(r):e.alloc(4)).writeUInt32BE(t.fragmentDuration||0,0),exports.mehd.encode.bytes=4,n},exports.mehd.decode=function(e,t){return{fragmentDuration:(e=e.slice(t)).readUInt32BE(0)}},exports.mehd.encodingLength=function(e){return 4},exports.trex={},exports.trex.encode=function(t,n,r){return(n=n?n.slice(r):e.alloc(20)).writeUInt32BE(t.trackId||0,0),n.writeUInt32BE(t.defaultSampleDescriptionIndex||0,4),n.writeUInt32BE(t.defaultSampleDuration||0,8),n.writeUInt32BE(t.defaultSampleSize||0,12),n.writeUInt32BE(t.defaultSampleFlags||0,16),exports.trex.encode.bytes=20,n},exports.trex.decode=function(e,t){return{trackId:(e=e.slice(t)).readUInt32BE(0),defaultSampleDescriptionIndex:e.readUInt32BE(4),defaultSampleDuration:e.readUInt32BE(8),defaultSampleSize:e.readUInt32BE(12),defaultSampleFlags:e.readUInt32BE(16)}},exports.trex.encodingLength=function(e){return 20},exports.mfhd={},exports.mfhd.encode=function(t,n,r){return(n=n?n.slice(r):e.alloc(4)).writeUInt32BE(t.sequenceNumber||0,0),exports.mfhd.encode.bytes=4,n},exports.mfhd.decode=function(e,t){return{sequenceNumber:e.readUInt32BE(0)}},exports.mfhd.encodingLength=function(e){return 4},exports.tfhd={},exports.tfhd.encode=function(t,n,r){return(n=n?n.slice(r):e.alloc(4)).writeUInt32BE(t.trackId,0),exports.tfhd.encode.bytes=4,n},exports.tfhd.decode=function(e,t){},exports.tfhd.encodingLength=function(e){return 4},exports.tfdt={},exports.tfdt.encode=function(t,n,r){return(n=n?n.slice(r):e.alloc(4)).writeUInt32BE(t.baseMediaDecodeTime||0,0),exports.tfdt.encode.bytes=4,n},exports.tfdt.decode=function(e,t){},exports.tfdt.encodingLength=function(e){return 4},exports.trun={},exports.trun.encode=function(t,n,r){(n=n?n.slice(r):e.alloc(8+16*t.entries.length)).writeUInt32BE(t.entries.length,0),n.writeInt32BE(t.dataOffset,4);for(var o=8,i=0;i<t.entries.length;i++){var s=t.entries[i];n.writeUInt32BE(s.sampleDuration,o),o+=4,n.writeUInt32BE(s.sampleSize,o),o+=4,n.writeUInt32BE(s.sampleFlags,o),o+=4,0===(t.version||0)?n.writeUInt32BE(s.sampleCompositionTimeOffset,o):n.writeInt32BE(s.sampleCompositionTimeOffset,o),o+=4}exports.trun.encode.bytes=o},exports.trun.decode=function(e,t){},exports.trun.encodingLength=function(e){return 8+16*e.entries.length},exports.mdat={},exports.mdat.encode=function(e,t,n){e.buffer?(e.buffer.copy(t,n),exports.mdat.encode.bytes=e.buffer.length):exports.mdat.encode.bytes=exports.mdat.encodingLength(e)},exports.mdat.decode=function(t,n,r){return{buffer:e.from(t.slice(n,r))}},exports.mdat.encodingLength=function(e){return e.buffer?e.buffer.length:e.contentLength};
},{"./index":"AwrK","./descriptor":"e1TV","uint64be":"nM53","buffer":"aMB2"}],"AwrK":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,t=require("uint64be"),n=require("./boxes"),r=4294967295,s=exports,o=exports.containers={moov:["mvhd","meta","traks","mvex"],trak:["tkhd","tref","trgr","edts","meta","mdia","udta"],edts:["elst"],mdia:["mdhd","hdlr","elng","minf"],minf:["vmhd","smhd","hmhd","sthd","nmhd","dinf","stbl"],dinf:["dref"],stbl:["stsd","stts","ctts","cslg","stsc","stsz","stz2","stco","co64","stss","stsh","padb","stdp","sdtp","sbgps","sgpds","subss","saizs","saios"],mvex:["mehd","trexs","leva"],moof:["mfhd","meta","trafs"],traf:["tfhd","tfdt","trun","sbgps","sgpds","subss","saizs","saios","meta"]};s.encode=function(t,n,r){return s.encodingLength(t),r=r||0,n=n||e.alloc(t.length),s._encode(t,n,r)},s._encode=function(e,f,d){var i=e.type,h=e.length;h>r&&(h=1),f.writeUInt32BE(h,d),f.write(e.type,d+4,4,"ascii");var a=d+8;if(1===h&&(t.encode(e.length,f,a),a+=8),n.fullBoxes[i]&&(f.writeUInt32BE(e.flags||0,a),f.writeUInt8(e.version||0,a),a+=4),o[i])o[i].forEach(function(t){if(5===t.length){var n=e[t]||[];t=t.substr(0,4),n.forEach(function(e){s._encode(e,f,a),a+=s.encode.bytes})}else e[t]&&(s._encode(e[t],f,a),a+=s.encode.bytes)}),e.otherBoxes&&e.otherBoxes.forEach(function(e){s._encode(e,f,a),a+=s.encode.bytes});else if(n[i]){var c=n[i].encode;c(e,f,a),a+=c.bytes}else{if(!e.buffer)throw new Error("Either `type` must be set to a known type (not'"+i+"') or `buffer` must be set");e.buffer.copy(f,a),a+=e.buffer.length}return s.encode.bytes=a-d,f},s.readHeaders=function(e,r,s){if(r=r||0,(s=s||e.length)-r<8)return 8;var o,f,d=e.readUInt32BE(r),i=e.toString("ascii",r+4,r+8),h=r+8;if(1===d){if(s-r<16)return 16;d=t.decode(e,h),h+=8}return n.fullBoxes[i]&&(o=e.readUInt8(h),f=16777215&e.readUInt32BE(h),h+=4),{length:d,headersLen:h-r,contentLen:d-(h-r),type:i,version:o,flags:f}},s.decode=function(e,t,n){t=t||0,n=n||e.length;var r=s.readHeaders(e,t,n);if(!r||r.length>n-t)throw new Error("Data too short");return s.decodeWithoutHeaders(r,e,t+r.headersLen,t+r.length)},s.decodeWithoutHeaders=function(t,r,f,d){f=f||0,d=d||r.length;var i=t.type,h={};if(o[i]){h.otherBoxes=[];for(var a=o[i],c=f;d-c>=8;){var u=s.decode(r,c,d);if(c+=u.length,a.indexOf(u.type)>=0)h[u.type]=u;else if(a.indexOf(u.type+"s")>=0){var l=u.type+"s";(h[l]=h[l]||[]).push(u)}else h.otherBoxes.push(u)}}else if(n[i]){h=(0,n[i].decode)(r,f,d)}else h.buffer=e.from(r.slice(f,d));return h.length=t.length,h.contentLen=t.contentLen,h.type=t.type,h.version=t.version,h.flags=t.flags,h},s.encodingLength=function(e){var t=e.type,f=8;if(n.fullBoxes[t]&&(f+=4),o[t])o[t].forEach(function(t){if(5===t.length){var n=e[t]||[];t=t.substr(0,4),n.forEach(function(e){e.type=t,f+=s.encodingLength(e)})}else if(e[t]){var r=e[t];r.type=t,f+=s.encodingLength(r)}}),e.otherBoxes&&e.otherBoxes.forEach(function(e){f+=s.encodingLength(e)});else if(n[t])f+=n[t].encodingLength(e);else{if(!e.buffer)throw new Error("Either `type` must be set to a known type (not'"+t+"') or `buffer` must be set");f+=e.buffer.length}return f>r&&(f+=8),e.length=f,f};
},{"uint64be":"nM53","./boxes":"uiQc","buffer":"aMB2"}],"UTO0":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer,i=require("readable-stream"),s=require("next-event"),e=require("mp4-box-encoding"),r=t.alloc(0);class h extends i.Writable{constructor(t){super(t),this.destroyed=!1,this._pending=0,this._missing=0,this._ignoreEmpty=!1,this._buf=null,this._str=null,this._cb=null,this._ondrain=null,this._writeBuffer=null,this._writeCb=null,this._ondrain=null,this._kick()}destroy(t){this.destroyed||(this.destroyed=!0,t&&this.emit("error",t),this.emit("close"))}_write(t,i,s){if(!this.destroyed){for(var e=!this._str||!this._str._writableState.needDrain;t.length&&!this.destroyed;){if(!this._missing&&!this._ignoreEmpty)return this._writeBuffer=t,void(this._writeCb=s);var h=t.length<this._missing?t.length:this._missing;if(this._buf?t.copy(this._buf,this._buf.length-this._missing):this._str&&(e=this._str.write(h===t.length?t:t.slice(0,h))),this._missing-=h,!this._missing){var n=this._buf,_=this._cb,o=this._str;this._buf=this._cb=this._str=this._ondrain=null,e=!0,this._ignoreEmpty=!1,o&&o.end(),_&&_(n)}t=h===t.length?r:t.slice(h)}if(this._pending&&!this._missing)return this._writeBuffer=t,void(this._writeCb=s);e?s():this._ondrain(s)}}_buffer(i,s){this._missing=i,this._buf=t.alloc(i),this._cb=s}_stream(t,i){return this._missing=t,this._str=new n(this),this._ondrain=s(this._str,"drain"),this._pending++,this._str.on("end",()=>{this._pending--,this._kick()}),this._cb=i,this._str}_readBox(){const i=(s,r)=>{this._buffer(s,s=>{r=r?t.concat([r,s]):s;var h=e.readHeaders(r);"number"==typeof h?i(h-r.length,r):(this._pending++,this._headers=h,this.emit("box",h))})};i(8)}stream(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=this._headers;return this._headers=null,this._stream(t.contentLen,null)}decode(t){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var i=this._headers;this._headers=null,this._buffer(i.contentLen,s=>{var r=e.decodeWithoutHeaders(i,s);t(r),this._pending--,this._kick()})}ignore(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=this._headers;this._headers=null,this._missing=t.contentLen,0===this._missing&&(this._ignoreEmpty=!0),this._cb=(()=>{this._pending--,this._kick()})}_kick(){if(!this._pending&&(this._buf||this._str||this._readBox(),this._writeBuffer)){var t=this._writeCb,i=this._writeBuffer;this._writeBuffer=null,this._writeCb=null,this._write(i,null,t)}}}class n extends i.PassThrough{constructor(t){super(),this._parent=t,this.destroyed=!1}destroy(t){this.destroyed||(this.destroyed=!0,this._parent.destroy(t),t&&this.emit("error",t),this.emit("close"))}}module.exports=h;
},{"readable-stream":"YvpY","next-event":"wxH3","mp4-box-encoding":"AwrK","buffer":"aMB2"}],"D4og":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var process = require("process");
var e=require("buffer").Buffer,t=require("process"),s=require("readable-stream"),r=require("mp4-box-encoding");function i(){}class a extends s.Readable{constructor(e){super(e),this.destroyed=!1,this._finalized=!1,this._reading=!1,this._stream=null,this._drain=null,this._want=!1,this._onreadable=(()=>{this._want&&(this._want=!1,this._read())}),this._onend=(()=>{this._stream=null})}mdat(e,t){this.mediaData(e,t)}mediaData(e,t){var s=new h(this);return this.box({type:"mdat",contentLength:e,encodeBufferLen:8,stream:s},t),s}box(s,a){if(a||(a=i),this.destroyed)return a(new Error("Encoder is destroyed"));var h;if(s.encodeBufferLen&&(h=e.alloc(s.encodeBufferLen)),s.stream)s.buffer=null,h=r.encode(s,h),this.push(h),this._stream=s.stream,this._stream.on("readable",this._onreadable),this._stream.on("end",this._onend),this._stream.on("end",a),this._forward();else{if(h=r.encode(s,h),this.push(h))return t.nextTick(a);this._drain=a}}destroy(e){if(!this.destroyed){if(this.destroyed=!0,this._stream&&this._stream.destroy&&this._stream.destroy(),this._stream=null,this._drain){var t=this._drain;this._drain=null,t(e)}e&&this.emit("error",e),this.emit("close")}}finalize(){this._finalized=!0,this._stream||this._drain||this.push(null)}_forward(){if(this._stream)for(;!this.destroyed;){var e=this._stream.read();if(!e)return void(this._want=!!this._stream);if(!this.push(e))return}}_read(){if(!this._reading&&!this.destroyed){if(this._reading=!0,this._stream&&this._forward(),this._drain){var e=this._drain;this._drain=null,e()}this._reading=!1,this._finalized&&this.push(null)}}}class h extends s.PassThrough{constructor(e){super(),this._parent=e,this.destroyed=!1}destroy(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}module.exports=a;
},{"readable-stream":"YvpY","mp4-box-encoding":"AwrK","buffer":"aMB2","process":"g5IB"}],"e5kl":[function(require,module,exports) {
const e=require("./decode"),o=require("./encode");exports.decode=(o=>new e(o)),exports.encode=(e=>new o(e));
},{"./decode":"UTO0","./encode":"D4og"}],"CjCt":[function(require,module,exports) {
const{Writable:t,PassThrough:e}=require("readable-stream");class s extends t{constructor(t,e={}){super(e),this.destroyed=!1,this._queue=[],this._position=t||0,this._cb=null,this._buffer=null,this._out=null}_write(t,e,s){let i=!0;for(;;){if(this.destroyed)return;if(0===this._queue.length)return this._buffer=t,void(this._cb=s);this._buffer=null;var r=this._queue[0];const e=Math.max(r.start-this._position,0),n=r.end-this._position;if(e>=t.length)return this._position+=t.length,s(null);let h;if(n>t.length){this._position+=t.length,h=0===e?t:t.slice(e),i=r.stream.write(h)&&i;break}this._position+=n,h=0===e&&n===t.length?t:t.slice(e,n),i=r.stream.write(h)&&i,r.last&&r.stream.end(),t=t.slice(n),this._queue.shift()}i?s(null):r.stream.once("drain",s.bind(null,null))}slice(t){if(this.destroyed)return null;Array.isArray(t)||(t=[t]);const s=new e;return t.forEach((e,i)=>{this._queue.push({start:e.start,end:e.end,stream:s,last:i===t.length-1})}),this._buffer&&this._write(this._buffer,null,this._cb),s}destroy(t){this.destroyed||(this.destroyed=!0,t&&this.emit("error",t))}}module.exports=s;
},{"readable-stream":"YvpY"}],"vIBc":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;const t=require("binary-search"),s=require("events"),r=require("mp4-stream"),i=require("mp4-box-encoding"),n=require("range-slice-stream"),a=4096;class o extends s{constructor(e){super(),this._tracks=[],this._file=e,this._decoder=null,this._findMoov(0)}_findMoov(e){this._decoder&&this._decoder.destroy();let t=0;this._decoder=r.decode();const s=this._file.createReadStream({start:e});s.pipe(this._decoder);const i=r=>{"moov"===r.type?(this._decoder.removeListener("box",i),this._decoder.decode(e=>{s.destroy();try{this._processMoov(e)}catch(t){t.message=`Cannot parse mp4 file: ${t.message}`,this.emit("error",t)}})):r.length<a?(t+=r.length,this._decoder.ignore()):(this._decoder.removeListener("box",i),t+=r.length,s.destroy(),this._decoder.destroy(),this._findMoov(e+t))};this._decoder.on("box",i)}_processMoov(t){const s=t.traks;this._tracks=[],this._hasVideo=!1,this._hasAudio=!1;for(let e=0;e<s.length;e++){const i=s[e],n=i.mdia.minf.stbl,a=n.stsd.entries[0],o=i.mdia.hdlr.handlerType;let m,h;if("vide"===o&&"avc1"===a.type){if(this._hasVideo)continue;this._hasVideo=!0,m="avc1",a.avcC&&(m+=`.${a.avcC.mimeCodec}`),h=`video/mp4; codecs="${m}"`}else{if("soun"!==o||"mp4a"!==a.type)continue;if(this._hasAudio)continue;this._hasAudio=!0,m="mp4a",a.esds&&a.esds.mimeCodec&&(m+=`.${a.esds.mimeCodec}`),h=`audio/mp4; codecs="${m}"`}const f=[];let l=0,u=0,p=0,_=0,g=0,v=0;const S=new d(n.stts.entries);let k=null;n.ctts&&(k=new d(n.ctts.entries));let y=0;for(;;){var r=n.stsc.entries[g];const e=n.stsz.entries[l],t=S.value.duration,s=k?k.value.compositionOffset:0;let i=!0;n.stss&&(i=n.stss.entries[y]===l+1);const a=n.stco||n.co64;if(f.push({size:e,duration:t,dts:v,presentationOffset:s,sync:i,offset:_+a.entries[p]}),++l>=n.stsz.entries.length)break;if(_+=e,++u>=r.samplesPerChunk){u=0,_=0,p++;const e=n.stsc.entries[g+1];e&&p+1>=e.firstChunk&&g++}v+=t,S.inc(),k&&k.inc(),i&&y++}i.mdia.mdhd.duration=0,i.tkhd.duration=0;const b=r.sampleDescriptionId,x={type:"moov",mvhd:t.mvhd,traks:[{tkhd:i.tkhd,mdia:{mdhd:i.mdia.mdhd,hdlr:i.mdia.hdlr,elng:i.mdia.elng,minf:{vmhd:i.mdia.minf.vmhd,smhd:i.mdia.minf.smhd,dinf:i.mdia.minf.dinf,stbl:{stsd:n.stsd,stts:c(),ctts:c(),stsc:c(),stsz:c(),stco:c(),stss:c()}}}}],mvex:{mehd:{fragmentDuration:t.mvhd.duration},trexs:[{trackId:i.tkhd.trackId,defaultSampleDescriptionIndex:b,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0}]}};this._tracks.push({fragmentSequence:1,trackId:i.tkhd.trackId,timeScale:i.mdia.mdhd.timeScale,samples:f,currSample:null,currTime:null,moov:x,mime:h})}if(0===this._tracks.length)return void this.emit("error",new Error("no playable tracks"));t.mvhd.duration=0,this._ftyp={type:"ftyp",brand:"iso5",brandVersion:0,compatibleBrands:["iso5"]};const n=i.encode(this._ftyp),a=this._tracks.map(t=>{const s=i.encode(t.moov);return{mime:t.mime,init:e.concat([n,s])}});this.emit("ready",a)}seek(e){if(!this._tracks)throw new Error("Not ready yet; wait for 'ready' event");this._fileStream&&(this._fileStream.destroy(),this._fileStream=null);let t=-1;if(this._tracks.map((s,i)=>{s.outStream&&s.outStream.destroy(),s.inStream&&(s.inStream.destroy(),s.inStream=null);const n=s.outStream=r.encode(),a=this._generateFragment(i,e);if(!a)return n.finalize();(-1===t||a.ranges[0].start<t)&&(t=a.ranges[0].start);const o=e=>{n.destroyed||n.box(e.moof,t=>{if(t)return this.emit("error",t);if(n.destroyed)return;s.inStream.slice(e.ranges).pipe(n.mediaData(e.length,e=>{if(e)return this.emit("error",e);if(n.destroyed)return;const t=this._generateFragment(i);if(!t)return n.finalize();o(t)}))})};o(a)}),t>=0){const e=this._fileStream=this._file.createReadStream({start:t});this._tracks.forEach(s=>{s.inStream=new n(t,{highWaterMark:1e7}),e.pipe(s.inStream)})}return this._tracks.map(e=>e.outStream)}_findSampleBefore(e,s){const r=this._tracks[e],i=Math.floor(r.timeScale*s);let n=t(r.samples,i,(e,t)=>{return e.dts+e.presentationOffset-t});for(-1===n?n=0:n<0&&(n=-n-2);!r.samples[n].sync;)n--;return n}_generateFragment(e,t){const s=this._tracks[e];let r;if((r=void 0!==t?this._findSampleBefore(e,t):s.currSample)>=s.samples.length)return null;const i=s.samples[r].dts;let n=0;const a=[];for(var o=r;o<s.samples.length;o++){const e=s.samples[o];if(e.sync&&e.dts-i>=s.timeScale*m)break;n+=e.size;const t=a.length-1;t<0||a[t].end!==e.offset?a.push({start:e.offset,end:e.offset+e.size}):a[t].end+=e.size}return s.currSample=o,{moof:this._generateMoof(e,r,o),ranges:a,length:n}}_generateMoof(e,t,s){const r=this._tracks[e],n=[];let a=0;for(let i=t;i<s;i++){const e=r.samples[i];e.presentationOffset<0&&(a=1),n.push({sampleDuration:e.duration,sampleSize:e.size,sampleFlags:e.sync?33554432:16842752,sampleCompositionTimeOffset:e.presentationOffset})}const o={type:"moof",mfhd:{sequenceNumber:r.fragmentSequence++},trafs:[{tfhd:{flags:131072,trackId:r.trackId},tfdt:{baseMediaDecodeTime:r.samples[t].dts},trun:{flags:3841,dataOffset:8,entries:n,version:a}}]};return o.trafs[0].trun.dataOffset+=i.encodingLength(o),o}}class d{constructor(e,t){this._entries=e,this._countName=t||"count",this._index=0,this._offset=0,this.value=this._entries[0]}inc(){this._offset++,this._offset>=this._entries[this._index][this._countName]&&(this._index++,this._offset=0),this.value=this._entries[this._index]}}function c(){return{version:0,flags:0,entries:[]}}const m=1;module.exports=o;
},{"binary-search":"f7tK","events":"wIHY","mp4-stream":"e5kl","mp4-box-encoding":"AwrK","range-slice-stream":"CjCt","buffer":"aMB2"}],"xxkK":[function(require,module,exports) {
const e=require("mediasource"),r=require("pump"),t=require("./mp4-remuxer");function i(r,t,s={}){if(!(this instanceof i))return console.warn("don't invoked VideoStream without 'new'"),new i(r,t,s);this.detailedError=null,this._elem=t,this._elemWrapper=new e(t),this._waitingFired=!1,this._trackMeta=null,this._file=r,this._tracks=null,"none"!==this._elem.preload&&this._createMuxer(),this._onError=(()=>{this.detailedError=this._elemWrapper.detailedError,this.destroy()}),this._onWaiting=(()=>{this._waitingFired=!0,this._muxer?this._tracks&&this._pump():this._createMuxer()}),t.autoplay&&(t.preload="auto"),t.addEventListener("waiting",this._onWaiting),t.addEventListener("error",this._onError)}i.prototype={_createMuxer(){this._muxer=new t(this._file),this._muxer.on("ready",e=>{this._tracks=e.map(e=>{const r=this._elemWrapper.createWriteStream(e.mime);r.on("error",e=>{this._elemWrapper.error(e)});const t={muxed:null,mediaSource:r,initFlushed:!1,onInitFlushed:null};return r.write(e.init,e=>{t.initFlushed=!0,t.onInitFlushed&&t.onInitFlushed(e)}),t}),(this._waitingFired||"auto"===this._elem.preload)&&this._pump()}),this._muxer.on("error",e=>{this._elemWrapper.error(e)})},_pump(){const e=this._muxer.seek(this._elem.currentTime,!this._tracks);this._tracks.forEach((t,i)=>{const s=()=>{t.muxed&&(t.muxed.destroy(),t.mediaSource=this._elemWrapper.createWriteStream(t.mediaSource),t.mediaSource.on("error",e=>{this._elemWrapper.error(e)})),t.muxed=e[i],r(t.muxed,t.mediaSource)};t.initFlushed?s():t.onInitFlushed=(e=>{e?this._elemWrapper.error(e):s()})})},destroy(){this.destroyed||(this.destroyed=!0,this._elem.removeEventListener("waiting",this._onWaiting),this._elem.removeEventListener("error",this._onError),this._tracks&&this._tracks.forEach(e=>{e.muxed&&e.muxed.destroy()}),this._elem.src="")}},module.exports=i;
},{"mediasource":"Rndg","pump":"J9x6","./mp4-remuxer":"vIBc"}],"R8KM":[function(require,module,exports) {
exports.render=g,exports.append=w,exports.mime=require("./lib/mime.json");var e=require("debug")("render-media"),n=require("is-ascii"),t=require("mediasource"),r=require("path"),o=require("stream-to-blob-url"),a=require("videostream"),i=[".m4a",".m4b",".m4p",".m4v",".mp4"],d=[".m4v",".mkv",".mp4",".webm"],m=[".m4a",".m4b",".m4p",".mp3"],u=[].concat(d,m),c=[".mov",".ogv"],s=[".aac",".oga",".ogg",".wav",".flac"],l=[".bmp",".gif",".jpeg",".jpg",".png",".svg"],p=[".css",".html",".js",".md",".pdf",".txt"],f=2e8,v="undefined"!=typeof window&&window.MediaSource;function g(e,n,t,o){"function"==typeof t&&(o=t,t={}),t||(t={}),o||(o=function(){}),E(e),y(t),"string"==typeof n&&(n=document.querySelector(n)),b(e,function(o){if(n.nodeName!==o.toUpperCase()){var a=r.extname(e.name).toLowerCase();throw new Error('Cannot render "'+a+'" inside a "'+n.nodeName.toLowerCase()+'" element, expected "'+o+'"')}return"video"!==o&&"audio"!==o||h(n,t),n},t,o)}function w(e,n,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),r||(r=function(){}),E(e),y(t),"string"==typeof n&&(n=document.querySelector(n)),n&&("VIDEO"===n.nodeName||"AUDIO"===n.nodeName))throw new Error("Invalid video/audio node argument. Argument must be root element that video/audio tag will be appended to.");function o(e){var t=document.createElement(e);return n.appendChild(t),t}b(e,function(e){return"video"===e||"audio"===e?function(e){var r=o(e);return h(r,t),n.appendChild(r),r}(e):o(e)},t,function(e,n){e&&n&&n.remove();r(e,n)})}function b(o,m,f,g){var w,b=r.extname(o.name).toLowerCase(),E=0;function y(){return!("number"==typeof o.length&&o.length>f.maxBlobLength)||(e("File length too large for Blob URL approach: %d (max: %d)",o.length,f.maxBlobLength),O(new Error("File length too large for Blob URL approach: "+o.length+" (max: "+f.maxBlobLength+")")),!1)}function h(e){y()&&(w=m(e),L(o,function(e,n){if(e)return O(e);w.addEventListener("error",O),w.addEventListener("loadstart",S),w.addEventListener("canplay",U),w.src=n}))}function S(){w.removeEventListener("loadstart",S),f.autoplay&&w.play()}function U(){w.removeEventListener("canplay",U),g(null,w)}function C(){L(o,function(e,n){if(e)return O(e);".pdf"!==b?((w=m("iframe")).sandbox="allow-forms allow-scripts",w.src=n):((w=m("object")).setAttribute("typemustmatch",!0),w.setAttribute("type","application/pdf"),w.setAttribute("data",n)),g(null,w)})}function O(n){n.message='Error rendering file "'+o.name+'": '+n.message,e(n.message),g(n)}u.indexOf(b)>=0?function(){var n=d.indexOf(b)>=0?"video":"audio";v?i.indexOf(b)>=0?(e("Use `videostream` package for "+o.name),l(),w.addEventListener("error",c),w.addEventListener("loadstart",S),w.addEventListener("canplay",U),a(o,w)):r():u();function r(){e("Use MediaSource API for "+o.name),l(),w.addEventListener("error",s),w.addEventListener("loadstart",S),w.addEventListener("canplay",U);var n=new t(w),r=n.createWriteStream(x(o.name));o.createReadStream().pipe(r),E&&(w.currentTime=E)}function u(){e("Use Blob URL for "+o.name),l(),w.addEventListener("error",O),w.addEventListener("loadstart",S),w.addEventListener("canplay",U),L(o,function(e,n){if(e)return O(e);w.src=n,E&&(w.currentTime=E)})}function c(n){e("videostream error: fallback to MediaSource API: %o",n.message||n),w.removeEventListener("error",c),w.removeEventListener("canplay",U),r()}function s(n){e("MediaSource API error: fallback to Blob URL: %o",n.message||n),y()&&(w.removeEventListener("error",s),w.removeEventListener("canplay",U),u())}function l(){w||(w=m(n)).addEventListener("progress",function(){E=w.currentTime})}}():c.indexOf(b)>=0?h("video"):s.indexOf(b)>=0?h("audio"):l.indexOf(b)>=0?(w=m("img"),L(o,function(e,n){if(e)return O(e);w.src=n,w.alt=o.name,g(null,w)})):p.indexOf(b)>=0?C():function(){e('Unknown file extension "%s" - will attempt to render into iframe',b);var t="";o.createReadStream({start:0,end:1e3}).setEncoding("utf8").on("data",function(e){t+=e}).on("end",function(){n(t)?(e('File extension "%s" appears ascii, so will render.',b),C()):(e('File extension "%s" appears non-ascii, will not render.',b),g(new Error('Unsupported file type "'+b+'": Cannot append to DOM')))}).on("error",g)}()}function L(e,n){var t=r.extname(e.name).toLowerCase();o(e.createReadStream(),exports.mime[t]).then(e=>n(null,e),e=>n(e))}function E(e){if(null==e)throw new Error("file cannot be null or undefined");if("string"!=typeof e.name)throw new Error("missing or invalid file.name property");if("function"!=typeof e.createReadStream)throw new Error("missing or invalid file.createReadStream property")}function x(e){return{".m4a":'audio/mp4; codecs="mp4a.40.5"',".m4b":'audio/mp4; codecs="mp4a.40.5"',".m4p":'audio/mp4; codecs="mp4a.40.5"',".m4v":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".mkv":'video/webm; codecs="avc1.640029, mp4a.40.5"',".mp3":"audio/mpeg",".mp4":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".webm":'video/webm; codecs="vorbis, vp8"'}[r.extname(e).toLowerCase()]}function y(e){null==e.autoplay&&(e.autoplay=!1),null==e.muted&&(e.muted=!1),null==e.controls&&(e.controls=!0),null==e.maxBlobLength&&(e.maxBlobLength=f)}function h(e,n){e.autoplay=!!n.autoplay,e.muted=!!n.muted,e.controls=!!n.controls}
},{"./lib/mime.json":"epzI","debug":"jD9Y","is-ascii":"FgDs","mediasource":"Rndg","path":"sNrv","stream-to-blob-url":"MBwP","videostream":"xxkK"}],"aK8P":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var n=require("buffer").Buffer,e=require("once");module.exports=function(o,r,u){u=e(u);var f=n.alloc(r),c=0;o.on("data",function(n){n.copy(f,c),c+=n.length}).on("end",function(){u(null,f)}).on("error",u)};
},{"once":"Z8tK","buffer":"aMB2"}],"FFeS":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?o(t):r}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=require("debug")("webtorrent:file-stream"),a=require("readable-stream"),_=function(e){function r(e,n){var o;t(this,r),(o=i(this,s(r).call(this,n))).destroyed=!1,o._torrent=e._torrent;var f=n&&n.start||0,c=n&&n.end&&n.end<e.length?n.end:e.length-1,u=e._torrent.pieceLength;return o._startPiece=(f+e.offset)/u|0,o._endPiece=(c+e.offset)/u|0,o._piece=o._startPiece,o._offset=f+e.offset-o._startPiece*u,o._missing=c-f+1,o._reading=!1,o._notifying=!1,o._criticalLength=Math.min(1048576/u|0,2),o}return f(r,a.Readable),n(r,[{key:"_read",value:function(){this._reading||(this._reading=!0,this._notify())}},{key:"_notify",value:function(){var e=this;if(this._reading&&0!==this._missing){if(!this._torrent.bitfield.get(this._piece))return this._torrent.critical(this._piece,this._piece+this._criticalLength);if(!this._notifying){if(this._notifying=!0,this._torrent.destroyed)return this._destroy(new Error("Torrent removed"));var t=this._piece;this._torrent.store.get(t,function(r,n){if(e._notifying=!1,!e.destroyed){if(u("read %s (length %s) (err %s)",t,n.length,r&&r.message),r)return e._destroy(r);e._offset&&(n=n.slice(e._offset),e._offset=0),e._missing<n.length&&(n=n.slice(0,e._missing)),e._missing-=n.length,u("pushing buffer of length %s",n.length),e._reading=!1,e.push(n),0===e._missing&&e.push(null)}}),this._piece+=1}}}},{key:"destroy",value:function(e){this._destroy(null,e)}},{key:"_destroy",value:function(e,t){this.destroyed||(this.destroyed=!0,this._torrent.destroyed||this._torrent.deselect(this._startPiece,this._endPiece,!0),e&&this.emit("error",e),this.emit("close"),t&&t())}}]),r}();module.exports=_;
},{"debug":"jD9Y","readable-stream":"YvpY"}],"XINP":[function(require,module,exports) {
var process = require("process");
var e=require("process");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=require("events"),l=a.EventEmitter,h=require("readable-stream"),d=h.PassThrough,y=require("end-of-stream"),p=require("path"),m=require("render-media"),_=require("stream-to-blob"),b=require("stream-to-blob-url"),w=require("stream-with-known-length-to-buffer"),g=require("./file-stream"),v=function(t){function r(e,t){var o;n(this,r),(o=i(this,s(r).call(this)))._torrent=e,o._destroyed=!1,o.name=t.name,o.path=t.path,o.length=t.length,o.offset=t.offset,o.done=!1;var u=t.offset,f=u+t.length-1;return o._startPiece=u/o._torrent.pieceLength|0,o._endPiece=f/o._torrent.pieceLength|0,0===o.length&&(o.done=!0,o.emit("done")),o}return f(r,l),o(r,[{key:"select",value:function(e){0!==this.length&&this._torrent.select(this._startPiece,this._endPiece,e)}},{key:"deselect",value:function(){0!==this.length&&this._torrent.deselect(this._startPiece,this._endPiece,!1)}},{key:"createReadStream",value:function(t){var n=this;if(0===this.length){var r=new d;return e.nextTick(function(){r.end()}),r}var o=new g(this,t);return this._torrent.select(o._startPiece,o._endPiece,!0,function(){o._notify()}),y(o,function(){n._destroyed||n._torrent.destroyed||n._torrent.deselect(o._startPiece,o._endPiece,!0)}),o}},{key:"getBuffer",value:function(e){w(this.createReadStream(),this.length,e)}},{key:"getBlob",value:function(e){if("undefined"==typeof window)throw new Error("browser-only method");_(this.createReadStream(),this._getMimeType()).then(function(t){return e(null,t)},function(t){return e(t)})}},{key:"getBlobURL",value:function(e){if("undefined"==typeof window)throw new Error("browser-only method");b(this.createReadStream(),this._getMimeType()).then(function(t){return e(null,t)},function(t){return e(t)})}},{key:"appendTo",value:function(e,t,n){if("undefined"==typeof window)throw new Error("browser-only method");m.append(this,e,t,n)}},{key:"renderTo",value:function(e,t,n){if("undefined"==typeof window)throw new Error("browser-only method");m.render(this,e,t,n)}},{key:"_getMimeType",value:function(){return m.mime[p.extname(this.name).toLowerCase()]}},{key:"_destroy",value:function(){this._destroyed=!0,this._torrent=null}},{key:"downloaded",get:function(){if(!this._torrent.bitfield)return 0;for(var e=this._torrent,t=e.pieces,n=e.bitfield,r=e.pieceLength,o=this._startPiece,i=this._endPiece,u=t[o],s=this.offset%r,f=n.get(o)?r-s:Math.max(r-s-u.missing,0),c=o+1;c<=i;++c){if(n.get(c))f+=r;else f+=r-t[c].missing}return Math.min(f,this.length)}},{key:"progress",get:function(){return this.length?this.downloaded/this.length:0}}]),r}();module.exports=v;
},{"events":"wIHY","readable-stream":"YvpY","end-of-stream":"lPYU","path":"sNrv","render-media":"R8KM","stream-to-blob":"Nbx3","stream-to-blob-url":"MBwP","stream-with-known-length-to-buffer":"aK8P","./file-stream":"FFeS","process":"g5IB"}],"kvDi":[function(require,module,exports) {
function r(r,e){if(!(e>=r.length||e<0)){var n=r.pop();if(e<r.length){var t=r[e];return r[e]=n,t}return n}}module.exports=r;
},{}],"BSvg":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;const t=require("unordered-array-remove"),s=require("bencode"),i=require("bitfield"),n=require("debug")("bittorrent-protocol"),h=require("randombytes"),r=require("speedometer"),d=require("readable-stream"),o=4e5,a=55e3,u=e.from("BitTorrent protocol"),_=e.from([0,0,0,0]),l=e.from([0,0,0,1,0]),p=e.from([0,0,0,1,1]),g=e.from([0,0,0,1,2]),c=e.from([0,0,0,1,3]),f=[0,0,0,0,0,0,0,0],m=[0,0,0,3,9,0,0];class x{constructor(e,t,s,i){this.piece=e,this.offset=t,this.length=s,this.callback=i}}class b extends d.Duplex{constructor(){super(),this._debugId=h(4).toString("hex"),this._debug("new wire"),this.peerId=null,this.peerIdBuffer=null,this.type=null,this.amChoking=!0,this.amInterested=!1,this.peerChoking=!0,this.peerInterested=!1,this.peerPieces=new i(0,{grow:o}),this.peerExtensions={},this.requests=[],this.peerRequests=[],this.extendedMapping={},this.peerExtendedMapping={},this.extendedHandshake={},this.peerExtendedHandshake={},this._ext={},this._nextExt=1,this.uploaded=0,this.downloaded=0,this.uploadSpeed=r(),this.downloadSpeed=r(),this._keepAliveInterval=null,this._timeout=null,this._timeoutMs=0,this.destroyed=!1,this._finished=!1,this._parserSize=0,this._parser=null,this._buffer=[],this._bufferSize=0,this.once("finish",()=>this._onFinish()),this._parseHandshake()}setKeepAlive(e){this._debug("setKeepAlive %s",e),clearInterval(this._keepAliveInterval),!1!==e&&(this._keepAliveInterval=setInterval(()=>{this.keepAlive()},a))}setTimeout(e,t){this._debug("setTimeout ms=%d unref=%s",e,t),this._clearTimeout(),this._timeoutMs=e,this._timeoutUnref=!!t,this._updateTimeout()}destroy(){this.destroyed||(this.destroyed=!0,this._debug("destroy"),this.emit("close"),this.end())}end(...e){this._debug("end"),this._onUninterested(),this._onChoke(),super.end(...e)}use(e){const t=e.prototype.name;if(!t)throw new Error('Extension class requires a "name" property on the prototype');this._debug("use extension.name=%s",t);const s=this._nextExt,i=new e(this);function n(){}"function"!=typeof i.onHandshake&&(i.onHandshake=n),"function"!=typeof i.onExtendedHandshake&&(i.onExtendedHandshake=n),"function"!=typeof i.onMessage&&(i.onMessage=n),this.extendedMapping[s]=t,this._ext[t]=i,this[t]=i,this._nextExt+=1}keepAlive(){this._debug("keep-alive"),this._push(_)}handshake(t,s,i){let n,h;if("string"==typeof t?(t=t.toLowerCase(),n=e.from(t,"hex")):t=(n=t).toString("hex"),"string"==typeof s?h=e.from(s,"hex"):s=(h=s).toString("hex"),20!==n.length||20!==h.length)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",t,s,i);const r=e.from(f);r[5]|=16,i&&i.dht&&(r[7]|=1),this._push(e.concat([u,r,n,h])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_sendExtendedHandshake(){const e=Object.assign({},this.extendedHandshake);e.m={};for(const t in this.extendedMapping){const s=this.extendedMapping[t];e.m[s]=Number(t)}this.extended(0,s.encode(e)),this._extendedHandshakeSent=!0}choke(){if(!this.amChoking){for(this.amChoking=!0,this._debug("choke");this.peerRequests.length;)this.peerRequests.pop();this._push(l)}}unchoke(){this.amChoking&&(this.amChoking=!1,this._debug("unchoke"),this._push(p))}interested(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(g))}uninterested(){this.amInterested&&(this.amInterested=!1,this._debug("uninterested"),this._push(c))}have(e){this._debug("have %d",e),this._message(4,[e],null)}bitfield(t){this._debug("bitfield"),e.isBuffer(t)||(t=t.buffer),this._message(5,[],t)}request(e,t,s,i){return i||(i=(()=>{})),this._finished?i(new Error("wire is closed")):this.peerChoking?i(new Error("peer is choking")):(this._debug("request index=%d offset=%d length=%d",e,t,s),this.requests.push(new x(e,t,s,i)),this._updateTimeout(),void this._message(6,[e,t,s],null))}piece(e,t,s){this._debug("piece index=%d offset=%d",e,t),this.uploaded+=s.length,this.uploadSpeed(s.length),this.emit("upload",s.length),this._message(7,[e,t],s)}cancel(e,t,s){this._debug("cancel index=%d offset=%d length=%d",e,t,s),this._callback(this._pull(this.requests,e,t,s),new Error("request was cancelled"),null),this._message(8,[e,t,s],null)}port(t){this._debug("port %d",t);const s=e.from(m);s.writeUInt16BE(t,5),this._push(s)}extended(t,i){if(this._debug("extended ext=%s",t),"string"==typeof t&&this.peerExtendedMapping[t]&&(t=this.peerExtendedMapping[t]),"number"!=typeof t)throw new Error(`Unrecognized extension: ${t}`);{const n=e.from([t]),h=e.isBuffer(i)?i:s.encode(i);this._message(20,[],e.concat([n,h]))}}_read(){}_message(t,s,i){const n=i?i.length:0,h=e.allocUnsafe(5+4*s.length);h.writeUInt32BE(h.length+n-4,0),h[4]=t;for(let e=0;e<s.length;e++)h.writeUInt32BE(s[e],5+4*e);this._push(h),i&&this._push(i)}_push(e){if(!this._finished)return this.push(e)}_onKeepAlive(){this._debug("got keep-alive"),this.emit("keep-alive")}_onHandshake(e,t,s){const i=e.toString("hex"),n=t.toString("hex");let h;for(h in this._debug("got handshake i=%s p=%s exts=%o",i,n,s),this.peerId=n,this.peerIdBuffer=t,this.peerExtensions=s,this.emit("handshake",i,n,s),this._ext)this._ext[h].onHandshake(i,n,s);s.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_onChoke(){for(this.peerChoking=!0,this._debug("got choke"),this.emit("choke");this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)}_onUnchoke(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")}_onInterested(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")}_onUninterested(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")}_onHave(e){this.peerPieces.get(e)||(this._debug("got have %d",e),this.peerPieces.set(e,!0),this.emit("have",e))}_onBitField(e){this.peerPieces=new i(e),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)}_onRequest(e,t,s){if(this.amChoking)return;this._debug("got request index=%d offset=%d length=%d",e,t,s);const i=(i,h)=>{if(n===this._pull(this.peerRequests,e,t,s))return i?this._debug("error satisfying request index=%d offset=%d length=%d (%s)",e,t,s,i.message):void this.piece(e,t,h)};var n=new x(e,t,s,i);this.peerRequests.push(n),this.emit("request",e,t,s,i)}_onPiece(e,t,s){this._debug("got piece index=%d offset=%d",e,t),this._callback(this._pull(this.requests,e,t,s.length),null,s),this.downloaded+=s.length,this.downloadSpeed(s.length),this.emit("download",s.length),this.emit("piece",e,t,s)}_onCancel(e,t,s){this._debug("got cancel index=%d offset=%d length=%d",e,t,s),this._pull(this.peerRequests,e,t,s),this.emit("cancel",e,t,s)}_onPort(e){this._debug("got port %d",e),this.emit("port",e)}_onExtended(e,t){if(0===e){let e,n;try{e=s.decode(t)}catch(i){this._debug("ignoring invalid extended handshake: %s",i.message||i)}if(!e)return;if(this.peerExtendedHandshake=e,"object"==typeof e.m)for(n in e.m)this.peerExtendedMapping[n]=Number(e.m[n].toString());for(n in this._ext)this.peerExtendedMapping[n]&&this._ext[n].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[e]&&(e=this.extendedMapping[e],this._ext[e]&&this._ext[e].onMessage(t)),this._debug("got extended message ext=%s",e),this.emit("extended",e,t)}_onTimeout(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")}_write(t,s,i){for(this._bufferSize+=t.length,this._buffer.push(t);this._bufferSize>=this._parserSize;){const t=1===this._buffer.length?this._buffer[0]:e.concat(this._buffer);this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[t.slice(this._parserSize)]:[],this._parser(t.slice(0,this._parserSize))}i(null)}_callback(e,t,s){e&&(this._clearTimeout(),this.peerChoking||this._finished||this._updateTimeout(),e.callback(t,s))}_clearTimeout(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}_updateTimeout(){this._timeoutMs&&this.requests.length&&!this._timeout&&(this._timeout=setTimeout(()=>this._onTimeout(),this._timeoutMs),this._timeoutUnref&&this._timeout.unref&&this._timeout.unref())}_parse(e,t){this._parserSize=e,this._parser=t}_onMessageLength(e){const t=e.readUInt32BE(0);t>0?this._parse(t,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))}_onMessage(e){switch(this._parse(4,this._onMessageLength),e[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(e.readUInt32BE(1));case 5:return this._onBitField(e.slice(1));case 6:return this._onRequest(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 7:return this._onPiece(e.readUInt32BE(1),e.readUInt32BE(5),e.slice(9));case 8:return this._onCancel(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 9:return this._onPort(e.readUInt16BE(1));case 20:return this._onExtended(e.readUInt8(1),e.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",e)}}_parseHandshake(){this._parse(1,e=>{const t=e.readUInt8(0);this._parse(t+48,e=>{const s=e.slice(0,t);if("BitTorrent protocol"!==s.toString())return this._debug("Error: wire not speaking BitTorrent protocol (%s)",s.toString()),void this.end();e=e.slice(t),this._onHandshake(e.slice(8,28),e.slice(28,48),{dht:!!(1&e[7]),extended:!!(16&e[5])}),this._parse(4,this._onMessageLength)})})}_onFinish(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,()=>{});this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)}_debug(...e){e[0]=`[${this._debugId}] ${e[0]}`,n(...e)}_pull(e,s,i,n){for(let h=0;h<e.length;h++){const r=e[h];if(r.piece===s&&r.offset===i&&r.length===n)return t(e,h),r}return null}}module.exports=b;
},{"unordered-array-remove":"kvDi","bencode":"XPbW","bitfield":"yWjx","debug":"jD9Y","randombytes":"pXr2","speedometer":"JweE","readable-stream":"YvpY","buffer":"aMB2"}],"mzaC":[function(require,module,exports) {
module.exports={_from:"webtorrent",_id:"webtorrent@0.107.16",_inBundle:!1,_integrity:"sha512-5fdPZFiZPxwbigAHtMVQ7ZCXbZSQlxgB6JPD77itpc9DdKYPpliFwCLsNiQpj1jmpo91HlHUJk+Xp3ks1fLUQg==",_location:"/webtorrent",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"webtorrent",name:"webtorrent",escapedName:"webtorrent",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/webtorrent/-/webtorrent-0.107.16.tgz",_shasum:"cf2231f87b3f4334f8eb56ba5aae80df8cd8521c",_spec:"webtorrent",_where:"C:\\Users\\roicenir\\TCC\\serviceworker2-1",author:{name:"WebTorrent, LLC",email:"feross@webtorrent.io",url:"https://webtorrent.io"},browser:{"./lib/server.js":!1,"./lib/tcp-pool.js":!1,"bittorrent-dht/client":!1,"fs-chunk-store":"memory-chunk-store","load-ip-set":!1,net:!1,os:!1,ut_pex:!1},browserify:{transform:["package-json-versionify"]},bugs:{url:"https://github.com/webtorrent/webtorrent/issues"},bundleDependencies:!1,chromeapp:{"fs-chunk-store":"memory-chunk-store",http:"http-node","load-ip-set":!1,net:"chrome-net",os:!1},dependencies:{"addr-to-ip-port":"^1.4.2",bitfield:"^3.0.0","bittorrent-dht":"^9.0.0","bittorrent-protocol":"^3.0.0","chrome-net":"^3.3.2","chunk-store-stream":"^4.0.0","create-torrent":"^4.0.0",debug:"^4.1.0","end-of-stream":"^1.1.0","escape-html":"^1.0.3","fs-chunk-store":"^2.0.0","http-node":"github:feross/http-node#webtorrent","immediate-chunk-store":"^2.0.0","load-ip-set":"^2.1.0","memory-chunk-store":"^1.2.0",mime:"^2.4.0",multistream:"^4.0.0","package-json-versionify":"^1.0.2","parse-numeric-range":"^0.0.2","parse-torrent":"^7.0.0",pump:"^3.0.0","random-iterate":"^1.0.1",randombytes:"^2.0.3","range-parser":"^1.2.0","readable-stream":"^3.0.6","render-media":"^3.0.0","run-parallel":"^1.1.6","run-parallel-limit":"^1.0.3","simple-concat":"^1.0.0","simple-get":"^3.0.1","simple-peer":"^9.0.0","simple-sha1":"^3.0.1",speedometer:"^1.0.0","stream-to-blob":"^2.0.0","stream-to-blob-url":"^3.0.0","stream-with-known-length-to-buffer":"^1.0.0","torrent-discovery":"^9.1.1","torrent-piece":"^2.0.0",uniq:"^1.0.1","unordered-array-remove":"^1.0.2",ut_metadata:"^3.3.0",ut_pex:"^2.0.0"},deprecated:!1,description:"Streaming torrent client",devDependencies:{airtap:"^2.0.3","bittorrent-tracker":"^9.14.0",browserify:"^16.4.0",disc:"^1.3.3",electron:"^6.0.1",finalhandler:"^1.0.0","network-address":"^1.1.0","run-series":"^1.1.4","serve-static":"^1.11.1",standard:"*",tape:"^4.6.0",tinyify:"^2.5.1","webtorrent-fixtures":"^1.5.0"},engines:{node:">=10"},homepage:"https://webtorrent.io",keywords:["bittorrent","bittorrent client","download","mad science","p2p","peer-to-peer","peers","streaming","swarm","torrent","web torrent","webrtc","webrtc data","webtorrent"],license:"MIT",main:"index.js",name:"webtorrent",repository:{type:"git",url:"git://github.com/webtorrent/webtorrent.git"},scripts:{build:"browserify --standalone WebTorrent --plugin tinyify . > webtorrent.min.js","build-debug":"browserify --standalone WebTorrent . > webtorrent.debug.js",size:"npm run size-js && npm run size-disc","size-disc":"browserify --plugin tinyify --full-paths . | discify --open","size-js":"npm run build && cat webtorrent.min.js | gzip | wc -c",test:"standard && npm run test-node && npm run test-browser","test-browser":"airtap -- test/*.js test/browser/*.js","test-browser-local":"airtap --local -- test/*.js test/browser/*.js","test-node":"tape test/*.js test/node/*.js","update-authors":"./scripts/update-authors.sh"},version:"0.107.16"};
},{}],"uToZ":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=c(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=require("bitfield"),d=require("debug")("webtorrent:webconn"),p=require("simple-get"),y=require("simple-sha1"),b=require("bittorrent-protocol"),g=require("../package.json").version,v=function(t){function r(e,t){var o;return n(this,r),(o=i(this,s(r).call(this))).url=e,o.webPeerId=y.sync(e),o._torrent=t,o._init(),o}return l(r,b),o(r,[{key:"_init",value:function(){var e=this;this.setKeepAlive(!0),this.once("handshake",function(t,n){if(!e.destroyed){e.handshake(t,e.webPeerId);for(var r=e._torrent.pieces.length,o=new h(r),i=0;i<=r;i++)o.set(i,!0);e.bitfield(o)}}),this.once("interested",function(){d("interested"),e.unchoke()}),this.on("uninterested",function(){d("uninterested")}),this.on("choke",function(){d("choke")}),this.on("unchoke",function(){d("unchoke")}),this.on("bitfield",function(){d("bitfield")}),this.on("request",function(t,n,r,o){d("request pieceIndex=%d offset=%d length=%d",t,n,r),e.httpRequest(t,n,r,o)})}},{key:"httpRequest",value:function(t,n,r,o){var i,u=this,f=t*this._torrent.pieceLength+n,c=f+r-1,s=this._torrent.files;if(s.length<=1)i=[{url:this.url,start:f,end:c}];else{var l=s.filter(function(e){return e.offset<=c&&e.offset+e.length>f});if(l.length<1)return o(new Error("Could not find file corresponnding to web seed range request"));i=l.map(function(e){var t=e.offset+e.length-1;return{url:u.url+("/"===u.url[u.url.length-1]?"":"/")+e.path,fileOffsetInRange:Math.max(e.offset-f,0),start:Math.max(f-e.offset,0),end:Math.min(t,c-e.offset)}})}var a,h=0,y=!1;i.length>1&&(a=e.alloc(r)),i.forEach(function(e){var u=e.url,f=e.start,c=e.end;d("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",u,t,n,r,f,c);var s={url:u,method:"GET",headers:{"user-agent":"WebTorrent/".concat(g," (https://webtorrent.io)"),range:"bytes=".concat(f,"-").concat(c)}};function l(t,n){if(t.statusCode<200||t.statusCode>=300)return y=!0,o(new Error("Unexpected HTTP status code ".concat(t.statusCode)));d("Got data of length %d",n.length),1===i.length?o(null,n):(n.copy(a,e.fileOffsetInRange),++h===i.length&&o(null,a))}p.concat(s,function(e,t,n){if(!y)return e?"undefined"==typeof window||u.startsWith("".concat(window.location.origin,"/"))?(y=!0,o(e)):p.head(u,function(t,n){if(!y){if(t)return y=!0,o(t);if(n.statusCode<200||n.statusCode>=300)return y=!0,o(new Error("Unexpected HTTP status code ".concat(n.statusCode)));if(n.url===u)return y=!0,o(e);s.url=n.url,p.concat(s,function(e,t,n){if(!y)return e?(y=!0,o(e)):void l(t,n)})}}):void l(t,n)})})}},{key:"destroy",value:function(){f(s(r.prototype),"destroy",this).call(this),this._torrent=null}}]),r}();module.exports=v;
},{"bitfield":"yWjx","debug":"jD9Y","simple-get":"bgy6","simple-sha1":"U1Lh","bittorrent-protocol":"BSvg","../package.json":"mzaC","buffer":"aMB2"}],"R1d1":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}var r=require("unordered-array-remove"),o=require("debug")("webtorrent:peer"),s=require("bittorrent-protocol"),i=require("./webconn"),a=5e3,c=25e3,h=25e3;exports.createWebRTCPeer=function(e,t){var n=new u(e.id,"webrtc");return n.conn=e,n.swarm=t,n.conn.connected?n.onConnect():(n.conn.once("connect",function(){n.onConnect()}),n.conn.once("error",function(e){n.destroy(e)}),n.startConnectTimeout()),n},exports.createTCPIncomingPeer=function(e){var t="".concat(e.remoteAddress,":").concat(e.remotePort),n=new u(t,"tcpIncoming");return n.conn=e,n.addr=t,n.onConnect(),n},exports.createTCPOutgoingPeer=function(e,t){var n=new u(e,"tcpOutgoing");return n.addr=e,n.swarm=t,n},exports.createWebSeedPeer=function(e,t){var n=new u(e,"webSeed");return n.swarm=t,n.conn=new i(e,t),n.onConnect(),n};var u=function(){function t(n,r){e(this,t),this.id=n,this.type=r,o("new %s Peer %s",r,n),this.addr=null,this.conn=null,this.swarm=null,this.wire=null,this.connected=!1,this.destroyed=!1,this.timeout=null,this.retries=0,this.sentHandshake=!1}return n(t,[{key:"onConnect",value:function(){var e=this;if(!this.destroyed){this.connected=!0,o("Peer %s connected",this.id),clearTimeout(this.connectTimeout);var t=this.conn;t.once("end",function(){e.destroy()}),t.once("close",function(){e.destroy()}),t.once("finish",function(){e.destroy()}),t.once("error",function(t){e.destroy(t)});var n=this.wire=new s;n.type=this.type,n.once("end",function(){e.destroy()}),n.once("close",function(){e.destroy()}),n.once("finish",function(){e.destroy()}),n.once("error",function(t){e.destroy(t)}),n.once("handshake",function(t,n){e.onHandshake(t,n)}),this.startHandshakeTimeout(),t.pipe(n).pipe(t),this.swarm&&!this.sentHandshake&&this.handshake()}}},{key:"onHandshake",value:function(e,t){if(this.swarm&&!this.destroyed){if(this.swarm.destroyed)return this.destroy(new Error("swarm already destroyed"));if(e!==this.swarm.infoHash)return this.destroy(new Error("unexpected handshake info hash for this swarm"));if(t===this.swarm.peerId)return this.destroy(new Error("refusing to connect to ourselves"));o("Peer %s got handshake %s",this.id,e),clearTimeout(this.handshakeTimeout),this.retries=0;var n=this.addr;!n&&this.conn.remoteAddress&&this.conn.remotePort&&(n="".concat(this.conn.remoteAddress,":").concat(this.conn.remotePort)),this.swarm._onWire(this.wire,n),this.swarm&&!this.swarm.destroyed&&(this.sentHandshake||this.handshake())}}},{key:"handshake",value:function(){var e={dht:!this.swarm.private&&!!this.swarm.client.dht};this.wire.handshake(this.swarm.infoHash,this.swarm.client.peerId,e),this.sentHandshake=!0}},{key:"startConnectTimeout",value:function(){var e=this;clearTimeout(this.connectTimeout),this.connectTimeout=setTimeout(function(){e.destroy(new Error("connect timeout"))},"webrtc"===this.type?c:a),this.connectTimeout.unref&&this.connectTimeout.unref()}},{key:"startHandshakeTimeout",value:function(){var e=this;clearTimeout(this.handshakeTimeout),this.handshakeTimeout=setTimeout(function(){e.destroy(new Error("handshake timeout"))},h),this.handshakeTimeout.unref&&this.handshakeTimeout.unref()}},{key:"destroy",value:function(e){if(!this.destroyed){this.destroyed=!0,this.connected=!1,o("destroy %s (error: %s)",this.id,e&&(e.message||e)),clearTimeout(this.connectTimeout),clearTimeout(this.handshakeTimeout);var t=this.swarm,n=this.conn,s=this.wire;this.swarm=null,this.conn=null,this.wire=null,t&&s&&r(t.wires,t.wires.indexOf(s)),n&&(n.on("error",function(){}),n.destroy()),s&&s.destroy(),t&&t.removePeer(this.id)}}}]),t}();
},{"unordered-array-remove":"kvDi","debug":"jD9Y","bittorrent-protocol":"BSvg","./webconn":"uToZ"}],"sCHO":[function(require,module,exports) {
function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var n=function(){function i(t){var n=this;e(this,i),this._torrent=t,this._numPieces=t.pieces.length,this._pieces=new Array(this._numPieces),this._onWire=function(e){n.recalculate(),n._initWire(e)},this._onWireHave=function(e){n._pieces[e]+=1},this._onWireBitfield=function(){n.recalculate()},this._torrent.wires.forEach(function(e){n._initWire(e)}),this._torrent.on("wire",this._onWire),this.recalculate()}return t(i,[{key:"getRarestPiece",value:function(e){for(var i=[],t=1/0,n=0;n<this._numPieces;++n)if(!e||e(n)){var r=this._pieces[n];r===t?i.push(n):r<t&&(i=[n],t=r)}return i.length?i[Math.random()*i.length|0]:-1}},{key:"destroy",value:function(){var e=this;this._torrent.removeListener("wire",this._onWire),this._torrent.wires.forEach(function(i){e._cleanupWireEvents(i)}),this._torrent=null,this._pieces=null,this._onWire=null,this._onWireHave=null,this._onWireBitfield=null}},{key:"_initWire",value:function(e){var i=this;e._onClose=function(){i._cleanupWireEvents(e);for(var t=0;t<i._numPieces;++t)i._pieces[t]-=e.peerPieces.get(t)},e.on("have",this._onWireHave),e.on("bitfield",this._onWireBitfield),e.once("close",e._onClose)}},{key:"recalculate",value:function(){this._pieces.fill(0);var e=!0,i=!1,t=void 0;try{for(var n,r=this._torrent.wires[Symbol.iterator]();!(e=(n=r.next()).done);e=!0)for(var o=n.value,s=0;s<this._numPieces;++s)this._pieces[s]+=o.peerPieces.get(s)}catch(l){i=!0,t=l}finally{try{e||null==r.return||r.return()}finally{if(i)throw t}}}},{key:"_cleanupWireEvents",value:function(e){e.removeListener("have",this._onWireHave),e.removeListener("bitfield",this._onWireBitfield),e._onClose&&e.removeListener("close",e._onClose),e._onClose=null}}]),i}();module.exports=n;
},{}],"WHRq":[function(require,module,exports) {
var process = require("process");
var global = arguments[3];
var e=require("process"),t=arguments[3];function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return o(e)||s(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _,g=require("addr-to-ip-port"),y=require("bitfield"),m=require("chunk-store-stream/write"),v=require("debug")("webtorrent:torrent"),w=require("torrent-discovery"),b=require("events").EventEmitter,k=require("fs"),S=require("fs-chunk-store"),q=require("simple-get"),P=require("immediate-chunk-store"),E=require("multistream"),O=require("net"),T=require("os"),x=require("run-parallel"),C=require("run-parallel-limit"),I=require("parse-torrent"),L=require("path"),A=require("torrent-piece"),M=require("pump"),W=require("random-iterate"),H=require("simple-sha1"),R=require("speedometer"),j=require("uniq"),N=require("ut_metadata"),F=require("ut_pex"),V=require("parse-numeric-range"),B=require("./file"),U=require("./peer"),D=require("./rarity-map"),G=require("./server"),K=131072,Q=3e4,z=5e3,J=3*A.BLOCK_LENGTH,X=.5,Y=1,Z=1e4,$=2,ee=1/0,te=[1e3,5e3,15e3],re=require("../package.json").version,ie="WebTorrent/".concat(re," (https://webtorrent.io)");try{_=L.join(k.statSync("/tmp")&&"/tmp","webtorrent")}catch(de){_=L.join("function"==typeof T.tmpdir?T.tmpdir():"/","webtorrent")}var ne=function(r){function n(e,t,r){var i;return a(this,n),(i=c(this,f(n).call(this)))._debugId="unknown infohash",i.client=t,i.announce=r.announce,i.urlList=r.urlList,i.path=r.path,i.skipVerify=!!r.skipVerify,i._store=r.store||S,i._getAnnounceOpts=r.getAnnounceOpts,i.strategy=r.strategy||"sequential",i.maxWebConns=r.maxWebConns||4,i._rechokeNumSlots=!1===r.uploads||0===r.uploads?0:+r.uploads||10,i._rechokeOptimisticWire=null,i._rechokeOptimisticTime=0,i._rechokeIntervalId=null,i.ready=!1,i.destroyed=!1,i.paused=!1,i.done=!1,i.metadata=null,i.store=null,i.files=[],i.pieces=[],i._amInterested=!1,i._selections=[],i._critical=[],i.wires=[],i._queue=[],i._peers={},i._peersLength=0,i.received=0,i.uploaded=0,i._downloadSpeed=R(),i._uploadSpeed=R(),i._servers=[],i._xsRequests=[],i._fileModtimes=r.fileModtimes,null!==e&&i._onTorrentId(e),i._debug("new torrent"),i}return l(n,b),d(n,[{key:"_onTorrentId",value:function(t){var r=this;if(!this.destroyed){var i;try{i=I(t)}catch(de){}i?(this.infoHash=i.infoHash,this._debugId=i.infoHash.toString("hex").substring(0,7),e.nextTick(function(){r.destroyed||r._onParsedTorrent(i)})):I.remote(t,function(e,t){if(!r.destroyed)return e?r._destroy(e):void r._onParsedTorrent(t)})}}},{key:"_onParsedTorrent",value:function(e){var t=this;if(!this.destroyed){if(this._processParsedTorrent(e),!this.infoHash)return this._destroy(new Error("Malformed torrent data: No info hash"));this.path||(this.path=L.join(_,this.infoHash)),this._rechokeIntervalId=setInterval(function(){t._rechoke()},Z),this._rechokeIntervalId.unref&&this._rechokeIntervalId.unref(),this.emit("_infoHash",this.infoHash),this.destroyed||(this.emit("infoHash",this.infoHash),this.destroyed||(this.client.listening?this._onListening():this.client.once("listening",function(){t._onListening()})))}}},{key:"_processParsedTorrent",value:function(e){this._debugId=e.infoHash.toString("hex").substring(0,7),this.announce&&(e.announce=e.announce.concat(this.announce)),this.client.tracker&&t.WEBTORRENT_ANNOUNCE&&!this.private&&(e.announce=e.announce.concat(t.WEBTORRENT_ANNOUNCE)),this.urlList&&(e.urlList=e.urlList.concat(this.urlList)),j(e.announce),j(e.urlList),Object.assign(this,e),this.magnetURI=I.toMagnetURI(e),this.torrentFile=I.toTorrentFile(e)}},{key:"_onListening",value:function(){this.destroyed||(this.info?this._onMetadata(this):(this.xs&&this._getMetadataFromServer(),this._startDiscovery()))}},{key:"_startDiscovery",value:function(){var e=this;if(!this.discovery&&!this.destroyed){var t=this.client.tracker;t&&(t=Object.assign({},this.client.tracker,{getAnnounceOpts:function(){var t={uploaded:e.uploaded,downloaded:e.downloaded,left:Math.max(e.length-e.downloaded,0)};return e.client.tracker.getAnnounceOpts&&Object.assign(t,e.client.tracker.getAnnounceOpts()),e._getAnnounceOpts&&Object.assign(t,e._getAnnounceOpts()),t}})),this.discovery=new w({infoHash:this.infoHash,announce:this.announce,peerId:this.client.peerId,dht:!this.private&&this.client.dht,tracker:t,port:this.client.torrentPort,userAgent:ie}),this.discovery.on("error",function(t){e._destroy(t)}),this.discovery.on("peer",function(t){"string"==typeof t&&e.done||e.addPeer(t)}),this.discovery.on("trackerAnnounce",function(){e.emit("trackerAnnounce"),0===e.numPeers&&e.emit("noPeers","tracker")}),this.discovery.on("dhtAnnounce",function(){e.emit("dhtAnnounce"),0===e.numPeers&&e.emit("noPeers","dht")}),this.discovery.on("warning",function(t){e.emit("warning",t)})}}},{key:"_getMetadataFromServer",value:function(){var e=this,t=(Array.isArray(this.xs)?this.xs:[this.xs]).map(function(t){return function(r){!function(t,r){if(0!==t.indexOf("http://")&&0!==t.indexOf("https://"))return e.emit("warning",new Error("skipping non-http xs param: ".concat(t))),r(null);var i,n={url:t,method:"GET",headers:{"user-agent":ie}};try{i=q.concat(n,function(i,n,s){if(e.destroyed)return r(null);if(e.metadata)return r(null);if(i)return e.emit("warning",new Error("http error from xs param: ".concat(t))),r(null);if(200!==n.statusCode)return e.emit("warning",new Error("non-200 status code ".concat(n.statusCode," from xs param: ").concat(t))),r(null);var o;try{o=I(s)}catch(i){}if(!o)return e.emit("warning",new Error("got invalid torrent file from xs param: ".concat(t))),r(null);if(o.infoHash!==e.infoHash)return e.emit("warning",new Error("got torrent file with incorrect info hash from xs param: ".concat(t))),r(null);e._onMetadata(o),r(null)})}catch(de){return e.emit("warning",new Error("skipping invalid url xs param: ".concat(t))),r(null)}e._xsRequests.push(i)}(t,r)}});x(t)}},{key:"_onMetadata",value:function(e){var t=this;if(!this.metadata&&!this.destroyed){var r;if(this._debug("got metadata"),this._xsRequests.forEach(function(e){e.abort()}),this._xsRequests=[],e&&e.infoHash)r=e;else try{r=I(e)}catch(de){return this._destroy(de)}if(this._processParsedTorrent(r),this.metadata=this.torrentFile,this.client.enableWebSeeds&&this.urlList.forEach(function(e){t.addWebSeed(e)}),this._rarityMap=new D(this),this.store=new P(new this._store(this.pieceLength,{torrent:{infoHash:this.infoHash},files:this.files.map(function(e){return{path:L.join(t.path,e.path),length:e.length,offset:e.offset}}),length:this.length,name:this.infoHash})),this.files=this.files.map(function(e){return new B(t,e)}),this.so){var i=V.parse(this.so);this.files.forEach(function(e,r){i.includes(r)&&t.files[r].select(!0)})}else 0!==this.pieces.length&&this.select(0,this.pieces.length-1,!1);if(this._hashes=this.pieces,this.pieces=this.pieces.map(function(e,r){var i=r===t.pieces.length-1?t.lastPieceLength:t.pieceLength;return new A(i)}),this._reservations=this.pieces.map(function(){return[]}),this.bitfield=new y(this.pieces.length),this.wires.forEach(function(e){e.ut_metadata&&e.ut_metadata.setMetadata(t.metadata),t._onWireWithMetadata(e)}),this.emit("metadata"),!this.destroyed)if(this.skipVerify)this._markAllVerified(),this._onStore();else{var n=function(e){if(e)return t._destroy(e);t._debug("done verifying"),t._onStore()};this._debug("verifying existing torrent data"),this._fileModtimes&&this._store===S?this.getFileModtimes(function(e,r){if(e)return t._destroy(e);t.files.map(function(e,i){return r[i]===t._fileModtimes[i]}).every(function(e){return e})?(t._markAllVerified(),t._onStore()):t._verifyPieces(n)}):this._verifyPieces(n)}}}},{key:"getFileModtimes",value:function(e){var t=this,r=[];C(this.files.map(function(e,i){return function(n){k.stat(L.join(t.path,e.path),function(e,t){if(e&&"ENOENT"!==e.code)return n(e);r[i]=t&&t.mtime.getTime(),n(null)})}}),ee,function(i){t._debug("done getting file modtimes"),e(i,r)})}},{key:"_verifyPieces",value:function(t){var r=this;C(this.pieces.map(function(t,i){return function(t){if(r.destroyed)return t(new Error("torrent is destroyed"));r.store.get(i,function(n,s){return r.destroyed?t(new Error("torrent is destroyed")):n?e.nextTick(t,null):void H(s,function(e){if(r.destroyed)return t(new Error("torrent is destroyed"));if(e===r._hashes[i]){if(!r.pieces[i])return t(null);r._debug("piece verified %s",i),r._markVerified(i)}else r._debug("piece invalid %s",i);t(null)})})}}),ee,t)}},{key:"rescanFiles",value:function(e){var t=this;if(this.destroyed)throw new Error("torrent is destroyed");e||(e=ue),this._verifyPieces(function(r){if(r)return t._destroy(r),e(r);t._checkDone(),e(null)})}},{key:"_markAllVerified",value:function(){for(var e=0;e<this.pieces.length;e++)this._markVerified(e)}},{key:"_markVerified",value:function(e){this.pieces[e]=null,this._reservations[e]=null,this.bitfield.set(e,!0)}},{key:"_onStore",value:function(){this.destroyed||(this._debug("on store"),this._startDiscovery(),this.ready=!0,this.emit("ready"),this._checkDone(),this._updateSelections())}},{key:"destroy",value:function(e){this._destroy(null,e)}},{key:"_destroy",value:function(e,t){var r=this;if(!this.destroyed){for(var i in this.destroyed=!0,this._debug("destroy"),this.client._remove(this),clearInterval(this._rechokeIntervalId),this._xsRequests.forEach(function(e){e.abort()}),this._rarityMap&&this._rarityMap.destroy(),this._peers)this.removePeer(i);this.files.forEach(function(e){e instanceof B&&e._destroy()});var n=this._servers.map(function(e){return function(t){e.destroy(t)}});this.discovery&&n.push(function(e){r.discovery.destroy(e)}),this.store&&n.push(function(e){r.store.close(e)}),x(n,t),e&&(0===this.listenerCount("error")?this.client.emit("error",e):this.emit("error",e)),this.emit("close"),this.client=null,this.files=[],this.discovery=null,this.store=null,this._rarityMap=null,this._peers=null,this._servers=null,this._xsRequests=null}}},{key:"addPeer",value:function(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");if(this.client.blocked){var t;if("string"==typeof e){var r;try{r=g(e)}catch(n){return this._debug("ignoring peer: invalid %s",e),this.emit("invalidPeer",e),!1}t=r[0]}else"string"==typeof e.remoteAddress&&(t=e.remoteAddress);if(t&&this.client.blocked.contains(t))return this._debug("ignoring peer: blocked %s",e),"string"!=typeof e&&e.destroy(),this.emit("blockedPeer",e),!1}var i=!!this._addPeer(e);return i?this.emit("peer",e):this.emit("invalidPeer",e),i}},{key:"_addPeer",value:function(e){if(this.destroyed)return"string"!=typeof e&&e.destroy(),null;if("string"==typeof e&&!this._validAddr(e))return this._debug("ignoring peer: invalid %s",e),null;var t,r=e&&e.id||e;return this._peers[r]?(this._debug("ignoring peer: duplicate (%s)",r),"string"!=typeof e&&e.destroy(),null):this.paused?(this._debug("ignoring peer: torrent is paused"),"string"!=typeof e&&e.destroy(),null):(this._debug("add peer %s",r),t="string"==typeof e?U.createTCPOutgoingPeer(e,this):U.createWebRTCPeer(e,this),this._peers[t.id]=t,this._peersLength+=1,"string"==typeof e&&(this._queue.push(t),this._drain()),t)}},{key:"addWebSeed",value:function(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!/^https?:\/\/.+/.test(e))return this.emit("warning",new Error("ignoring invalid web seed: ".concat(e))),void this.emit("invalidPeer",e);if(this._peers[e])return this.emit("warning",new Error("ignoring duplicate web seed: ".concat(e))),void this.emit("invalidPeer",e);this._debug("add web seed %s",e);var t=U.createWebSeedPeer(e,this);this._peers[t.id]=t,this._peersLength+=1,this.emit("peer",e)}},{key:"_addIncomingPeer",value:function(e){return this.destroyed?e.destroy(new Error("torrent is destroyed")):this.paused?e.destroy(new Error("torrent is paused")):(this._debug("add incoming peer %s",e.id),this._peers[e.id]=e,void(this._peersLength+=1))}},{key:"removePeer",value:function(e){var t=e&&e.id||e;(e=this._peers[t])&&(this._debug("removePeer %s",t),delete this._peers[t],this._peersLength-=1,e.destroy(),this._drain())}},{key:"select",value:function(e,t,r,i){if(this.destroyed)throw new Error("torrent is destroyed");if(e<0||t<e||this.pieces.length<=t)throw new Error("invalid selection ".concat(e," : ").concat(t));r=Number(r)||0,this._debug("select %s-%s (priority %s)",e,t,r),this._selections.push({from:e,to:t,offset:0,priority:r,notify:i||ue}),this._selections.sort(function(e,t){return t.priority-e.priority}),this._updateSelections()}},{key:"deselect",value:function(e,t,r){if(this.destroyed)throw new Error("torrent is destroyed");r=Number(r)||0,this._debug("deselect %s-%s (priority %s)",e,t,r);for(var i=0;i<this._selections.length;++i){var n=this._selections[i];if(n.from===e&&n.to===t&&n.priority===r){this._selections.splice(i,1);break}}this._updateSelections()}},{key:"critical",value:function(e,t){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("critical %s-%s",e,t);for(var r=e;r<=t;++r)this._critical[r]=!0;this._updateSelections()}},{key:"_onWire",value:function(t,r){var i=this;if(this._debug("got wire %s (%s)",t._debugId,r||"Unknown"),t.on("download",function(e){i.destroyed||(i.received+=e,i._downloadSpeed(e),i.client._downloadSpeed(e),i.emit("download",e),i.client.emit("download",e))}),t.on("upload",function(e){i.destroyed||(i.uploaded+=e,i._uploadSpeed(e),i.client._uploadSpeed(e),i.emit("upload",e),i.client.emit("upload",e))}),this.wires.push(t),r){var n=g(r);t.remoteAddress=n[0],t.remotePort=n[1]}this.client.dht&&this.client.dht.listening&&t.on("port",function(e){if(!i.destroyed&&!i.client.dht.destroyed){if(!t.remoteAddress)return i._debug("ignoring PORT from peer with no address");if(0===e||e>65536)return i._debug("ignoring invalid PORT from peer");i._debug("port: %s (from %s)",e,r),i.client.dht.addNode({host:t.remoteAddress,port:e})}}),t.on("timeout",function(){i._debug("wire timeout (%s)",r),t.destroy()}),t.setTimeout(Q,!0),t.setKeepAlive(!0),t.use(N(this.metadata)),t.ut_metadata.on("warning",function(e){i._debug("ut_metadata warning: %s",e.message)}),this.metadata||(t.ut_metadata.on("metadata",function(e){i._debug("got metadata via ut_metadata"),i._onMetadata(e)}),t.ut_metadata.fetch()),"function"!=typeof F||this.private||(t.use(F()),t.ut_pex.on("peer",function(e){i.done||(i._debug("ut_pex: got peer: %s (from %s)",e,r),i.addPeer(e))}),t.ut_pex.on("dropped",function(e){var t=i._peers[e];t&&!t.connected&&(i._debug("ut_pex: dropped peer: %s (from %s)",e,r),i.removePeer(e))}),t.once("close",function(){t.ut_pex.reset()})),this.emit("wire",t,r),this.metadata&&e.nextTick(function(){i._onWireWithMetadata(t)})}},{key:"_onWireWithMetadata",value:function(e){var t,r=this,i=null,n=function t(){r.destroyed||e.destroyed||(r._numQueued>2*(r._numConns-r.numPeers)&&e.amInterested?e.destroy():(i=setTimeout(t,z)).unref&&i.unref())},s=function(){if(e.peerPieces.buffer.length===r.bitfield.buffer.length){for(t=0;t<r.pieces.length;++t)if(!e.peerPieces.get(t))return;e.isSeeder=!0,e.choke()}};e.on("bitfield",function(){s(),r._update()}),e.on("have",function(){s(),r._update()}),e.once("interested",function(){e.unchoke()}),e.once("close",function(){clearTimeout(i)}),e.on("choke",function(){clearTimeout(i),(i=setTimeout(n,z)).unref&&i.unref()}),e.on("unchoke",function(){clearTimeout(i),r._update()}),e.on("request",function(t,i,n,s){if(n>K)return e.destroy();r.pieces[t]||r.store.get(t,{offset:i,length:n},s)}),e.bitfield(this.bitfield),e.uninterested(),e.peerExtensions.dht&&this.client.dht&&this.client.dht.listening&&e.port(this.client.dht.address().port),"webSeed"!==e.type&&(i=setTimeout(n,z)).unref&&i.unref(),e.isSeeder=!1,s()}},{key:"_updateSelections",value:function(){var t=this;this.ready&&!this.destroyed&&(e.nextTick(function(){t._gcSelections()}),this._updateInterest(),this._update())}},{key:"_gcSelections",value:function(){for(var e=0;e<this._selections.length;++e){for(var t=this._selections[e],r=t.offset;this.bitfield.get(t.from+t.offset)&&t.from+t.offset<t.to;)t.offset+=1;r!==t.offset&&t.notify(),t.to===t.from+t.offset&&(this.bitfield.get(t.from+t.offset)&&(this._selections.splice(e,1),e-=1,t.notify(),this._updateInterest()))}this._selections.length||this.emit("idle")}},{key:"_updateInterest",value:function(){var e=this,t=this._amInterested;this._amInterested=!!this._selections.length,this.wires.forEach(function(t){for(var r=!1,i=0;i<e.pieces.length;++i)if(e.pieces[i]&&t.peerPieces.get(i)){r=!0;break}r?t.interested():t.uninterested()}),t!==this._amInterested&&(this._amInterested?this.emit("interested"):this.emit("uninterested"))}},{key:"_update",value:function(){if(!this.destroyed)for(var e,t=W(this.wires);e=t();)this._updateWireWrapper(e)}},{key:"_updateWireWrapper",value:function(e){var t=this;"undefined"!=typeof window&&"function"==typeof window.requestIdleCallback?window.requestIdleCallback(function(){t._updateWire(e)},{timeout:250}):t._updateWire(e)}},{key:"_updateWire",value:function(e){var t=this;if(!e.peerChoking){if(!e.downloaded)return function(){if(e.requests.length)return;var r=t._selections.length;for(;r--;){var i=t._selections[r],s=void 0;if("rarest"===t.strategy)for(var o=i.from+i.offset,a=i.to,u=a-o+1,d={},c=0,h=n(o,a,d);c<u&&!((s=t._rarityMap.getRarestPiece(h))<0);){if(t._request(e,s,!1))return;d[s]=!0,c+=1}else for(s=i.to;s>=i.from+i.offset;--s)if(e.peerPieces.get(s)&&t._request(e,s,!1))return}}();var r=se(e,X);if(!(e.requests.length>=r)){var i=se(e,Y);o(!1)||o(!0)}}function n(t,r,i,n){return function(s){return s>=t&&s<=r&&!(s in i)&&e.peerPieces.get(s)&&(!n||n(s))}}function s(e){for(var r=e,i=e;i<t._selections.length&&t._selections[i].priority;i++)r=i;var n=t._selections[e];t._selections[e]=t._selections[r],t._selections[r]=n}function o(r){if(e.requests.length>=i)return!0;for(var o=function(){var r=e.downloadSpeed()||1;if(r>J)return function(){return!0};var i=Math.max(1,e.requests.length)*A.BLOCK_LENGTH/r,n=10,s=0;return function(e){if(!n||t.bitfield.get(e))return!0;for(var o=t.pieces[e].missing;s<t.wires.length;s++){var a=t.wires[s],u=a.downloadSpeed();if(!(u<J)&&!(u<=r)&&a.peerPieces.get(e)&&!((o-=u*i)>0))return n--,!1}return!0}}(),a=0;a<t._selections.length;a++){var u=t._selections[a],d=void 0;if("rarest"===t.strategy)for(var c=u.from+u.offset,h=u.to,f=h-c+1,l={},p=0,_=n(c,h,l,o);p<f&&!((d=t._rarityMap.getRarestPiece(_))<0);){for(;t._request(e,d,t._critical[d]||r););if(!(e.requests.length<i))return u.priority&&s(a),!0;l[d]=!0,p++}else for(d=u.from+u.offset;d<=u.to;d++)if(e.peerPieces.get(d)&&o(d)){for(;t._request(e,d,t._critical[d]||r););if(!(e.requests.length<i))return u.priority&&s(a),!0}}return!1}}},{key:"_rechoke",value:function(){var e=this;if(this.ready){this._rechokeOptimisticTime>0?this._rechokeOptimisticTime-=1:this._rechokeOptimisticWire=null;var t=[];this.wires.forEach(function(r){r.isSeeder||r===e._rechokeOptimisticWire||t.push({wire:r,downloadSpeed:r.downloadSpeed(),uploadSpeed:r.uploadSpeed(),salt:Math.random(),isChoked:!0})}),t.sort(function(e,t){if(e.downloadSpeed!==t.downloadSpeed)return t.downloadSpeed-e.downloadSpeed;if(e.uploadSpeed!==t.uploadSpeed)return t.uploadSpeed-e.uploadSpeed;if(e.wire.amChoking!==t.wire.amChoking)return e.wire.amChoking?1:-1;return e.salt-t.salt});for(var r=0,i=0;i<t.length&&r<this._rechokeNumSlots;++i)t[i].isChoked=!1,t[i].wire.peerInterested&&(r+=1);if(!this._rechokeOptimisticWire&&i<t.length&&this._rechokeNumSlots){var n=t.slice(i).filter(function(e){return e.wire.peerInterested}),s=n[ae(n.length)];s&&(s.isChoked=!1,this._rechokeOptimisticWire=s.wire,this._rechokeOptimisticTime=$)}t.forEach(function(e){e.wire.amChoking!==e.isChoked&&(e.isChoked?e.wire.choke():e.wire.unchoke())})}}},{key:"_hotswap",value:function(e,t){var r=e.downloadSpeed();if(r<A.BLOCK_LENGTH)return!1;if(!this._reservations[t])return!1;var i=this._reservations[t];if(!i)return!1;var n,s,o=1/0;for(s=0;s<i.length;s++){var a=i[s];if(a&&a!==e){var u=a.downloadSpeed();u>=J||2*u>r||u>o||(n=a,o=u)}}if(!n)return!1;for(s=0;s<i.length;s++)i[s]===n&&(i[s]=null);for(s=0;s<n.requests.length;s++){var d=n.requests[s];d.piece===t&&this.pieces[t].cancel(d.offset/A.BLOCK_LENGTH|0)}return this.emit("hotswap",n,e,t),!0}},{key:"_request",value:function(t,r,i){var n=this,s=t.requests.length,o="webSeed"===t.type;if(n.bitfield.get(r))return!1;if(s>=(o?Math.min(oe(t,Y,n.pieceLength),n.maxWebConns):se(t,Y)))return!1;var a=n.pieces[r],u=o?a.reserveRemaining():a.reserve();if(-1===u&&i&&n._hotswap(t,r)&&(u=o?a.reserveRemaining():a.reserve()),-1===u)return!1;var d=n._reservations[r];d||(d=n._reservations[r]=[]);var c=d.indexOf(null);-1===c&&(c=d.length),d[c]=t;var h=a.chunkOffset(u),f=o?a.chunkLengthRemaining(u):a.chunkLength(u);function l(){e.nextTick(function(){n._update()})}return t.request(r,h,f,function e(i,s){if(!n.destroyed){if(!n.ready)return n.once("ready",function(){e(i,s)});if(d[c]===t&&(d[c]=null),a!==n.pieces[r])return l();if(i)return n._debug("error getting piece %s (offset: %s length: %s) from %s: %s",r,h,f,"".concat(t.remoteAddress,":").concat(t.remotePort),i.message),o?a.cancelRemaining(u):a.cancel(u),void l();if(n._debug("got piece %s (offset: %s length: %s) from %s",r,h,f,"".concat(t.remoteAddress,":").concat(t.remotePort)),!a.set(u,s,t))return l();var p=a.flush();H(p,function(e){if(!n.destroyed){if(e===n._hashes[r]){if(!n.pieces[r])return;n._debug("piece verified %s",r),n.pieces[r]=null,n._reservations[r]=null,n.bitfield.set(r,!0),n.store.put(r,p),n.wires.forEach(function(e){e.have(r)}),n._checkDone()&&!n.destroyed&&n.discovery.complete()}else n.pieces[r]=new A(a.length),n.emit("warning",new Error("Piece ".concat(r," failed verification")));l()}})}}),!0}},{key:"_checkDone",value:function(){var e=this;if(!this.destroyed){this.files.forEach(function(t){if(!t.done){for(var r=t._startPiece;r<=t._endPiece;++r)if(!e.bitfield.get(r))return;t.done=!0,t.emit("done"),e._debug("file done: ".concat(t.name))}});for(var t=!0,r=0;r<this._selections.length;r++){for(var i=this._selections[r],n=i.from;n<=i.to;n++)if(!this.bitfield.get(n)){t=!1;break}if(!t)break}return!this.done&&t&&(this.done=!0,this._debug("torrent done: ".concat(this.infoHash)),this.emit("done")),this._gcSelections(),t}}},{key:"load",value:function(e,t){var r=this;if(this.destroyed)throw new Error("torrent is destroyed");if(!this.ready)return this.once("ready",function(){r.load(e,t)});Array.isArray(e)||(e=[e]),t||(t=ue);var i=new E(e),n=new m(this.store,this.pieceLength);M(i,n,function(e){if(e)return t(e);r._markAllVerified(),r._checkDone(),t(null)})}},{key:"createServer",value:function(e){if("function"!=typeof G)throw new Error("node.js-only method");if(this.destroyed)throw new Error("torrent is destroyed");var t=new G(this,e);return this._servers.push(t),t}},{key:"pause",value:function(){this.destroyed||(this._debug("pause"),this.paused=!0)}},{key:"resume",value:function(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())}},{key:"_debug",value:function(){var e=[].slice.call(arguments);e[0]="[".concat(this.client._debugId,"] [").concat(this._debugId,"] ").concat(e[0]),v.apply(void 0,i(e))}},{key:"_drain",value:function(){var e=this;if(this._debug("_drain numConns %s maxConns %s",this._numConns,this.client.maxConns),!("function"!=typeof O.connect||this.destroyed||this.paused||this._numConns>=this.client.maxConns)){this._debug("drain (%s queued, %s/%s peers)",this._numQueued,this.numPeers,this.client.maxConns);var t=this._queue.shift();if(t){this._debug("tcp connect attempt to %s",t.addr);var r=g(t.addr),i={host:r[0],port:r[1]},n=t.conn=O.connect(i);n.once("connect",function(){t.onConnect()}),n.once("error",function(e){t.destroy(e)}),t.startConnectTimeout(),n.on("close",function(){if(!e.destroyed)if(t.retries>=te.length)e._debug("conn %s closed: will not re-add (max %s attempts)",t.addr,te.length);else{var r=te[t.retries];e._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",t.addr,r,t.retries+1);var i=setTimeout(function(){var r=e._addPeer(t.addr);r&&(r.retries=t.retries+1)},r);i.unref&&i.unref()}})}}}},{key:"_validAddr",value:function(e){var t;try{t=g(e)}catch(n){return!1}var r=t[0],i=t[1];return i>0&&i<65535&&!("127.0.0.1"===r&&i===this.client.torrentPort)}},{key:"timeRemaining",get:function(){return this.done?0:0===this.downloadSpeed?1/0:(this.length-this.downloaded)/this.downloadSpeed*1e3}},{key:"downloaded",get:function(){if(!this.bitfield)return 0;for(var e=0,t=0,r=this.pieces.length;t<r;++t)if(this.bitfield.get(t))e+=t===r-1?this.lastPieceLength:this.pieceLength;else{var i=this.pieces[t];e+=i.length-i.missing}return e}},{key:"downloadSpeed",get:function(){return this._downloadSpeed()}},{key:"uploadSpeed",get:function(){return this._uploadSpeed()}},{key:"progress",get:function(){return this.length?this.downloaded/this.length:0}},{key:"ratio",get:function(){return this.uploaded/(this.received||1)}},{key:"numPeers",get:function(){return this.wires.length}},{key:"torrentFileBlobURL",get:function(){if("undefined"==typeof window)throw new Error("browser-only property");return this.torrentFile?URL.createObjectURL(new Blob([this.torrentFile],{type:"application/x-bittorrent"})):null}},{key:"_numQueued",get:function(){return this._queue.length+(this._peersLength-this._numConns)}},{key:"_numConns",get:function(){var e=0;for(var t in this._peers)this._peers[t].connected&&(e+=1);return e}},{key:"swarm",get:function(){return console.warn("WebTorrent: `torrent.swarm` is deprecated. Use `torrent` directly instead."),this}}]),n}();function se(e,t){return 2+Math.ceil(t*e.downloadSpeed()/A.BLOCK_LENGTH)}function oe(e,t,r){return 1+Math.ceil(t*e.downloadSpeed()/r)}function ae(e){return Math.random()*e|0}function ue(){}module.exports=ne;
},{"addr-to-ip-port":"AwT2","bitfield":"yWjx","chunk-store-stream/write":"Vn8l","debug":"jD9Y","torrent-discovery":"LSOj","events":"wIHY","fs":"sC8V","fs-chunk-store":"y0tm","simple-get":"bgy6","immediate-chunk-store":"lVmf","multistream":"qJ1R","net":"sC8V","os":"sC8V","run-parallel":"uzVO","run-parallel-limit":"mSIz","parse-torrent":"MV2a","path":"sNrv","torrent-piece":"UinZ","pump":"J9x6","random-iterate":"DYhE","simple-sha1":"U1Lh","speedometer":"JweE","uniq":"DiK4","ut_metadata":"doLN","ut_pex":"sC8V","parse-numeric-range":"h9uI","./file":"XINP","./peer":"R1d1","./rarity-map":"sCHO","./server":"sC8V","../package.json":"mzaC","process":"g5IB"}],"jlH1":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var global = arguments[3];
var process = require("process");
var e=require("buffer").Buffer,t=arguments[3],r=require("process");function n(e){return s(e)||i(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?p(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=require("events"),b=v.EventEmitter,g=require("simple-concat"),m=require("create-torrent"),w=require("debug")("webtorrent"),_=require("bittorrent-dht/client"),k=require("load-ip-set"),I=require("run-parallel"),S=require("parse-torrent"),P=require("path"),O=require("simple-peer"),q=require("randombytes"),x=require("speedometer"),T=require("./lib/tcp-pool"),j=require("./lib/torrent"),E=require("./package.json").version,C=E.replace(/\d*./g,function(e){return"0".concat(e%100).slice(-2)}).slice(0,4),W="-WW".concat(C,"-"),A=function(o){function i(){var n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,i),n=f(this,l(i).call(this)),"string"==typeof o.peerId?n.peerId=o.peerId:e.isBuffer(o.peerId)?n.peerId=o.peerId.toString("hex"):n.peerId=e.from(W+q(9).toString("base64")).toString("hex"),n.peerIdBuffer=e.from(n.peerId,"hex"),"string"==typeof o.nodeId?n.nodeId=o.nodeId:e.isBuffer(o.nodeId)?n.nodeId=o.nodeId.toString("hex"):n.nodeId=q(20).toString("hex"),n.nodeIdBuffer=e.from(n.nodeId,"hex"),n._debugId=n.peerId.toString("hex").substring(0,7),n.destroyed=!1,n.listening=!1,n.torrentPort=o.torrentPort||0,n.dhtPort=o.dhtPort||0,n.tracker=void 0!==o.tracker?o.tracker:{},n.torrents=[],n.maxConns=Number(o.maxConns)||55,n._debug("new webtorrent (peerId %s, nodeId %s, port %s)",n.peerId,n.nodeId,n.torrentPort),n.tracker&&("object"!==d(n.tracker)&&(n.tracker={}),o.rtcConfig&&(console.warn("WebTorrent: opts.rtcConfig is deprecated. Use opts.tracker.rtcConfig instead"),n.tracker.rtcConfig=o.rtcConfig),o.wrtc&&(console.warn("WebTorrent: opts.wrtc is deprecated. Use opts.tracker.wrtc instead"),n.tracker.wrtc=o.wrtc),t.WRTC&&!n.tracker.wrtc&&(n.tracker.wrtc=t.WRTC)),"function"==typeof T?n._tcpPool=new T(p(n)):r.nextTick(function(){n._onListening()}),n._downloadSpeed=x(),n._uploadSpeed=x(),!1!==o.dht&&"function"==typeof _?(n.dht=new _(Object.assign({},{nodeId:n.nodeId},o.dht)),n.dht.once("error",function(e){n._destroy(e)}),n.dht.once("listening",function(){var e=n.dht.address();e&&(n.dhtPort=e.port)}),n.dht.setMaxListeners(0),n.dht.listen(n.dhtPort)):n.dht=!1,n.enableWebSeeds=!1!==o.webSeeds;var s=function(){n.destroyed||(n.ready=!0,n.emit("ready"))};return"function"==typeof k&&null!=o.blocklist?k(o.blocklist,{headers:{"user-agent":"WebTorrent/".concat(E," (https://webtorrent.io)")}},function(e,t){if(e)return n.error("Failed to load blocklist: ".concat(e.message));n.blocked=t,s()}):r.nextTick(s),n}return h(i,b),a(i,[{key:"get",value:function(e){if(e instanceof j){if(this.torrents.includes(e))return e}else{var t;try{t=S(e)}catch(u){}if(!t)return null;if(!t.infoHash)throw new Error("Invalid torrent identifier");var r=!0,n=!1,o=void 0;try{for(var i,s=this.torrents[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var d=i.value;if(d.infoHash===t.infoHash)return d}}catch(u){n=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}}return null}},{key:"download",value:function(e,t,r){return console.warn("WebTorrent: client.download() is deprecated. Use client.add() instead"),this.add(e,t,r)}},{key:"add",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(this.destroyed)throw new Error("client is destroyed");if("function"==typeof r){var o=[{},r];r=o[0],n=o[1]}var i=function(){if(!t.destroyed){var e=!0,r=!1,n=void 0;try{for(var o,i=t.torrents[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var s=o.value;if(s.infoHash===d.infoHash&&s!==d)return void d._destroy(new Error("Cannot add duplicate torrent ".concat(d.infoHash)))}}catch(u){r=!0,n=u}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}}},s=function(){t.destroyed||("function"==typeof n&&n(d),t.emit("torrent",d))};this._debug("add"),r=r?Object.assign({},r):{};var d=new j(e,this,r);return this.torrents.push(d),d.once("_infoHash",i),d.once("ready",s),d.once("close",function e(){d.removeListener("_infoHash",i),d.removeListener("ready",s),d.removeListener("close",e)}),d}},{key:"seed",value:function(e,t,r){var n=this;if(this.destroyed)throw new Error("client is destroyed");if("function"==typeof t){var o=[{},t];t=o[0],r=o[1]}this._debug("seed"),(t=t?Object.assign({},t):{}).skipVerify=!0;var i="string"==typeof e;i&&(t.path=P.dirname(e)),t.createdBy||(t.createdBy="WebTorrent/".concat(C));var s,d=function(e){n._debug("on seed"),"function"==typeof r&&r(e),e.emit("seed"),n.emit("seed",e)},u=this.add(null,t,function(e){var t=[function(t){if(i)return t();e.load(s,t)}];n.dht&&t.push(function(t){e.once("dhtAnnounce",t)}),I(t,function(t){if(!n.destroyed)return t?e._destroy(t):void d(e)})});return H(e)?e=Array.from(e):Array.isArray(e)||(e=[e]),I(e.map(function(e){return function(t){B(e)?g(e,t):t(null,e)}}),function(e,r){if(!n.destroyed)return e?u._destroy(e):void m.parseInput(r,t,function(e,o){if(!n.destroyed){if(e)return u._destroy(e);s=o.map(function(e){return e.getStream}),m(r,t,function(e,t){if(!n.destroyed){if(e)return u._destroy(e);var r=n.get(t);r?u._destroy(new Error("Cannot add duplicate torrent ".concat(r.infoHash))):u._onTorrentId(t)}})}})}),u}},{key:"remove",value:function(e,t){if(this._debug("remove"),!this.get(e))throw new Error("No torrent with id ".concat(e));this._remove(e,t)}},{key:"_remove",value:function(e,t){var r=this.get(e);r&&(this.torrents.splice(this.torrents.indexOf(r),1),r.destroy(t))}},{key:"address",value:function(){return this.listening?this._tcpPool?this._tcpPool.server.address():{address:"0.0.0.0",family:"IPv4",port:0}:null}},{key:"destroy",value:function(e){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,e)}},{key:"_destroy",value:function(e,t){var r=this;this._debug("client destroy"),this.destroyed=!0;var n=this.torrents.map(function(e){return function(t){e.destroy(t)}});this._tcpPool&&n.push(function(e){r._tcpPool.destroy(e)}),this.dht&&n.push(function(e){r.dht.destroy(e)}),I(n,t),e&&this.emit("error",e),this.torrents=[],this._tcpPool=null,this.dht=null}},{key:"_onListening",value:function(){if(this._debug("listening"),this.listening=!0,this._tcpPool){var e=this._tcpPool.server.address();e&&(this.torrentPort=e.port)}this.emit("listening")}},{key:"_debug",value:function(){var e=[].slice.call(arguments);e[0]="[".concat(this._debugId,"] ").concat(e[0]),w.apply(void 0,n(e))}},{key:"downloadSpeed",get:function(){return this._downloadSpeed()}},{key:"uploadSpeed",get:function(){return this._uploadSpeed()}},{key:"progress",get:function(){var e=this.torrents.filter(function(e){return 1!==e.progress});return e.reduce(function(e,t){return e+t.downloaded},0)/(e.reduce(function(e,t){return e+(t.length||0)},0)||1)}},{key:"ratio",get:function(){return this.torrents.reduce(function(e,t){return e+t.uploaded},0)/(this.torrents.reduce(function(e,t){return e+t.received},0)||1)}}]),i}();function B(e){return"object"===d(e)&&null!=e&&"function"==typeof e.pipe}function H(e){return"undefined"!=typeof FileList&&e instanceof FileList}A.WEBRTC_SUPPORT=O.WEBRTC_SUPPORT,A.VERSION=E,module.exports=A;
},{"events":"wIHY","simple-concat":"Mrqk","create-torrent":"lVa8","debug":"jD9Y","bittorrent-dht/client":"sC8V","load-ip-set":"sC8V","run-parallel":"uzVO","parse-torrent":"MV2a","path":"sNrv","simple-peer":"Sx5b","randombytes":"pXr2","speedometer":"JweE","./lib/tcp-pool":"sC8V","./lib/torrent":"WHRq","./package.json":"mzaC","buffer":"aMB2","process":"g5IB"}],"caQK":[function(require,module,exports) {
var e=require("drag-drop"),n=require("webtorrent"),r=new n;e("body",function(e){r.seed(e,function(e){console.log("Client is seeding "+e.magnetURI)})});
},{"drag-drop":"bDYx","webtorrent":"jlH1"}]},{},["caQK"], null)
//# sourceMappingURL=/criatorrent.56379555.js.map