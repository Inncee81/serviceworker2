{"id":"Vn8l","dependencies":[{"name":"/workspace/serviceworker2/package.json","includedInParent":true,"mtime":1581951768329},{"name":"/workspace/serviceworker2/node_modules/chunk-store-stream/package.json","includedInParent":true,"mtime":1581951768270},{"name":"block-stream2","loc":{"line":1,"column":28},"parent":"/workspace/serviceworker2/node_modules/chunk-store-stream/write.js","resolved":"/workspace/serviceworker2/node_modules/block-stream2/index.js"},{"name":"readable-stream","loc":{"line":2,"column":23},"parent":"/workspace/serviceworker2/node_modules/chunk-store-stream/write.js","resolved":"/workspace/serviceworker2/node_modules/readable-stream/readable-browser.js"}],"generated":{"js":"const t=require(\"block-stream2\"),s=require(\"readable-stream\");class e extends s.Writable{constructor(s,e,r={}){if(super(r),!s||!s.put||!s.get)throw new Error(\"First argument must be an abstract-chunk-store compliant store\");if(!(e=Number(e)))throw new Error(\"Second argument must be a chunk length\");this._blockstream=new t(e,{zeroPadding:!1}),this._outstandingPuts=0;let i=0;this._blockstream.on(\"data\",t=>{this.destroyed||(this._outstandingPuts+=1,s.put(i,t,()=>{this._outstandingPuts-=1,0===this._outstandingPuts&&\"function\"==typeof this._finalCb&&(this._finalCb(null),this._finalCb=null)}),i+=1)}).on(\"error\",t=>{this.destroy(t)})}_write(t,s,e){this._blockstream.write(t,s,e)}_final(t){this._blockstream.end(),this._blockstream.once(\"end\",()=>{0===this._outstandingPuts?t(null):this._finalCb=t})}destroy(t){this.destroyed||(this.destroyed=!0,t&&this.emit(\"error\",t),this.emit(\"close\"))}}module.exports=e;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/chunk-store-stream/write.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":1,"column":0},"generated":{"line":1,"column":6}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":1,"column":0},"generated":{"line":1,"column":8}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":1,"column":0},"generated":{"line":1,"column":16}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":2,"column":0},"generated":{"line":1,"column":33}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":2,"column":0},"generated":{"line":1,"column":35}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":2,"column":0},"generated":{"line":1,"column":43}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":4,"column":0},"generated":{"line":1,"column":62}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":4,"column":0},"generated":{"line":1,"column":68}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":4,"column":0},"generated":{"line":1,"column":78}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":4,"column":0},"generated":{"line":1,"column":80}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":5,"column":0},"generated":{"line":1,"column":89}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":5,"column":0},"generated":{"line":1,"column":101}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":5,"column":0},"generated":{"line":1,"column":103}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":5,"column":0},"generated":{"line":1,"column":105}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":5,"column":0},"generated":{"line":1,"column":107}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":8,"column":0},"generated":{"line":1,"column":111}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":6,"column":0},"generated":{"line":1,"column":114}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":6,"column":0},"generated":{"line":1,"column":120}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":8,"column":0},"generated":{"line":1,"column":124}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":8,"column":0},"generated":{"line":1,"column":128}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":8,"column":0},"generated":{"line":1,"column":130}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":8,"column":0},"generated":{"line":1,"column":136}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":8,"column":0},"generated":{"line":1,"column":138}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":9,"column":0},"generated":{"line":1,"column":142}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":9,"column":0},"generated":{"line":1,"column":148}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":9,"column":0},"generated":{"line":1,"column":152}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":9,"column":0},"generated":{"line":1,"column":158}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":12,"column":0},"generated":{"line":1,"column":224}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":11,"column":0},"generated":{"line":1,"column":229}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":11,"column":0},"generated":{"line":1,"column":231}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":11,"column":0},"generated":{"line":1,"column":238}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":12,"column":0},"generated":{"line":1,"column":242}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":12,"column":0},"generated":{"line":1,"column":248}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":12,"column":0},"generated":{"line":1,"column":252}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":12,"column":0},"generated":{"line":1,"column":258}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":14,"column":0},"generated":{"line":1,"column":300}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":14,"column":0},"generated":{"line":1,"column":305}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":14,"column":0},"generated":{"line":1,"column":318}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":14,"column":0},"generated":{"line":1,"column":322}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":14,"column":0},"generated":{"line":1,"column":324}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":14,"column":0},"generated":{"line":1,"column":326}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":14,"column":0},"generated":{"line":1,"column":327}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":14,"column":0},"generated":{"line":1,"column":340}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":15,"column":0},"generated":{"line":1,"column":344}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":15,"column":0},"generated":{"line":1,"column":349}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":15,"column":0},"generated":{"line":1,"column":366}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":17,"column":0},"generated":{"line":1,"column":368}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":17,"column":0},"generated":{"line":1,"column":372}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":17,"column":0},"generated":{"line":1,"column":374}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":32,"column":0},"generated":{"line":1,"column":376}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":32,"column":0},"generated":{"line":1,"column":381}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":33,"column":0},"generated":{"line":1,"column":394}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":33,"column":0},"generated":{"line":1,"column":397}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":18,"column":0},"generated":{"line":1,"column":404}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":19,"column":0},"generated":{"line":1,"column":408}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":19,"column":0},"generated":{"line":1,"column":413}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":21,"column":0},"generated":{"line":1,"column":425}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":21,"column":0},"generated":{"line":1,"column":430}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":21,"column":0},"generated":{"line":1,"column":448}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":22,"column":0},"generated":{"line":1,"column":450}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":22,"column":0},"generated":{"line":1,"column":452}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":22,"column":0},"generated":{"line":1,"column":456}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":22,"column":0},"generated":{"line":1,"column":458}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":22,"column":0},"generated":{"line":1,"column":460}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":23,"column":0},"generated":{"line":1,"column":465}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":23,"column":0},"generated":{"line":1,"column":470}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":23,"column":0},"generated":{"line":1,"column":488}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":24,"column":0},"generated":{"line":1,"column":490}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":24,"column":0},"generated":{"line":1,"column":494}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":24,"column":0},"generated":{"line":1,"column":499}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":24,"column":0},"generated":{"line":1,"column":517}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":24,"column":0},"generated":{"line":1,"column":536}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":24,"column":0},"generated":{"line":1,"column":541}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":25,"column":0},"generated":{"line":1,"column":552}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":25,"column":0},"generated":{"line":1,"column":557}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":25,"column":0},"generated":{"line":1,"column":566}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":26,"column":0},"generated":{"line":1,"column":572}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":26,"column":0},"generated":{"line":1,"column":577}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":26,"column":0},"generated":{"line":1,"column":586}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":29,"column":0},"generated":{"line":1,"column":594}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":29,"column":0},"generated":{"line":1,"column":597}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":34,"column":0},"generated":{"line":1,"column":602}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":34,"column":0},"generated":{"line":1,"column":605}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":34,"column":0},"generated":{"line":1,"column":613}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":34,"column":0},"generated":{"line":1,"column":617}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":34,"column":0},"generated":{"line":1,"column":622}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":34,"column":0},"generated":{"line":1,"column":630}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":37,"column":0},"generated":{"line":1,"column":635}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":37,"column":0},"generated":{"line":1,"column":642}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":37,"column":0},"generated":{"line":1,"column":644}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":37,"column":0},"generated":{"line":1,"column":646}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":38,"column":0},"generated":{"line":1,"column":649}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":38,"column":0},"generated":{"line":1,"column":654}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":38,"column":0},"generated":{"line":1,"column":667}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":38,"column":0},"generated":{"line":1,"column":673}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":38,"column":0},"generated":{"line":1,"column":675}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":38,"column":0},"generated":{"line":1,"column":677}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":41,"column":0},"generated":{"line":1,"column":680}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":41,"column":0},"generated":{"line":1,"column":687}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":42,"column":0},"generated":{"line":1,"column":690}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":42,"column":0},"generated":{"line":1,"column":695}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":42,"column":0},"generated":{"line":1,"column":708}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":43,"column":0},"generated":{"line":1,"column":714}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":43,"column":0},"generated":{"line":1,"column":719}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":43,"column":0},"generated":{"line":1,"column":732}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":43,"column":0},"generated":{"line":1,"column":737}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":43,"column":0},"generated":{"line":1,"column":743}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":44,"column":0},"generated":{"line":1,"column":748}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":44,"column":0},"generated":{"line":1,"column":752}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":44,"column":0},"generated":{"line":1,"column":757}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":44,"column":0},"generated":{"line":1,"column":774}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":44,"column":0},"generated":{"line":1,"column":776}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":45,"column":0},"generated":{"line":1,"column":782}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":45,"column":0},"generated":{"line":1,"column":787}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":45,"column":0},"generated":{"line":1,"column":796}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":49,"column":0},"generated":{"line":1,"column":800}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":49,"column":0},"generated":{"line":1,"column":808}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":50,"column":0},"generated":{"line":1,"column":811}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":50,"column":0},"generated":{"line":1,"column":816}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":51,"column":0},"generated":{"line":1,"column":828}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":51,"column":0},"generated":{"line":1,"column":833}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":51,"column":0},"generated":{"line":1,"column":844}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":53,"column":0},"generated":{"line":1,"column":846}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":53,"column":0},"generated":{"line":1,"column":849}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":53,"column":0},"generated":{"line":1,"column":854}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":53,"column":0},"generated":{"line":1,"column":859}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":53,"column":0},"generated":{"line":1,"column":867}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":54,"column":0},"generated":{"line":1,"column":870}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":54,"column":0},"generated":{"line":1,"column":875}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":54,"column":0},"generated":{"line":1,"column":880}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":58,"column":0},"generated":{"line":1,"column":891}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":58,"column":0},"generated":{"line":1,"column":898}},{"source":"node_modules/chunk-store-stream/write.js","original":{"line":58,"column":0},"generated":{"line":1,"column":906}}],"sources":{"node_modules/chunk-store-stream/write.js":"const BlockStream = require('block-stream2')\nconst stream = require('readable-stream')\n\nclass ChunkStoreWriteStream extends stream.Writable {\n  constructor (store, chunkLength, opts = {}) {\n    super(opts)\n\n    if (!store || !store.put || !store.get) {\n      throw new Error('First argument must be an abstract-chunk-store compliant store')\n    }\n    chunkLength = Number(chunkLength)\n    if (!chunkLength) throw new Error('Second argument must be a chunk length')\n\n    this._blockstream = new BlockStream(chunkLength, { zeroPadding: false })\n    this._outstandingPuts = 0\n\n    let index = 0\n    const onData = chunk => {\n      if (this.destroyed) return\n\n      this._outstandingPuts += 1\n      store.put(index, chunk, () => {\n        this._outstandingPuts -= 1\n        if (this._outstandingPuts === 0 && typeof this._finalCb === 'function') {\n          this._finalCb(null)\n          this._finalCb = null\n        }\n      })\n      index += 1\n    }\n\n    this._blockstream\n      .on('data', onData)\n      .on('error', err => { this.destroy(err) })\n  }\n\n  _write (chunk, encoding, callback) {\n    this._blockstream.write(chunk, encoding, callback)\n  }\n\n  _final (cb) {\n    this._blockstream.end()\n    this._blockstream.once('end', () => {\n      if (this._outstandingPuts === 0) cb(null)\n      else this._finalCb = cb\n    })\n  }\n\n  destroy (err) {\n    if (this.destroyed) return\n    this.destroyed = true\n\n    if (err) this.emit('error', err)\n    this.emit('close')\n  }\n}\n\nmodule.exports = ChunkStoreWriteStream\n"},"lineCount":null}},"error":null,"hash":"eec4ed0417b3fad9eb9aa42349d59d41","cacheData":{"env":{}}}