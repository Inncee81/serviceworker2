{"id":"DM2V","dependencies":[{"name":"/workspace/serviceworker2/package.json","includedInParent":true,"mtime":1581951768329},{"name":"/workspace/serviceworker2/node_modules/filestream/package.json","includedInParent":true,"mtime":1581951768273},{"name":"readable-stream","loc":{"line":3,"column":29},"parent":"/workspace/serviceworker2/node_modules/filestream/read.js","resolved":"/workspace/serviceworker2/node_modules/readable-stream/readable-browser.js"},{"name":"typedarray-to-buffer","loc":{"line":4,"column":25},"parent":"/workspace/serviceworker2/node_modules/filestream/read.js","resolved":"/workspace/serviceworker2/node_modules/typedarray-to-buffer/index.js"}],"generated":{"js":"const{Readable:e}=require(\"readable-stream\"),r=require(\"typedarray-to-buffer\");class s extends e{constructor(e,s={}){super(s),this._offset=0,this._ready=!1,this._file=e,this._size=e.size,this._chunkSize=s.chunkSize||Math.max(this._size/1e3,204800);const t=new FileReader;t.onload=(()=>{this.push(r(t.result))}),t.onerror=(()=>{this.emit(\"error\",t.error)}),this.reader=t,this._generateHeaderBlocks(e,s,(e,r)=>{if(e)return this.emit(\"error\",e);Array.isArray(r)&&r.forEach(e=>this.push(e)),this._ready=!0,this.emit(\"_ready\")})}_generateHeaderBlocks(e,r,s){s(null,[])}_read(){if(!this._ready)return void this.once(\"_ready\",this._read.bind(this));const e=this._offset;let r=this._offset+this._chunkSize;if(r>this._size&&(r=this._size),e===this._size)return this.destroy(),void this.push(null);this.reader.readAsArrayBuffer(this._file.slice(e,r)),this._offset=r}destroy(){if(this._file=null,this.reader){this.reader.onload=null,this.reader.onerror=null;try{this.reader.abort()}catch(e){}}this.reader=null}}module.exports=s;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/filestream/read.js","original":{"line":3,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/filestream/read.js","original":{"line":3,"column":0},"generated":{"line":1,"column":6}},{"source":"node_modules/filestream/read.js","original":{"line":3,"column":0},"generated":{"line":1,"column":15}},{"source":"node_modules/filestream/read.js","original":{"line":3,"column":0},"generated":{"line":1,"column":18}},{"source":"node_modules/filestream/read.js","original":{"line":3,"column":0},"generated":{"line":1,"column":26}},{"source":"node_modules/filestream/read.js","original":{"line":4,"column":0},"generated":{"line":1,"column":45}},{"source":"node_modules/filestream/read.js","original":{"line":4,"column":0},"generated":{"line":1,"column":47}},{"source":"node_modules/filestream/read.js","original":{"line":4,"column":0},"generated":{"line":1,"column":55}},{"source":"node_modules/filestream/read.js","original":{"line":6,"column":0},"generated":{"line":1,"column":79}},{"source":"node_modules/filestream/read.js","original":{"line":6,"column":0},"generated":{"line":1,"column":85}},{"source":"node_modules/filestream/read.js","original":{"line":6,"column":0},"generated":{"line":1,"column":95}},{"source":"node_modules/filestream/read.js","original":{"line":7,"column":0},"generated":{"line":1,"column":97}},{"source":"node_modules/filestream/read.js","original":{"line":7,"column":0},"generated":{"line":1,"column":109}},{"source":"node_modules/filestream/read.js","original":{"line":7,"column":0},"generated":{"line":1,"column":111}},{"source":"node_modules/filestream/read.js","original":{"line":7,"column":0},"generated":{"line":1,"column":113}},{"source":"node_modules/filestream/read.js","original":{"line":8,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/filestream/read.js","original":{"line":8,"column":0},"generated":{"line":1,"column":123}},{"source":"node_modules/filestream/read.js","original":{"line":11,"column":0},"generated":{"line":1,"column":126}},{"source":"node_modules/filestream/read.js","original":{"line":11,"column":0},"generated":{"line":1,"column":131}},{"source":"node_modules/filestream/read.js","original":{"line":11,"column":0},"generated":{"line":1,"column":139}},{"source":"node_modules/filestream/read.js","original":{"line":12,"column":0},"generated":{"line":1,"column":141}},{"source":"node_modules/filestream/read.js","original":{"line":12,"column":0},"generated":{"line":1,"column":146}},{"source":"node_modules/filestream/read.js","original":{"line":12,"column":0},"generated":{"line":1,"column":154}},{"source":"node_modules/filestream/read.js","original":{"line":13,"column":0},"generated":{"line":1,"column":156}},{"source":"node_modules/filestream/read.js","original":{"line":13,"column":0},"generated":{"line":1,"column":161}},{"source":"node_modules/filestream/read.js","original":{"line":13,"column":0},"generated":{"line":1,"column":167}},{"source":"node_modules/filestream/read.js","original":{"line":14,"column":0},"generated":{"line":1,"column":169}},{"source":"node_modules/filestream/read.js","original":{"line":14,"column":0},"generated":{"line":1,"column":174}},{"source":"node_modules/filestream/read.js","original":{"line":14,"column":0},"generated":{"line":1,"column":180}},{"source":"node_modules/filestream/read.js","original":{"line":14,"column":0},"generated":{"line":1,"column":182}},{"source":"node_modules/filestream/read.js","original":{"line":15,"column":0},"generated":{"line":1,"column":187}},{"source":"node_modules/filestream/read.js","original":{"line":15,"column":0},"generated":{"line":1,"column":192}},{"source":"node_modules/filestream/read.js","original":{"line":15,"column":0},"generated":{"line":1,"column":203}},{"source":"node_modules/filestream/read.js","original":{"line":15,"column":0},"generated":{"line":1,"column":205}},{"source":"node_modules/filestream/read.js","original":{"line":15,"column":0},"generated":{"line":1,"column":216}},{"source":"node_modules/filestream/read.js","original":{"line":15,"column":0},"generated":{"line":1,"column":221}},{"source":"node_modules/filestream/read.js","original":{"line":15,"column":0},"generated":{"line":1,"column":225}},{"source":"node_modules/filestream/read.js","original":{"line":15,"column":0},"generated":{"line":1,"column":230}},{"source":"node_modules/filestream/read.js","original":{"line":15,"column":0},"generated":{"line":1,"column":236}},{"source":"node_modules/filestream/read.js","original":{"line":15,"column":0},"generated":{"line":1,"column":240}},{"source":"node_modules/filestream/read.js","original":{"line":18,"column":0},"generated":{"line":1,"column":248}},{"source":"node_modules/filestream/read.js","original":{"line":18,"column":0},"generated":{"line":1,"column":254}},{"source":"node_modules/filestream/read.js","original":{"line":18,"column":0},"generated":{"line":1,"column":256}},{"source":"node_modules/filestream/read.js","original":{"line":18,"column":0},"generated":{"line":1,"column":260}},{"source":"node_modules/filestream/read.js","original":{"line":20,"column":0},"generated":{"line":1,"column":271}},{"source":"node_modules/filestream/read.js","original":{"line":20,"column":0},"generated":{"line":1,"column":273}},{"source":"node_modules/filestream/read.js","original":{"line":20,"column":0},"generated":{"line":1,"column":280}},{"source":"node_modules/filestream/read.js","original":{"line":22,"column":0},"generated":{"line":1,"column":286}},{"source":"node_modules/filestream/read.js","original":{"line":22,"column":0},"generated":{"line":1,"column":291}},{"source":"node_modules/filestream/read.js","original":{"line":22,"column":0},"generated":{"line":1,"column":296}},{"source":"node_modules/filestream/read.js","original":{"line":22,"column":0},"generated":{"line":1,"column":298}},{"source":"node_modules/filestream/read.js","original":{"line":22,"column":0},"generated":{"line":1,"column":300}},{"source":"node_modules/filestream/read.js","original":{"line":24,"column":0},"generated":{"line":1,"column":311}},{"source":"node_modules/filestream/read.js","original":{"line":24,"column":0},"generated":{"line":1,"column":313}},{"source":"node_modules/filestream/read.js","original":{"line":24,"column":0},"generated":{"line":1,"column":321}},{"source":"node_modules/filestream/read.js","original":{"line":25,"column":0},"generated":{"line":1,"column":327}},{"source":"node_modules/filestream/read.js","original":{"line":25,"column":0},"generated":{"line":1,"column":332}},{"source":"node_modules/filestream/read.js","original":{"line":25,"column":0},"generated":{"line":1,"column":337}},{"source":"node_modules/filestream/read.js","original":{"line":25,"column":0},"generated":{"line":1,"column":345}},{"source":"node_modules/filestream/read.js","original":{"line":25,"column":0},"generated":{"line":1,"column":347}},{"source":"node_modules/filestream/read.js","original":{"line":28,"column":0},"generated":{"line":1,"column":356}},{"source":"node_modules/filestream/read.js","original":{"line":28,"column":0},"generated":{"line":1,"column":361}},{"source":"node_modules/filestream/read.js","original":{"line":28,"column":0},"generated":{"line":1,"column":368}},{"source":"node_modules/filestream/read.js","original":{"line":31,"column":0},"generated":{"line":1,"column":370}},{"source":"node_modules/filestream/read.js","original":{"line":31,"column":0},"generated":{"line":1,"column":375}},{"source":"node_modules/filestream/read.js","original":{"line":31,"column":0},"generated":{"line":1,"column":397}},{"source":"node_modules/filestream/read.js","original":{"line":31,"column":0},"generated":{"line":1,"column":399}},{"source":"node_modules/filestream/read.js","original":{"line":31,"column":0},"generated":{"line":1,"column":401}},{"source":"node_modules/filestream/read.js","original":{"line":31,"column":0},"generated":{"line":1,"column":402}},{"source":"node_modules/filestream/read.js","original":{"line":31,"column":0},"generated":{"line":1,"column":404}},{"source":"node_modules/filestream/read.js","original":{"line":33,"column":0},"generated":{"line":1,"column":409}},{"source":"node_modules/filestream/read.js","original":{"line":33,"column":0},"generated":{"line":1,"column":412}},{"source":"node_modules/filestream/read.js","original":{"line":34,"column":0},"generated":{"line":1,"column":414}},{"source":"node_modules/filestream/read.js","original":{"line":34,"column":0},"generated":{"line":1,"column":421}},{"source":"node_modules/filestream/read.js","original":{"line":34,"column":0},"generated":{"line":1,"column":426}},{"source":"node_modules/filestream/read.js","original":{"line":34,"column":0},"generated":{"line":1,"column":431}},{"source":"node_modules/filestream/read.js","original":{"line":34,"column":0},"generated":{"line":1,"column":439}},{"source":"node_modules/filestream/read.js","original":{"line":38,"column":0},"generated":{"line":1,"column":442}},{"source":"node_modules/filestream/read.js","original":{"line":38,"column":0},"generated":{"line":1,"column":448}},{"source":"node_modules/filestream/read.js","original":{"line":38,"column":0},"generated":{"line":1,"column":456}},{"source":"node_modules/filestream/read.js","original":{"line":39,"column":0},"generated":{"line":1,"column":460}},{"source":"node_modules/filestream/read.js","original":{"line":39,"column":0},"generated":{"line":1,"column":462}},{"source":"node_modules/filestream/read.js","original":{"line":39,"column":0},"generated":{"line":1,"column":470}},{"source":"node_modules/filestream/read.js","original":{"line":39,"column":0},"generated":{"line":1,"column":473}},{"source":"node_modules/filestream/read.js","original":{"line":39,"column":0},"generated":{"line":1,"column":478}},{"source":"node_modules/filestream/read.js","original":{"line":39,"column":0},"generated":{"line":1,"column":483}},{"source":"node_modules/filestream/read.js","original":{"line":42,"column":0},"generated":{"line":1,"column":487}},{"source":"node_modules/filestream/read.js","original":{"line":42,"column":0},"generated":{"line":1,"column":492}},{"source":"node_modules/filestream/read.js","original":{"line":42,"column":0},"generated":{"line":1,"column":500}},{"source":"node_modules/filestream/read.js","original":{"line":43,"column":0},"generated":{"line":1,"column":502}},{"source":"node_modules/filestream/read.js","original":{"line":43,"column":0},"generated":{"line":1,"column":507}},{"source":"node_modules/filestream/read.js","original":{"line":43,"column":0},"generated":{"line":1,"column":512}},{"source":"node_modules/filestream/read.js","original":{"line":47,"column":0},"generated":{"line":1,"column":524}},{"source":"node_modules/filestream/read.js","original":{"line":47,"column":0},"generated":{"line":1,"column":546}},{"source":"node_modules/filestream/read.js","original":{"line":47,"column":0},"generated":{"line":1,"column":548}},{"source":"node_modules/filestream/read.js","original":{"line":47,"column":0},"generated":{"line":1,"column":550}},{"source":"node_modules/filestream/read.js","original":{"line":48,"column":0},"generated":{"line":1,"column":553}},{"source":"node_modules/filestream/read.js","original":{"line":48,"column":0},"generated":{"line":1,"column":555}},{"source":"node_modules/filestream/read.js","original":{"line":48,"column":0},"generated":{"line":1,"column":560}},{"source":"node_modules/filestream/read.js","original":{"line":51,"column":0},"generated":{"line":1,"column":564}},{"source":"node_modules/filestream/read.js","original":{"line":52,"column":0},"generated":{"line":1,"column":572}},{"source":"node_modules/filestream/read.js","original":{"line":52,"column":0},"generated":{"line":1,"column":576}},{"source":"node_modules/filestream/read.js","original":{"line":52,"column":0},"generated":{"line":1,"column":581}},{"source":"node_modules/filestream/read.js","original":{"line":54,"column":0},"generated":{"line":1,"column":588}},{"source":"node_modules/filestream/read.js","original":{"line":53,"column":0},"generated":{"line":1,"column":600}},{"source":"node_modules/filestream/read.js","original":{"line":53,"column":0},"generated":{"line":1,"column":605}},{"source":"node_modules/filestream/read.js","original":{"line":53,"column":0},"generated":{"line":1,"column":610}},{"source":"node_modules/filestream/read.js","original":{"line":53,"column":0},"generated":{"line":1,"column":619}},{"source":"node_modules/filestream/read.js","original":{"line":53,"column":0},"generated":{"line":1,"column":624}},{"source":"node_modules/filestream/read.js","original":{"line":53,"column":0},"generated":{"line":1,"column":630}},{"source":"node_modules/filestream/read.js","original":{"line":53,"column":0},"generated":{"line":1,"column":635}},{"source":"node_modules/filestream/read.js","original":{"line":57,"column":0},"generated":{"line":1,"column":642}},{"source":"node_modules/filestream/read.js","original":{"line":57,"column":0},"generated":{"line":1,"column":648}},{"source":"node_modules/filestream/read.js","original":{"line":57,"column":0},"generated":{"line":1,"column":650}},{"source":"node_modules/filestream/read.js","original":{"line":57,"column":0},"generated":{"line":1,"column":655}},{"source":"node_modules/filestream/read.js","original":{"line":58,"column":0},"generated":{"line":1,"column":663}},{"source":"node_modules/filestream/read.js","original":{"line":58,"column":0},"generated":{"line":1,"column":667}},{"source":"node_modules/filestream/read.js","original":{"line":58,"column":0},"generated":{"line":1,"column":669}},{"source":"node_modules/filestream/read.js","original":{"line":58,"column":0},"generated":{"line":1,"column":674}},{"source":"node_modules/filestream/read.js","original":{"line":58,"column":0},"generated":{"line":1,"column":682}},{"source":"node_modules/filestream/read.js","original":{"line":58,"column":0},"generated":{"line":1,"column":687}},{"source":"node_modules/filestream/read.js","original":{"line":61,"column":0},"generated":{"line":1,"column":698}},{"source":"node_modules/filestream/read.js","original":{"line":59,"column":0},"generated":{"line":1,"column":701}},{"source":"node_modules/filestream/read.js","original":{"line":59,"column":0},"generated":{"line":1,"column":703}},{"source":"node_modules/filestream/read.js","original":{"line":59,"column":0},"generated":{"line":1,"column":708}},{"source":"node_modules/filestream/read.js","original":{"line":59,"column":0},"generated":{"line":1,"column":716}},{"source":"node_modules/filestream/read.js","original":{"line":59,"column":0},"generated":{"line":1,"column":718}},{"source":"node_modules/filestream/read.js","original":{"line":59,"column":0},"generated":{"line":1,"column":723}},{"source":"node_modules/filestream/read.js","original":{"line":61,"column":0},"generated":{"line":1,"column":730}},{"source":"node_modules/filestream/read.js","original":{"line":61,"column":0},"generated":{"line":1,"column":734}},{"source":"node_modules/filestream/read.js","original":{"line":61,"column":0},"generated":{"line":1,"column":739}},{"source":"node_modules/filestream/read.js","original":{"line":64,"column":0},"generated":{"line":1,"column":745}},{"source":"node_modules/filestream/read.js","original":{"line":62,"column":0},"generated":{"line":1,"column":752}},{"source":"node_modules/filestream/read.js","original":{"line":62,"column":0},"generated":{"line":1,"column":757}},{"source":"node_modules/filestream/read.js","original":{"line":63,"column":0},"generated":{"line":1,"column":772}},{"source":"node_modules/filestream/read.js","original":{"line":63,"column":0},"generated":{"line":1,"column":777}},{"source":"node_modules/filestream/read.js","original":{"line":63,"column":0},"generated":{"line":1,"column":782}},{"source":"node_modules/filestream/read.js","original":{"line":67,"column":0},"generated":{"line":1,"column":788}},{"source":"node_modules/filestream/read.js","original":{"line":67,"column":0},"generated":{"line":1,"column":793}},{"source":"node_modules/filestream/read.js","original":{"line":67,"column":0},"generated":{"line":1,"column":800}},{"source":"node_modules/filestream/read.js","original":{"line":67,"column":0},"generated":{"line":1,"column":818}},{"source":"node_modules/filestream/read.js","original":{"line":67,"column":0},"generated":{"line":1,"column":823}},{"source":"node_modules/filestream/read.js","original":{"line":67,"column":0},"generated":{"line":1,"column":829}},{"source":"node_modules/filestream/read.js","original":{"line":67,"column":0},"generated":{"line":1,"column":835}},{"source":"node_modules/filestream/read.js","original":{"line":67,"column":0},"generated":{"line":1,"column":837}},{"source":"node_modules/filestream/read.js","original":{"line":70,"column":0},"generated":{"line":1,"column":841}},{"source":"node_modules/filestream/read.js","original":{"line":70,"column":0},"generated":{"line":1,"column":846}},{"source":"node_modules/filestream/read.js","original":{"line":70,"column":0},"generated":{"line":1,"column":854}},{"source":"node_modules/filestream/read.js","original":{"line":73,"column":0},"generated":{"line":1,"column":856}},{"source":"node_modules/filestream/read.js","original":{"line":75,"column":0},"generated":{"line":1,"column":866}},{"source":"node_modules/filestream/read.js","original":{"line":74,"column":0},"generated":{"line":1,"column":869}},{"source":"node_modules/filestream/read.js","original":{"line":74,"column":0},"generated":{"line":1,"column":874}},{"source":"node_modules/filestream/read.js","original":{"line":74,"column":0},"generated":{"line":1,"column":880}},{"source":"node_modules/filestream/read.js","original":{"line":75,"column":0},"generated":{"line":1,"column":885}},{"source":"node_modules/filestream/read.js","original":{"line":75,"column":0},"generated":{"line":1,"column":890}},{"source":"node_modules/filestream/read.js","original":{"line":75,"column":0},"generated":{"line":1,"column":897}},{"source":"node_modules/filestream/read.js","original":{"line":76,"column":0},"generated":{"line":1,"column":898}},{"source":"node_modules/filestream/read.js","original":{"line":76,"column":0},"generated":{"line":1,"column":903}},{"source":"node_modules/filestream/read.js","original":{"line":76,"column":0},"generated":{"line":1,"column":910}},{"source":"node_modules/filestream/read.js","original":{"line":76,"column":0},"generated":{"line":1,"column":917}},{"source":"node_modules/filestream/read.js","original":{"line":77,"column":0},"generated":{"line":1,"column":922}},{"source":"node_modules/filestream/read.js","original":{"line":77,"column":0},"generated":{"line":1,"column":927}},{"source":"node_modules/filestream/read.js","original":{"line":77,"column":0},"generated":{"line":1,"column":934}},{"source":"node_modules/filestream/read.js","original":{"line":77,"column":0},"generated":{"line":1,"column":942}},{"source":"node_modules/filestream/read.js","original":{"line":78,"column":0},"generated":{"line":1,"column":947}},{"source":"node_modules/filestream/read.js","original":{"line":78,"column":0},"generated":{"line":1,"column":951}},{"source":"node_modules/filestream/read.js","original":{"line":78,"column":0},"generated":{"line":1,"column":956}},{"source":"node_modules/filestream/read.js","original":{"line":78,"column":0},"generated":{"line":1,"column":963}},{"source":"node_modules/filestream/read.js","original":{"line":78,"column":0},"generated":{"line":1,"column":971}},{"source":"node_modules/filestream/read.js","original":{"line":78,"column":0},"generated":{"line":1,"column":977}},{"source":"node_modules/filestream/read.js","original":{"line":80,"column":0},"generated":{"line":1,"column":982}},{"source":"node_modules/filestream/read.js","original":{"line":80,"column":0},"generated":{"line":1,"column":987}},{"source":"node_modules/filestream/read.js","original":{"line":80,"column":0},"generated":{"line":1,"column":994}},{"source":"node_modules/filestream/read.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1000}},{"source":"node_modules/filestream/read.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1007}},{"source":"node_modules/filestream/read.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1015}}],"sources":{"node_modules/filestream/read.js":"/* global FileReader */\n\nconst { Readable } = require('readable-stream')\nconst toBuffer = require('typedarray-to-buffer')\n\nclass FileReadStream extends Readable {\n  constructor (file, opts = {}) {\n    super(opts)\n\n    // save the read offset\n    this._offset = 0\n    this._ready = false\n    this._file = file\n    this._size = file.size\n    this._chunkSize = opts.chunkSize || Math.max(this._size / 1000, 200 * 1024)\n\n    // create the reader\n    const reader = new FileReader()\n\n    reader.onload = () => {\n      // get the data chunk\n      this.push(toBuffer(reader.result))\n    }\n    reader.onerror = () => {\n      this.emit('error', reader.error)\n    }\n\n    this.reader = reader\n\n    // generate the header blocks that we will send as part of the initial payload\n    this._generateHeaderBlocks(file, opts, (err, blocks) => {\n      // if we encountered an error, emit it\n      if (err) {\n        return this.emit('error', err)\n      }\n\n      // push the header blocks out to the stream\n      if (Array.isArray(blocks)) {\n        blocks.forEach(block => this.push(block))\n      }\n\n      this._ready = true\n      this.emit('_ready')\n    })\n  }\n\n  _generateHeaderBlocks (file, opts, callback) {\n    callback(null, [])\n  }\n\n  _read () {\n    if (!this._ready) {\n      this.once('_ready', this._read.bind(this))\n      return\n    }\n\n    const startOffset = this._offset\n    let endOffset = this._offset + this._chunkSize\n    if (endOffset > this._size) endOffset = this._size\n\n    if (startOffset === this._size) {\n      this.destroy()\n      this.push(null)\n      return\n    }\n\n    this.reader.readAsArrayBuffer(this._file.slice(startOffset, endOffset))\n\n    // update the stream offset\n    this._offset = endOffset\n  }\n\n  destroy () {\n    this._file = null\n    if (this.reader) {\n      this.reader.onload = null\n      this.reader.onerror = null\n      try { this.reader.abort() } catch (e) {};\n    }\n    this.reader = null\n  }\n}\n\nmodule.exports = FileReadStream\n"},"lineCount":null}},"error":null,"hash":"c21de5b86c39ea03273cfee07f0fe506","cacheData":{"env":{}}}